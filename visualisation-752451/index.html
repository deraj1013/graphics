<!DOCTYPE html><html><head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="choices/styles/css/choices.min.css">
		<link rel="stylesheet" type="text/css" href="style.css">
	<title>Inspections</title></head>
	<body>

<script>window.Flourish = {"static_prefix":".","environment":"live"};</script><script>var template=function(t){"use strict";var a,o,s;var n,i,r,l,u,c,h,f,d,_=Object.freeze({"stack-default":["header","controls","primary","footer"],"stack-2":["primary","header","controls","footer"],"stack-3":["header","primary","controls","footer"],"stack-4":["controls","primary","header","footer"]});function p(){n.style.textAlign=k.header_align,n.style.margin=0,n.style.borderTop="top"==k.header_border?k.header_border_width+"px "+k.header_border_style+" "+k.header_border_color:null,n.style.borderBottom="bottom"==k.header_border?k.header_border_width+"px "+k.header_border_style+" "+k.header_border_color:null,n.style.paddingBottom=k.title||k.subtitle?k.text?("custom"!=k.text_size?k.text_size/2:k.text_size_custom/2)+"rem":k.subtitle?("custom"!=k.subtitle_size?k.subtitle_size/2:k.subtitle_size_custom/2)+"rem":k.title?("custom"!=k.title_size?k.title_size/2:k.title_size_custom/2)+"rem":void 0:"",i.innerHTML=k.title?k.title:"",i.style.fontSize=("custom"!=k.title_size?k.title_size:k.title_size_custom)+"rem",i.style.lineHeight=k.title_line_height,i.style.fontWeight=k.title_weight,i.style.color=k.title_color,i.style.margin=0,i.style.lineHeight=k.title_color,i.style.paddingTop=k.title?("custom"==k.title_space_above?k.title_space_above_custom:k.title_space_above)+"rem":0,r.innerHTML=k.subtitle?k.subtitle:"",r.style.fontSize=("custom"!=k.subtitle_size?k.subtitle_size:k.subtitle_size_custom)+"rem",r.style.lineHeight=k.subtitle_line_height,r.style.fontWeight=k.subtitle_weight,r.style.color=k.subtitle_color,r.style.margin=0,r.style.paddingTop=k.subtitle?("custom"==k.subtitle_space_above?k.subtitle_space_above_custom:k.subtitle_space_above)+"rem":0,l.innerHTML=k.text?k.text:"",l.style.fontSize=("custom"!=k.text_size?k.text_size:k.text_size_custom)+"rem",l.style.lineHeight=k.text_line_height,l.style.fontWeight=k.text_weight,l.style.margin=0,l.style.color=k.text_color,l.style.paddingTop=k.text?("custom"==k.text_space_above?k.text_space_above_custom:k.text_space_above)+"rem":0,u.style.display=k.header_logo_enabled?"":"none",u.style.position="inside"==k.header_logo_align?"":"fixed",u.style.height=k.header_logo_height+"rem",u.style.top="outside"==k.header_logo_align?0:"",u.style.left="outside"==k.header_logo_align&&"left"==k.header_logo_position_outside?0:"",u.style.right="outside"==k.header_logo_align&&"right"==k.header_logo_position_outside?0:"",u.style.marginTop=k.header_logo_margin_top+"rem",u.style.marginBottom=k.header_logo_margin_bottom+"rem",u.style.marginLeft=k.header_logo_margin_left+"rem",u.style.marginRight=k.header_logo_margin_right+"rem",u.style.float="top"==k.header_logo_position_inside||"outside"==k.header_logo_align?"":k.header_logo_position_inside,u.style.width="auto",u.src=k.header_logo_src}function g(t){return"string"==typeof t&&null!=t.match(/^https?:\/\//i)}var m=!1;function v(t){return 0!==t.indexOf("http://")&&0!==t.indexOf("https://")?"http://"+t:t}function y(){var t;return(t=document.createElement("style")).type="text/css",t.innerHTML=".flourish-footer { margin: 0; } .flourish-footer p { margin: 0; display: inline; } .flourish-footer p:empty { height: 0; } .flourish-footer a { color: inherit; }",document.head.appendChild(t),(c=document.createElement("footer")).className="flourish-footer",(h=document.createElement("div")).className="flourish-footer-text",(d=document.createElement("a")).target="_blank",(f=document.createElement("img")).className="flourish-footer-logo",d.appendChild(f),c.appendChild(h),c.appendChild(d),c}function x(){var t=[{name:k.source_name,url:k.source_url},{name:k.multiple_sources?k.source_name_2:"",url:k.multiple_sources?k.source_url_2:""},{name:k.multiple_sources?k.source_name_3:"",url:k.multiple_sources?k.source_url_3:""}].filter(function(t){return t.name||t.url});m=0<t.length||k.footer_note||g(k.footer_logo_src)&&k.footer_logo_enabled,c.style.display="flex",c.style.height=m?null:0,c.style.width="100%",c.style.paddingTop=k.source_name||k.source_name_2||k.source_name_3||k.source_url||k.source_url_2||k.source_url_3||k.footer_note||g(k.footer_logo_src)&&k.footer_logo_enabled?V(k.footer_text_size)/2+"px":"",c.style.borderTop="top"==k.footer_border?k.footer_border_width+"px "+k.footer_border_style+" "+k.footer_border_color:"",c.style.borderBottom="bottom"==k.footer_border?k.footer_border_width+"px "+k.footer_border_style+" "+k.footer_border_color:"","justify"==k.footer_align?c.style.justifyContent="space-between":"left"==k.footer_align?c.style.justifyContent="flex-start":"right"==k.footer_align?c.style.justifyContent="flex-end":"center"==k.footer_align&&(c.style.justifyContent="center"),c.style.fontSize=k.footer_text_size+"rem",c.style.color=k.footer_text_color;var r=document.createElement("span");t.forEach(function(t,e){var n=document.createElement("p");if(0<e&&(n.innerText=", "),t.url){var i=document.createElement("a");i.innerText=t.name||t.url,i.href=v(t.url),i.target="_blank",n.appendChild(i)}else n.innerText+=t.name||t.url;r.innerHTML+=n.innerHTML}),h.style.order="left"==k.footer_logo_order?2:"",h.style.display="flex",h.style.alignItems=k.footer_align_vertical;var e="<p>";e+=""!==r.innerHTML?k.source_label+" "+r.innerHTML:"",e+=k.footer_note?(""!==r.innerHTML?" • ":"")+k.footer_note:"",e+="</p>",h.innerHTML=e,f.src=g(k.footer_logo_src)?k.footer_logo_src:"",f.style.height=k.footer_logo_height+"rem",f.style.marginLeft="right"==k.footer_logo_order?k.footer_logo_margin+"rem":"",f.style.marginRight="left"==k.footer_logo_order?k.footer_logo_margin+"rem":"",f.style.verticalAlign=k.footer_align_vertical,f.style.display=g(k.footer_logo_src)&&k.footer_logo_enabled?"":"none",d.href=""==k.footer_logo_link_url?"":v(k.footer_logo_link_url),d.style.cursor=""==k.footer_logo_link_url?"default":"pointer"}function b(){!function(){if(k.body_font&&k.body_font.url!==o){o=k.body_font.url,s.setAttribute("href",o),document.body.style.fontFamily=k.body_font.name;var r="";["mobile_small","mobile_big","tablet","desktop","big_screen"].forEach(function(t,e){var n="@media(min-width: "+k["breakpoint_"+t]+"px) {\n",i="html { font-size:"+k["font_size_"+t]+"%; }";r+=(0==e?"":n)+i+(0==e?"":"\n}")+"\n\n"}),a.innerHTML=r}}(),p(),x(),document.body.style.backgroundColor=k.background_color_enabled?k.background_color:"transparent",document.body.style.backgroundImage=k.background_image_enabled?"url("+k.background_image_src+")":"",document.body.style.backgroundSize=k.background_image_size,document.body.style.backgroundRepeat="no-repeat",document.body.style.backgroundPosition=k.background_image_position;var t=C.wrapper.style;t.height="100vh",t.maxWidth=k.max_width?k.max_width+"px":"",t.padding=k.margin_top+"rem "+k.margin_right+"rem "+k.margin_bottom+"rem "+k.margin_left+"rem",t.borderTop=k.border.enabled?k.border.top.width+"px "+k.border.top.style+" "+k.border.top.color:"",t.borderRight=k.border.enabled?k.border.right.width+"px "+k.border.right.style+" "+k.border.right.color:"",t.borderBottom=k.border.enabled?k.border.bottom.width+"px "+k.border.bottom.style+" "+k.border.bottom.color:"",t.borderLeft=k.border.enabled?k.border.left.width+"px "+k.border.left.style+" "+k.border.left.color:"";var e=C.primary.outer.style,n=C.legend.outer.style,i=parseFloat(e.order)>parseFloat(n.order)?"above":"below";_[k.layout_order].forEach(function(t,e){C[t].outer.style.order=10*e}),e.flex="1 1 auto",e.height=null,B(i),n.textAlign=k.header_align,C.controls.outer.style.textAlign=k.header_align,C.primary.inner.style.height="100%";var r=("custom"==k.space_between_sections?k.space_between_sections_custom:k.space_between_sections)/2+"rem";A.map(function(t){var e=C[t],n=e.outer.style;return{name:t,height:S(e.inner),order:parseFloat(n.order),style:n}}).sort(function(t,e){return t.order-e.order}).filter(function(t){if(t.height)return!0;t.style.paddingBottom="",t.style.paddingTop=""}).forEach(function(t,e,n){t.style.paddingTop=e?r:"",t.style.paddingBottom=e<n.length-1?r:""})}var w=Object.freeze({body_font:{name:"Source Sans Pro",url:"https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700"},border:{enabled:!1,top:{width:1,color:"#dddddd",style:"solid"},right:{width:1,color:"#dddddd",style:"solid"},bottom:{width:1,color:"#dddddd",style:"solid"},left:{width:1,color:"#dddddd",style:"solid"}},layout_order:"stack-default",margin_top:.75,margin_right:.75,margin_bottom:.75,margin_left:.75,space_between_sections:0,space_between_sections_custom:1,background_color_enabled:!0,background_color:"#ffffff",background_image_enabled:!1,background_image_src:"",background_image_size:"cover",background_image_position:"center center",max_width:null,breakpoint_mobile_small:0,breakpoint_mobile_big:380,breakpoint_tablet:580,breakpoint_desktop:1080,breakpoint_big_screen:1280,font_size_mobile_small:62.5,font_size_mobile_big:75,font_size_tablet:87.5,font_size_desktop:100,font_size_big_screen:120,header_align:"left",header_border:"none",header_border_width:1,header_border_color:"#dddddd",header_border_style:"solid",header_logo_enabled:!1,header_logo_align:"inside",header_logo_src:"",header_logo_height:3,header_logo_position_inside:"left",header_logo_position_outside:"left",header_logo_margin_top:.25,header_logo_margin_right:.5,header_logo_margin_bottom:0,header_logo_margin_left:0,title:"",title_size:1.6,title_size_custom:1.6,title_line_height:1.2,title_color:"#333333",title_weight:"bold",title_space_above:0,title_space_above_custom:1.5,subtitle:"",subtitle_size:1.6,subtitle_size_custom:1.6,subtitle_line_height:1.2,subtitle_color:"#666666",subtitle_weight:"normal",subtitle_space_above:0,subtitle_space_above_custom:1.5,text:"",text_size:1.2,text_size_custom:1.2,text_line_height:1.2,text_color:"#666666",text_weight:"normal",text_space_above:.5,text_space_above_custom:1.5,source_label:"Source: ",source_name:"",source_url:"",source_name_2:"",source_url_2:"",source_name_3:"",source_url_3:"",footer_note:"",footer_text_size:1,footer_text_color:"#aaaaaa",footer_align:"justify",footer_align_vertical:"center",footer_border:"none",footer_border_width:1,footer_border_color:"#dddddd",footer_border_style:"solid",footer_logo_enabled:!1,footer_logo_src:"",footer_logo_link_url:"",footer_logo_height:1.5,footer_logo_margin:.25,footer_logo_order:"right"});var k,M,E="Your web browser does not support the features used by this content. Consider updating to a modern browser.",A=["header","controls","legend","primary","footer"],C={};function e(t){return t.getBoundingClientRect().width}function S(t){return t.getBoundingClientRect().height}function T(){return C.wrapper}function L(t){return-1!==A.indexOf(t)?C[t].inner:null}function I(t){return C[t]||void 0===t?e("wrapper"==t||void 0===t?C.wrapper:C[t].outer):null}function N(t){return C[t]||void 0===t?"wrapper"==t||void 0===t?e(C.wrapper)-H("horizontal")-q("horizontal"):e(C[t].inner):null}function O(t){return C[t]||void 0===t?S("wrapper"==t||void 0===t?C.wrapper:C[t].outer):null}function P(t){return C[t]||void 0===t?"wrapper"==t||void 0===t?S(C.wrapper)-H("vertical")-q("vertical"):S(C[t].inner):null}function F(){return S(C.primary.outer)-D(C.primary.outer)}function z(){return e(C.primary.inner)}function D(t){return(parseFloat(getComputedStyle(t).paddingTop)||0)+(parseFloat(getComputedStyle(t).paddingBottom)||0)}function R(){return function(){if(Flourish.fixed_height)return window.innerHeight;var t=window.innerWidth;return 999<t?650:599<t?575:400}()-H("vertical")-q("vertical")-["header","controls","legend","footer"].reduce(function(t,e){return t+O(e)},0)-D(C.primary.outer)}function H(t){var e;return"left"==t?e=k.margin_left:"right"==t?e=k.margin_right:"top"==t?e=k.margin_top:"bottom"==t?e=k.margin_bottom:"horizontal"==t?e=k.margin_left+k.margin_right:"vertical"==t&&(e=k.margin_top+k.margin_bottom),V(e)}function q(t){return k.border.enabled?"vertical"==t?k.border.top.width+k.border.bottom.width:"horizontal"==t?k.border.left.width+k.border.right.width:null:0}function j(t){if(!Flourish.fixed_height&&void 0!==Flourish.fixed_height){var e=null===t,n=C.primary,i=e?R():t;i+D(C.primary.outer)!==parseFloat(n.outer.style.height)&&(C.wrapper.style.height="",n.outer.style.flex="",n.inner.style.height=i+"px",Flourish.setHeight(e?null:O()))}}function B(t){var e=parseFloat(C.primary.outer.style.order);C.legend.outer.style.order=e+1*("below"===t.trim().toLowerCase()?1:-1)}function U(t){var e=M.querySelector(".fl-layout-overlay-message");if(t){M.style.display="block";var n="string"==typeof t?t:E;e.innerHTML=n}else e.textContent="",M.style.display="none"}function V(t){return t*parseFloat(getComputedStyle(document.documentElement).fontSize)}function Y(){return M}function W(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[1<i.length?i[0]+i.slice(2):i,+t.slice(n+1)]}function G(t){return(t=W(Math.abs(t)))?t[1]:NaN}var X,Z=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function $(t){return new K(t)}function K(t){if(!(e=Z.exec(t)))throw new Error("invalid format: "+t);var e;this.fill=e[1]||" ",this.align=e[2]||">",this.sign=e[3]||"-",this.symbol=e[4]||"",this.zero=!!e[5],this.width=e[6]&&+e[6],this.comma=!!e[7],this.precision=e[8]&&+e[8].slice(1),this.trim=!!e[9],this.type=e[10]||""}function Q(t,e){var n=W(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}$.prototype=K.prototype,K.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var J={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Q(100*t,e)},r:Q,s:function(t,e){var n=W(t,e);if(!n)return t+"";var i=n[0],r=n[1],a=r-(X=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,o=i.length;return a===o?i:o<a?i+new Array(a-o+1).join("0"):0<a?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+W(t,Math.max(0,e+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function tt(t){return t}var et,nt,it,rt=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function at(t){var e,s,l,w=t.grouping&&t.thousands?(s=t.grouping,l=t.thousands,function(t,e){for(var n=t.length,i=[],r=0,a=s[0],o=0;0<n&&0<a&&(e<o+a+1&&(a=Math.max(1,e-o)),i.push(t.substring(n-=a,n+a)),!((o+=a+1)>e));)a=s[r=(r+1)%s.length];return i.reverse().join(l)}):tt,i=t.currency,k=t.decimal,M=t.numerals?(e=t.numerals,function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}):tt,r=t.percent||"%";function o(t){var u=(t=$(t)).fill,c=t.align,h=t.sign,e=t.symbol,f=t.zero,d=t.width,_=t.comma,p=t.precision,g=t.trim,m=t.type;"n"===m?(_=!0,m="g"):J[m]||(null==p&&(p=12),g=!0,m="g"),(f||"0"===u&&"="===c)&&(f=!0,u="0",c="=");var v="$"===e?i[0]:"#"===e&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",y="$"===e?i[1]:/[%p]/.test(m)?r:"",x=J[m],b=/[defgprs%]/.test(m);function n(t){var e,n,i,r=v,a=y;if("c"===m)a=x(t)+a,t="";else{var o=(t=+t)<0;if(t=x(Math.abs(t),p),g&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(0<r){if(!+t[i])break t;r=0}}return 0<r?t.slice(0,r)+t.slice(e+1):t}(t)),o&&0==+t&&(o=!1),r=(o?"("===h?h:"-":"-"===h||"("===h?"":h)+r,a=("s"===m?rt[8+X/3]:"")+a+(o&&"("===h?")":""),b)for(e=-1,n=t.length;++e<n;)if((i=t.charCodeAt(e))<48||57<i){a=(46===i?k+t.slice(e+1):t.slice(e))+a,t=t.slice(0,e);break}}_&&!f&&(t=w(t,1/0));var s=r.length+t.length+a.length,l=s<d?new Array(d-s+1).join(u):"";switch(_&&f&&(t=w(l+t,l.length?d-a.length:1/0),l=""),c){case"<":t=r+t+a+l;break;case"=":t=r+l+t+a;break;case"^":t=l.slice(0,s=l.length>>1)+r+t+a+l.slice(s);break;default:t=l+r+t+a}return M(t)}return p=null==p?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),n.toString=function(){return t+""},n}return{format:o,formatPrefix:function(t,e){var n=o(((t=$(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(G(e)/3))),r=Math.pow(10,-i),a=rt[8+i/3];return function(t){return n(r*t)+a}}}}et=at({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),nt=et.format,it=et.formatPrefix;var ot=Object.freeze({input_decimal_separator:".",output_separators:",."});var st=Object.freeze({transform_labels:!1,transform:"multiply",multiply_divide_constant:1,exponentiate_constant:0,multiplier:1,prefix:"",n_dec:2,suffix:"",strip_zeros:!0,strip_separator:!0});function lt(r,t){var e,n,a=0<=r.n_dec?Math.floor(r.n_dec):Math.ceil(r.n_dec),o=t(",."+(0<a?a:"0")+"f"),i=t.decimal,s=t.thousands,l=r.strip_zeros&&0<a?new RegExp("\\"+i+"?0+$"):null,u=r.strip_separator&&s,c=(n=1,(e=r).transform_labels&&(n="multiply"===e.transform?e.multiply_divide_constant:"divide"===e.transform?1/e.multiply_divide_constant:Math.pow(10,e.exponentiate_constant)),function(t){return t*n});return a<0?function(t){var e=function(t,e){if(!e)return Math.round(t);e=0<e?Math.floor(e):Math.ceil(e);var n=Math.pow(10,e);return Math.round(t*n)/n}(c(t),a),n=u&&1e3<=e&&e<1e4,i=o(e);return n&&(i=i.replace(s,"")),r.prefix+i+r.suffix}:function(t){var e=c(t),n=u&&s&&1e3<=e&&e<1e4,i=o(e);return l&&(i=i.replace(l,"")),n&&(i=i.replace(s,"")),r.prefix+i+r.suffix}}var ut=new Date,ct=new Date;function ht(a,o,n,i){function s(t){return a(t=new Date(+t)),t}return(s.floor=s).ceil=function(t){return a(t=new Date(t-1)),o(t,1),a(t),t},s.round=function(t){var e=s(t),n=s.ceil(t);return t-e<n-t?e:n},s.offset=function(t,e){return o(t=new Date(+t),null==e?1:Math.floor(e)),t},s.range=function(t,e,n){var i,r=[];if(t=s.ceil(t),n=null==n?1:Math.floor(n),!(t<e&&0<n))return r;for(;r.push(i=new Date(+t)),o(t,n),a(t),i<t&&t<e;);return r},s.filter=function(n){return ht(function(t){if(t<=t)for(;a(t),!n(t);)t.setTime(t-1)},function(t,e){if(t<=t)if(e<0)for(;++e<=0;)for(;o(t,-1),!n(t););else for(;0<=--e;)for(;o(t,1),!n(t););})},n&&(s.count=function(t,e){return ut.setTime(+t),ct.setTime(+e),a(ut),a(ct),Math.floor(n(ut,ct))},s.every=function(e){return e=Math.floor(e),isFinite(e)&&0<e?1<e?s.filter(i?function(t){return i(t)%e==0}:function(t){return s.count(0,t)%e==0}):s:null}),s}var ft=ht(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});ft.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?ht(function(t){t.setTime(Math.floor(t/n)*n)},function(t,e){t.setTime(+t+e*n)},function(t,e){return(e-t)/n}):ft:null};ft.range;var dt=ht(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),_t=(dt.range,ht(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())},function(t,e){t.setTime(+t+6e4*e)},function(t,e){return(e-t)/6e4},function(t){return t.getMinutes()})),pt=(_t.range,ht(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()})),gt=(pt.range,ht(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5},function(t){return t.getDate()-1}));gt.range;function mt(e){return ht(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5})}var vt=mt(0),yt=mt(1),xt=(mt(2),mt(3),mt(4)),bt=(mt(5),mt(6),vt.range,yt.range,xt.range,ht(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()})),wt=(bt.range,ht(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}));wt.every=function(n){return isFinite(n=Math.floor(n))&&0<n?ht(function(t){t.setFullYear(Math.floor(t.getFullYear()/n)*n),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e*n)}):null};wt.range,ht(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+6e4*e)},function(t,e){return(e-t)/6e4},function(t){return t.getUTCMinutes()}).range,ht(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()}).range;var kt=ht(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1});kt.range;function Mt(e){return ht(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/6048e5})}var Et=Mt(0),At=Mt(1),Ct=(Mt(2),Mt(3),Mt(4)),St=(Mt(5),Mt(6),Et.range,At.range,Ct.range,ht(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}).range,ht(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));St.every=function(n){return isFinite(n=Math.floor(n))&&0<n?ht(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e*n)}):null};St.range;function Tt(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Lt(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function It(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}var Nt,Ot,Pt,Ft,zt,Dt={"-":"",_:" ",0:"0"},Rt=/^\s*\d+/,Ht=/^%/,qt=/[\\^$*+?|[\]().{}]/g;function jt(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(e)+r:r)}function Bt(t){return t.replace(qt,"\\$&")}function Ut(t){return new RegExp("^(?:"+t.map(Bt).join("|")+")","i")}function Vt(t){for(var e={},n=-1,i=t.length;++n<i;)e[t[n].toLowerCase()]=n;return e}function Yt(t,e,n){var i=Rt.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Wt(t,e,n){var i=Rt.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function Gt(t,e,n){var i=Rt.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function Xt(t,e,n){var i=Rt.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function Zt(t,e,n){var i=Rt.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function $t(t,e,n){var i=Rt.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Kt(t,e,n){var i=Rt.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(68<+i[0]?1900:2e3),n+i[0].length):-1}function Qt(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Jt(t,e,n){var i=Rt.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function te(t,e,n){var i=Rt.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function ee(t,e,n){var i=Rt.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function ne(t,e,n){var i=Rt.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function ie(t,e,n){var i=Rt.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function re(t,e,n){var i=Rt.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function ae(t,e,n){var i=Rt.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function oe(t,e,n){var i=Rt.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function se(t,e,n){var i=Ht.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function le(t,e,n){var i=Rt.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function ue(t,e,n){var i=Rt.exec(e.slice(n));return i?(t.Q=1e3*+i[0],n+i[0].length):-1}function ce(t,e){return jt(t.getDate(),e,2)}function he(t,e){return jt(t.getHours(),e,2)}function fe(t,e){return jt(t.getHours()%12||12,e,2)}function de(t,e){return jt(1+gt.count(wt(t),t),e,3)}function _e(t,e){return jt(t.getMilliseconds(),e,3)}function pe(t,e){return _e(t,e)+"000"}function ge(t,e){return jt(t.getMonth()+1,e,2)}function me(t,e){return jt(t.getMinutes(),e,2)}function ve(t,e){return jt(t.getSeconds(),e,2)}function ye(t){var e=t.getDay();return 0===e?7:e}function xe(t,e){return jt(vt.count(wt(t),t),e,2)}function be(t,e){var n=t.getDay();return t=4<=n||0===n?xt(t):xt.ceil(t),jt(xt.count(wt(t),t)+(4===wt(t).getDay()),e,2)}function we(t){return t.getDay()}function ke(t,e){return jt(yt.count(wt(t),t),e,2)}function Me(t,e){return jt(t.getFullYear()%100,e,2)}function Ee(t,e){return jt(t.getFullYear()%1e4,e,4)}function Ae(t){var e=t.getTimezoneOffset();return(0<e?"-":(e*=-1,"+"))+jt(e/60|0,"0",2)+jt(e%60,"0",2)}function Ce(t,e){return jt(t.getUTCDate(),e,2)}function Se(t,e){return jt(t.getUTCHours(),e,2)}function Te(t,e){return jt(t.getUTCHours()%12||12,e,2)}function Le(t,e){return jt(1+kt.count(St(t),t),e,3)}function Ie(t,e){return jt(t.getUTCMilliseconds(),e,3)}function Ne(t,e){return Ie(t,e)+"000"}function Oe(t,e){return jt(t.getUTCMonth()+1,e,2)}function Pe(t,e){return jt(t.getUTCMinutes(),e,2)}function Fe(t,e){return jt(t.getUTCSeconds(),e,2)}function ze(t){var e=t.getUTCDay();return 0===e?7:e}function De(t,e){return jt(Et.count(St(t),t),e,2)}function Re(t,e){var n=t.getUTCDay();return t=4<=n||0===n?Ct(t):Ct.ceil(t),jt(Ct.count(St(t),t)+(4===St(t).getUTCDay()),e,2)}function He(t){return t.getUTCDay()}function qe(t,e){return jt(At.count(St(t),t),e,2)}function je(t,e){return jt(t.getUTCFullYear()%100,e,2)}function Be(t,e){return jt(t.getUTCFullYear()%1e4,e,4)}function Ue(){return"+0000"}function Ve(){return"%"}function Ye(t){return+t}function We(t){return Math.floor(+t/1e3)}Nt=function(t){var i=t.dateTime,r=t.date,a=t.time,e=t.periods,n=t.days,o=t.shortDays,s=t.months,l=t.shortMonths,u=Ut(e),c=Vt(e),h=Ut(n),f=Vt(n),d=Ut(o),_=Vt(o),p=Ut(s),g=Vt(s),m=Ut(l),v=Vt(l),y={a:function(t){return o[t.getDay()]},A:function(t){return n[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:ce,e:ce,f:pe,H:he,I:fe,j:de,L:_e,m:ge,M:me,p:function(t){return e[+(12<=t.getHours())]},Q:Ye,s:We,S:ve,u:ye,U:xe,V:be,w:we,W:ke,x:null,X:null,y:Me,Y:Ee,Z:Ae,"%":Ve},x={a:function(t){return o[t.getUTCDay()]},A:function(t){return n[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Ce,e:Ce,f:Ne,H:Se,I:Te,j:Le,L:Ie,m:Oe,M:Pe,p:function(t){return e[+(12<=t.getUTCHours())]},Q:Ye,s:We,S:Fe,u:ze,U:De,V:Re,w:He,W:qe,x:null,X:null,y:je,Y:Be,Z:Ue,"%":Ve},b={a:function(t,e,n){var i=d.exec(e.slice(n));return i?(t.w=_[i[0].toLowerCase()],n+i[0].length):-1},A:function(t,e,n){var i=h.exec(e.slice(n));return i?(t.w=f[i[0].toLowerCase()],n+i[0].length):-1},b:function(t,e,n){var i=m.exec(e.slice(n));return i?(t.m=v[i[0].toLowerCase()],n+i[0].length):-1},B:function(t,e,n){var i=p.exec(e.slice(n));return i?(t.m=g[i[0].toLowerCase()],n+i[0].length):-1},c:function(t,e,n){return M(t,i,e,n)},d:te,e:te,f:oe,H:ne,I:ne,j:ee,L:ae,m:Jt,M:ie,p:function(t,e,n){var i=u.exec(e.slice(n));return i?(t.p=c[i[0].toLowerCase()],n+i[0].length):-1},Q:le,s:ue,S:re,u:Wt,U:Gt,V:Xt,w:Yt,W:Zt,x:function(t,e,n){return M(t,r,e,n)},X:function(t,e,n){return M(t,a,e,n)},y:Kt,Y:$t,Z:Qt,"%":se};function w(l,u){return function(t){var e,n,i,r=[],a=-1,o=0,s=l.length;for(t instanceof Date||(t=new Date(+t));++a<s;)37===l.charCodeAt(a)&&(r.push(l.slice(o,a)),null!=(n=Dt[e=l.charAt(++a)])?e=l.charAt(++a):n="e"===e?" ":"0",(i=u[e])&&(e=i(t,n)),r.push(e),o=a+1);return r.push(l.slice(o,a)),r.join("")}}function k(r,a){return function(t){var e,n,i=It(1900);if(M(i,r,t+="",0)!=t.length)return null;if("Q"in i)return new Date(i.Q);if("p"in i&&(i.H=i.H%12+12*i.p),"V"in i){if(i.V<1||53<i.V)return null;"w"in i||(i.w=1),"Z"in i?(e=4<(n=(e=Lt(It(i.y))).getUTCDay())||0===n?At.ceil(e):At(e),e=kt.offset(e,7*(i.V-1)),i.y=e.getUTCFullYear(),i.m=e.getUTCMonth(),i.d=e.getUTCDate()+(i.w+6)%7):(e=4<(n=(e=a(It(i.y))).getDay())||0===n?yt.ceil(e):yt(e),e=gt.offset(e,7*(i.V-1)),i.y=e.getFullYear(),i.m=e.getMonth(),i.d=e.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),n="Z"in i?Lt(It(i.y)).getUTCDay():a(It(i.y)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(n+5)%7:i.w+7*i.U-(n+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,Lt(i)):a(i)}}function M(t,e,n,i){for(var r,a,o=0,s=e.length,l=n.length;o<s;){if(l<=i)return-1;if(37===(r=e.charCodeAt(o++))){if(r=e.charAt(o++),!(a=b[r in Dt?e.charAt(o++):r])||(i=a(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return y.x=w(r,y),y.X=w(a,y),y.c=w(i,y),x.x=w(r,x),x.X=w(a,x),x.c=w(i,x),{format:function(t){var e=w(t+="",y);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",Tt);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",x);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t,Lt);return e.toString=function(){return t},e}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Ot=Nt.format,Pt=Nt.parse,Ft=Nt.utcFormat,zt=Nt.utcParse;var Ge="%Y-%m-%dT%H:%M:%S.%LZ";Date.prototype.toISOString||Ft(Ge);+new Date("2000-01-01T00:00:00.000Z")||zt(Ge);function Xe(t,e){var n,i=Pt(t),r=Ot(t);return n="function"==typeof e?function(t){return null!==i(t)&&e(t)}:function(t){return null!==i(t)},Object.freeze({test:n,parse:function(t){return i(t)},type:"datetime",description:t,stringToString:function(t){return r(i(t))},datetimeToString:function(t){return r(t)}})}var Ze=Object.freeze([Xe("%Y-%m-%dT%H:%M:%S.%LZ"),Xe("%Y-%m-%d"),Xe("%m/%d/%Y",function(t){var e=t.split("/").map(parseFloat);return 0<e[0]&&e[0]<=12&&0<e[1]&&e[1]<=31&&!isNaN(e[2])}),Xe("%d/%m/%Y",function(t){var e=t.split("/").map(parseFloat);return 0<e[0]&&e[0]<=31&&0<e[1]&&e[1]<=12&&!isNaN(e[2])}),Xe("%d-%b-%y"),Xe("%m/%y"),Xe("%m/%Y"),Xe("%b %Y"),Xe("%B %d"),Xe("%d %b"),Xe("%Y",function(t){var e=parseFloat(t);return 1499<e&&e<2200}),Xe("%B"),Xe("%b"),Xe("%X"),Xe("%I:%M %p"),Xe("%I%p"),Xe("%H:%M")]),$e={test:function(t){return/^(\+|-)?\d{1,3}(,\d{3})*(\.\d+)?((e|E)(\+|-)?\d+)?$/.test(t)},parse:function(t){return parseFloat(t.replace(/,/g,""))},description:"Comma thousand separator, point decimal mark",thousand_separator:",",decimal_mark:"."},Ke={test:function(t){return/^(\+|-)?\d{1,3}(\s\d{3})*(\.\d+)?((e|E)(\+|-)?\d+)?$/.test(t)},parse:function(t){return parseFloat(t.replace(/\s/g,""))},description:"Space thousand separator, point decimal mark",thousand_separator:" ",decimal_mark:"."},Qe={test:function(t){return/^(\+|-)?\d+(\.\d+)?((e|E)(\+|-)?\d+)?$/.test(t)},parse:function(t){return parseFloat(t)},description:"No thousand separator, point decimal mark",thousand_separator:"",decimal_mark:"."},Je={test:function(t){return/^(\+|-)?\d{1,3}(\.\d{3})*(,\d+)?((e|E)(\+|-)?\d+)?$/.test(t)},parse:function(t){return parseFloat(t.replace(/\./g,"").replace(/,/,"."))},description:"Point thousand separator, comma decimal mark",thousand_separator:".",decimal_mark:","},tn={test:function(t){return/^(\+|-)?\d{1,3}(\s\d{3})*(,\d+)?((e|E)(\+|-)?\d+)?$/.test(t)},parse:function(t){return parseFloat(t.replace(/\s/g,"").replace(/,/,"."))},description:"Space thousand separator, comma decimal mark",thousand_separator:" ",decimal_mark:","},en={test:function(t){return/^(\+|-)?\d+(,\d+)?((e|E)(\+|-)?\d+)?$/.test(t)},parse:function(t){return parseFloat(t.replace(/,/,"."))},description:"No thousand separator, comma decimal mark",thousand_separator:"",decimal_mark:","},nn={test:function(t){return Qe.test(t)||$e.test(t)},parse:$e.parse,description:"Optional comma separator, point decimal mark",thousand_separator:",",decimal_mark:"."},rn={test:function(t){return en.test(t)||Je.test(t)},parse:Je.parse,description:"Optional point thousand separator, comma decimal mark",thousand_separator:".",decimal_mark:","},an={test:function(t){return en.test(t)||tn.test(t)},parse:tn.parse,description:"Optional space thousand separator, comma decimal mark",thousand_separator:" ",decimal_mark:","},on={test:function(t){return Qe.test(t)||Ke.test(t)},parse:Ke.parse,description:"Optional comma separator, point decimal mark",thousand_separator:",",decimal_mark:"."},sn=[$e,Je,tn,Qe,en,nn,rn,an,on];sn.forEach(function(t){t.type="number",Object.freeze(t)}),Object.freeze(sn);var ln=Object.freeze([Object.freeze({test:function(){return!0},parse:function(t){return t},type:"string",stringToString:function(t){return t},description:"Arbitrary string"})]),un=/^(\+|-)?\d+(\.\d+)?((e|E)(\+|-)?\d+)?$/,cn=/^(\+|-)?\d+(,\d+)?((e|E)(\+|-)?\d+)?$/,hn=[{test:function(t){return un.test(t)&&Math.abs(parseFloat(t))<=90},parse:function(t){return parseFloat(t)},description:"Latitude with point decimal mark",thousand_separator:"",decimal_mark:"."},{test:function(t){return cn.test(t)&&Math.abs(parseFloat(t.replace(/,/,".")))<=90},parse:function(t){return parseFloat(t.replace(/,/,"."))},description:"Latitude with comma decimal mark",thousand_separator:"",decimal_mark:","},{test:function(t){return un.test(t)&&Math.abs(parseFloat(t))<=180},parse:function(t){return parseFloat(t)},description:"Longitude with point decimal mark",thousand_separator:"",decimal_mark:"."},{test:function(t){return cn.test(t)&&Math.abs(parseFloat(t.replace(/,/,".")))<=180},parse:function(t){return parseFloat(t.replace(/,/,"."))},description:"Longitude with comma decimal mark",thousand_separator:"",decimal_mark:","}];function fn(e){return function(t){return t.test(e)}}var dn,_n={height_mode:"auto",facet_layout:"single",facet_aspect:66,facet_by_series:null,facet_min_w:100,facet_fixed_cols:!1,facet_cols:2,facet_gutter_w:1,facet_gutter_h:3,facet_header_color_mode:"auto",facet_header_color:"#333333",facet_header_font_size:1.25,facet_header_padding:.25,facet_header_bg:"none",facet_header_bg_mode:"fixed",facet_header_bg_color:"#eeeeee",facet_title_align:"auto",chart_type:"line",secondary_series:1,series_filter_enabled:!1,series_filter:[],series_filter_text:"Enter series to show",series_filter_none_text:"No more series to show",series_filter_hidden:!1,max_series:50,show_popups:!0,popup_font_size:12,highlighted:null,current_series:0,color_mode:"column",color:{},bg_color_style:"none",bg_color:"#f7f7f7",legend_position:"above",legend_text_color:"#333333",legend_swatch_radius:3,legend_swatch_height:.85,legend_swatch_width:1.5,legend_text_size:1,legend_stack:!1,text_legend:"off",text_legend_title:!0,text_legend_subtitle:!0,text_legend_bold:!0,labels:!1,labels_styles_auto:!0,labels_responsive:!0,labels_font_size_min:9,labels_font_size_max:16,labels_font_size:12,labels_bg_mode:"auto",labels_bg_size:15,labels_color_mode:"auto",labels_fixed_color:"#333333",labels_show_value:"auto",labels_show_label:"auto",labels_dot_center:!1,label_bar_align:"right",line_width:2,line_opacity:1,line_curve:"curveMonotoneX",line_end_labels:!1,line_end_labels_width:50,area_opacity:.7,donut_inner_radius:50,donut_pad_angle:.5,donut_corner_radius:0,donut_auto_scale:!0,column_opacity:.9,column_padding_inner:10,column_padding_outer:10,column_padding_in_group:0,dot_radius:3,dot_radius_last:null,dot_opacity:1,data_trans_duration:800,data_trans_delay:0,data_trans_stagger:0,data_trans_bind_series:!0,data_trans_bind_data_points:!0,animate_on_load:!0,margin_top:10,margin_right:10,margin_bottom:10,margin_left:10,label_data_type:"auto",x_axis_date_format:"auto",x_axis_tick_style:"ticks",x_axis_last_row_only:!0,x_axis_matching:!0,x_axis_tick_h:35,x_axis_label:"",x_axis_label_font_size:12,x_axis_min:null,x_axis_max:null,x_axis_tick_mode:"auto",x_axis_tick_count:5,x_axis_tick_custom:"",x_axis_ticks_inline:!1,x_axis_tick_angle:"45",x_axis_tick_font_size:12,x_axis_color:"#999999",x_axis_tick_color:"#eeeeee",x_axis_tick_dashed:0,y_axis_tick_style:"gridlines",y_axis_first_col_only:!0,y_axis_matching:!0,y_axis_tick_w:35,y_axis_log:!1,y_axis_label:"",y_axis_label_font_size:12,y_axis_min:null,y_axis_max:null,y_axis_tick_mode:"auto",y_axis_tick_count:5,y_axis_tick_custom:"",y_axis_tick_font_size:12,y_axis_ticks_inline:!1,y_axis_color:"#999999",y_axis_tick_color:"#eeeeee",y_axis_tick_dashed:0,y_axis_bar_label_position:"above",y_secondary_axis_tick_style:"gridlines",y_secondary_axis_last_col_only:!0,y_secondary_axis_matching:!0,y_secondary_axis_tick_w:35,y_secondary_axis_log:!1,y_secondary_axis_label:"",y_secondary_axis_label_font_size:12,y_secondary_axis_min:null,y_secondary_axis_max:null,y_secondary_axis_tick_mode:"auto",y_secondary_axis_tick_count:5,y_secondary_axis_tick_custom:"",y_secondary_axis_tick_font_size:12,y_secondary_axis_ticks_inline:!1,y_secondary_axis_color:"#999999",y_secondary_axis_tick_color:"#eeeeee",y_secondary_axis_tick_dashed:0,anno_x_enabled:!1,anno_x_lines:"",anno_x_line_color:"#333333",anno_x_line_width:2,anno_x_line_dash:"2",anno_x_areas:"",anno_x_fill_color:"#555555",anno_x_fill_opacity:.1,anno_x_label_align:"right",anno_x_label_color:"#888888",anno_x_stack:"below",anno_y_enabled:!1,anno_y_lines:"",anno_y_line_color:"#333333",anno_y_line_width:2,anno_y_line_dash:"2",anno_y_areas:"",anno_y_fill_color:"#555555",anno_y_fill_opacity:.1,anno_y_label_align:"right",anno_y_label_color:"#888888",anno_y_stack:"below",layout:{},localization:{},number_format:{},datetime_input_format:"auto"},pn=function(s){for(var t in ot)void 0===s[t]&&(s[t]=ot[t]);return{getParser:function(){return e=s.input_decimal_separator,n=new RegExp("[^-0-9eE"+e+"]","g"),function(t){return"number"==typeof t?t:""===t||void 0===t?NaN:parseFloat(t.replace(n,"").replace(e,"."))};var e,n},getFormatterFunction:function(){return t=s.output_separators,i=1<t.length,r=i?t.charAt(1):t.charAt(0),a=i?t.charAt(0):"",(o=at((e=r,n=a,{decimal:e,thousands:n,grouping:[3],currency:["",""]})).format).decimal=r,o.thousands=a,o;var t,e,n,i,r,a,o}}}(_n.localization),gn=function(e){for(var t in st)void 0===e[t]&&(e[t]=st[t]);return function(t){return lt(e,t)}}(_n.number_format),mn=function(t){for(var e in k=t,w)void 0===k[e]&&(k[e]=w[e]);return(a=document.createElement("style")).id="flourish-page-styles",a.type="text/css",document.head.appendChild(a),(s=document.createElement("link")).setAttribute("rel","stylesheet"),document.body.appendChild(s),C.wrapper=function(){var t=document.querySelector("#fl-layout-wrapper")||document.createElement("main");t.id="fl-layout-wrapper";var e=t.style;return e.display="flex",e.flexDirection="column",e.boxSizing="border-box",e.marginLeft="auto",e.marginRight="auto",t}(),A.forEach(function(t,e){C[t]=function(t,e){var n="fl-layout-"+t,i=document.createElement("section");i.className="fl-layout-container",i.id=n+"-container",i.style.width="100%",i.style.position="relative",i.style.order=e;var r=document.createElement("div");return r.className="fl-layout-inner",r.id=n,r.style.width="100%",r.style.overflow="hidden",r.style.position="relative",i.appendChild(r),C.wrapper.appendChild(i),{outer:i,inner:r}}(t,e)}),L("header").appendChild(function(){(n=document.createElement("header")).className="flourish-header";var t=document.createElement("hgroup");return i=document.createElement("h1"),r=document.createElement("h2"),l=document.createElement("p"),u=document.createElement("img"),n.appendChild(u),n.appendChild(t),t.appendChild(i),t.appendChild(r),n.appendChild(l),n}()),L("footer").appendChild(y()),C.primary.outer.style.overflow="hidden",C.controls.inner.style.overflow="",document.body.appendChild(C.wrapper),function(){var t=C.primary.outer;t.style.position="relative",(M=document.createElement("div")).id="fl-layout-overlay";var e=M.style;e.position="absolute",e.display="none",e.width="100%",e.height="100%",e.top=0,e.left=0,e.backgroundColor="rgb(200,200,200)",e.zIndex=999999,e.pointerEvents="none";var n=document.createElement("p");n.className="fl-layout-overlay-message",(e=n.style).color="#333333",e.fontSize="1.5rem",e.paddingLeft="15%",e.paddingRight="15%",e.width="100%",e.boxSizing="border-box",e.position="absolute",e.top="50%",e.transform="translate(0, -50%)",e.margin="0",e.textAlign="center",M.appendChild(n),t.appendChild(M)}(),b(),{update:b,getWrapper:T,getSection:L,getOuterWidth:I,getInnerWidth:N,getOuterHeight:O,getInnerHeight:P,getPrimaryHeight:F,getPrimaryWidth:z,getDefaultPrimaryHeight:R,setHeight:j,setLegendPosition:B,showOverlay:U,remToPx:V,getOverlay:Y}}(_n.layout),vn=(dn=0<dn?dn:1e3,function(t,e){if(Array.isArray(t)){if(!t.length)return ln.slice();for(var n,i,r=Math.min(dn,t.length),a=(n=t,void 0===(i=e)?function(t){return n[t]}:"function"==typeof i?function(t){return i(n[t],t)}:function(t){return n[t][""+i]}),o=Ze.concat(sn,hn),s=0;s<r&&o.length;s++){var l=a(s);l&&(o=o.filter(fn(l)))}return o.concat(ln)}}),yn={},xn="http://www.w3.org/1999/xhtml",bn={svg:"http://www.w3.org/2000/svg",xhtml:xn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function wn(t){var e=t+="",n=e.indexOf(":");return 0<=n&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),bn.hasOwnProperty(e)?{space:bn[e],local:t}:t}function kn(t){var e=wn(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===xn&&t.documentElement.namespaceURI===xn?t.createElement(n):t.createElementNS(e,n)}})(e)}function Mn(){}function En(t){return null==t?Mn:function(){return this.querySelector(t)}}function An(){return[]}function Cn(t){return null==t?An:function(){return this.querySelectorAll(t)}}function Sn(t){return function(){return this.matches(t)}}function Tn(t){return new Array(t.length)}function Ln(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Ln.prototype={constructor:Ln,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var In="$";function Nn(t,e,n,i,r,a){for(var o,s=0,l=e.length,u=a.length;s<u;++s)(o=e[s])?(o.__data__=a[s],i[s]=o):n[s]=new Ln(t,a[s]);for(;s<l;++s)(o=e[s])&&(r[s]=o)}function On(t,e,n,i,r,a,o){var s,l,u,c={},h=e.length,f=a.length,d=new Array(h);for(s=0;s<h;++s)(l=e[s])&&(d[s]=u=In+o.call(l,l.__data__,s,e),u in c?r[s]=l:c[u]=l);for(s=0;s<f;++s)(l=c[u=In+o.call(t,a[s],s,a)])?((i[s]=l).__data__=a[s],c[u]=null):n[s]=new Ln(t,a[s]);for(s=0;s<h;++s)(l=e[s])&&c[d[s]]===l&&(r[s]=l)}function Pn(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function Fn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function zn(t,e){return t.style.getPropertyValue(e)||Fn(t).getComputedStyle(t,null).getPropertyValue(e)}function Dn(t){return t.trim().split(/^|\s+/)}function Rn(t){return t.classList||new Hn(t)}function Hn(t){this._node=t,this._names=Dn(t.getAttribute("class")||"")}function qn(t,e){for(var n=Rn(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function jn(t,e){for(var n=Rn(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function Bn(){this.textContent=""}function Un(){this.innerHTML=""}function Vn(){this.nextSibling&&this.parentNode.appendChild(this)}function Yn(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Wn(){return null}function Gn(){var t=this.parentNode;t&&t.removeChild(this)}function Xn(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function Zn(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}Hn.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);0<=e&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};var $n={},Kn=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||($n={mouseenter:"mouseover",mouseleave:"mouseout"}));function Qn(n,t,e){return n=Jn(n,t,e),function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}function Jn(n,i,r){return function(t){var e=Kn;Kn=t;try{n.call(this,this.__data__,i,r)}finally{Kn=e}}}function ti(a){return function(){var t=this.__on;if(t){for(var e,n=0,i=-1,r=t.length;n<r;++n)e=t[n],a.type&&e.type!==a.type||e.name!==a.name?t[++i]=e:this.removeEventListener(e.type,e.listener,e.capture);++i?t.length=i:delete this.__on}}}function ei(l,u,c){var h=$n.hasOwnProperty(l.type)?Qn:Jn;return function(t,e,n){var i,r=this.__on,a=h(u,e,n);if(r)for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===l.type&&i.name===l.name)return this.removeEventListener(i.type,i.listener,i.capture),this.addEventListener(i.type,i.listener=a,i.capture=c),void(i.value=u);this.addEventListener(l.type,a,c),i={type:l.type,name:l.name,value:u,listener:a,capture:c},r?r.push(i):this.__on=[i]}}function ni(t,e,n){var i=Fn(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}var ii=[null];function ri(t,e){this._groups=t,this._parents=e}function ai(){return new ri([[document.documentElement]],ii)}function oi(t){return"string"==typeof t?new ri([[document.querySelector(t)]],[document.documentElement]):new ri([[t]],ii)}ri.prototype=ai.prototype={constructor:ri,select:function(t){"function"!=typeof t&&(t=En(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a,o,s=e[r],l=s.length,u=i[r]=new Array(l),c=0;c<l;++c)(a=s[c])&&(o=t.call(a,a.__data__,c,s))&&("__data__"in a&&(o.__data__=a.__data__),u[c]=o);return new ri(i,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=Cn(t));for(var e=this._groups,n=e.length,i=[],r=[],a=0;a<n;++a)for(var o,s=e[a],l=s.length,u=0;u<l;++u)(o=s[u])&&(i.push(t.call(o,o.__data__,u,s)),r.push(o));return new ri(i,r)},filter:function(t){"function"!=typeof t&&(t=Sn(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a,o=e[r],s=o.length,l=i[r]=[],u=0;u<s;++u)(a=o[u])&&t.call(a,a.__data__,u,o)&&l.push(a);return new ri(i,this._parents)},data:function(t,e){if(!t)return _=new Array(this.size()),c=-1,this.each(function(t){_[++c]=t}),_;var n,i=e?On:Nn,r=this._parents,a=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=a.length,s=new Array(o),l=new Array(o),u=new Array(o),c=0;c<o;++c){var h=r[c],f=a[c],d=f.length,_=t.call(h,h&&h.__data__,c,r),p=_.length,g=l[c]=new Array(p),m=s[c]=new Array(p);i(h,f,g,m,u[c]=new Array(d),_,e);for(var v,y,x=0,b=0;x<p;++x)if(v=g[x]){for(b<=x&&(b=x+1);!(y=m[b])&&++b<p;);v._next=y||null}}return(s=new ri(s,r))._enter=l,s._exit=u,s},enter:function(){return new ri(this._enter||this._groups.map(Tn),this._parents)},exit:function(){return new ri(this._exit||this._groups.map(Tn),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,a=this.exit();return i="function"==typeof t?t(i):i.append(t+""),null!=e&&(r=e(r)),null==n?a.remove():n(a),i&&r?i.merge(r).order():r},merge:function(t){for(var e=this._groups,n=t._groups,i=e.length,r=n.length,a=Math.min(i,r),o=new Array(i),s=0;s<a;++s)for(var l,u=e[s],c=n[s],h=u.length,f=o[s]=new Array(h),d=0;d<h;++d)(l=u[d]||c[d])&&(f[d]=l);for(;s<i;++s)o[s]=e[s];return new ri(o,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],a=r.length-1,o=r[a];0<=--a;)(i=r[a])&&(o&&4^i.compareDocumentPosition(o)&&o.parentNode.insertBefore(i,o),o=i);return this},sort:function(n){function t(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}n||(n=Pn);for(var e=this._groups,i=e.length,r=new Array(i),a=0;a<i;++a){for(var o,s=e[a],l=s.length,u=r[a]=new Array(l),c=0;c<l;++c)(o=s[c])&&(u[c]=o);u.sort(t)}return new ri(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,a=i.length;r<a;++r){var o=i[r];if(o)return o}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,a=e[n],o=0,s=a.length;o<s;++o)(r=a[o])&&t.call(r,r.__data__,o,a);return this},attr:function(t,e){var n=wn(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}:function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return 1<arguments.length?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(e,n,i){return function(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,i)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):zn(this.node(),t)},property:function(t,e){return 1<arguments.length?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(e,n){return function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=Dn(t+"");if(arguments.length<2){for(var i=Rn(this.node()),r=-1,a=n.length;++r<a;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?qn:jn)(this,t)}}:e?function(t){return function(){qn(this,t)}}:function(t){return function(){jn(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?Bn:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Un:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(Vn)},lower:function(){return this.each(Yn)},append:function(t){var e="function"==typeof t?t:kn(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:kn(t),i=null==e?Wn:"function"==typeof e?e:En(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function(){return this.each(Gn)},clone:function(t){return this.select(t?Zn:Xn)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,a=(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return 0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}),o=a.length;if(!(arguments.length<2)){for(s=e?ei:ti,null==n&&(n=!1),i=0;i<o;++i)this.each(s(a[i],e,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(i=0,l=s[u];i<o;++i)if((r=a[i]).type===l.type&&r.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return ni(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return ni(this,t,e)}})(t,e))}};var si=25,li={};function ui(t,e,n,i,r,a,o){var s=n-t/2-10,l=n+t/2+10,u=t/2+Math.min(0,s-r.left)+Math.max(0,l-r.right);return{pos:[u,o],shape:u-10<5?[-u,-15*a,Math.max(10,5-u),-10*a]:t-5<u+10?[Math.min(-10,t-u-5),-10*a,Math.min(10,t-u),-15*a]:[-10,-10*a,10,-10*a]}}function ci(t,e,n,i,r,a,o){var s=i-e/2-10,l=i+e/2+10,u=e/2+Math.min(0,s-r.top)+Math.max(0,l-r.bottom);return{pos:[o,u],shape:u-10<5?[-15*a,-u,-10*a,Math.max(10,5-u)]:e-5<u+10?[-10*a,Math.min(-10,e-u-5),-15*a,Math.min(10,e-u)]:[-10*a,-10,-10*a,10]}}function hi(t,e,n){var i,r=document.createElementNS("http://www.w3.org/2000/svg",t);if(e)for(i in e)r.setAttribute(i,e[i]);var a=r.style;if(n)for(i in n)a[i]=n[i];return r}li.bottom=function(t,e){return{shape:[-10,-10,10,-10],pos:[t/2,e+10]}},li.top=function(t,e){return{shape:[-10,10,10,10],pos:[t/2,-10]}},li.left=function(t,e){return{shape:[10,10,10,-10],pos:[-10,e/2]}},li.right=function(t,e){return{shape:[-10,10,-10,-10],pos:[t+10,e/2]}},li.topLeft=function(t,e){return{shape:[15,10,10,15],pos:[-10,-10]}},li.bottomLeft=function(t,e){return{shape:[15,-10,10,-15],pos:[-10,e+10]}},li.topRight=function(t,e){return{shape:[-15,10,-10,15],pos:[t+10,-10]}},li.bottomRight=function(t,e){return{shape:[-15,-10,-10,-15],pos:[t+10,e+10]}},li.bottomFlexible=function(t,e,n,i,r){return ui(t,0,n,0,r,1,e+10)},li.topFlexible=function(t,e,n,i,r){return ui(t,0,n,0,r,-1,-10)},li.rightFlexible=function(t,e,n,i,r){return ci(0,e,0,i,r,1,t+10)},li.leftFlexible=function(t,e,n,i,r){return ci(0,e,0,i,r,-1,-10)};var fi=1,di={container:document.body,maxWidth:"70%",point:null,html:null,directions:["bottom","top","left","right","topLeft","bottomLeft","topRight","bottomRight","bottomFlexible","topFlexible","leftFlexible","rightFlexible"],fallbackFit:"horizontal"};function _i(){for(var t in this.unique_id=fi++,di)this["_"+t]=di[t];this.handlers={click:[]}}function pi(e){_i.prototype[e]=function(t){return void 0===t?this["_"+e]:(this["_"+e]=t,this)}}for(var gi in di)pi(gi);function mi(){return new _i}_i.prototype.point=function(t,e){if(void 0===t)return this._point;if(void 0!==e)this._point=[t,e];else if(t instanceof HTMLElement||t instanceof SVGElement){var n=t.getBoundingClientRect();this._point=[Math.floor(n.left+n.width/2),Math.floor(n.top+n.height/2)]}else console.error("Popup: could not understand argument");return this},_i.prototype.text=function(t){return this._html=t.replace(/[&<>]/g,function(t){return{"&":"&amp;","<":"&lt;",">":"&gt;"}[t]}),this},_i.prototype.on=function(t,e){if(!(t in this.handlers))throw new Error("Popup.on: No such event: "+t);return this.handlers[t].push(e),this},_i.prototype.fire=function(t,e){if(!(t in this.handlers))throw new Error("Popup.fire: No such event: "+t);for(var n=this.handlers[t],i=0;i<n.length;i++)n[i].call(this,e);return this},_i.prototype._getElement=function(){var e=this,t="flourish-popup-"+e.unique_id,n=document.getElementById(t);if(!n){(n=document.createElement("div")).className="flourish-popup",n.id=t;var i=n.style;i.display="none",i.margin=i.padding=0,i.position="absolute",i.width="80px",i.height="40px",i.boxSizing="border-box",n.addEventListener("click",function(t){e.fire("click",t)},!1);var r=hi("svg",{class:"flourish-popup-svg"},{position:"absolute",top:0,left:0,bottom:0,right:0}),a=hi("filter",{id:"dropshadow-"+e.unique_id,height:"130%"});a.appendChild(hi("feGaussianBlur",{in:"SourceAlpha",stdDeviation:5})),a.appendChild(hi("feOffset",{dx:0,dy:2,result:"offsetblur"}));var o=hi("feComponentTransfer");o.appendChild(hi("feFuncA",{type:"linear",slope:.2})),a.appendChild(o);var s=hi("feMerge");a.appendChild(s),s.appendChild(hi("feMergeNode")),s.appendChild(hi("feMergeNode",{in:"SourceGraphic"})),r.appendChild(a);var l=hi("g",{filter:"url(#dropshadow-"+e.unique_id+")",fill:"white",stroke:"none"});l.appendChild(hi("rect",{x:si,y:si,rx:5})),l.appendChild(hi("path")),r.appendChild(l),n.appendChild(r);var u=document.createElement("div");u.className="flourish-popup-content",(i=u.style).position="absolute",i.top=i.left=si+"px",i.padding="10px",n.appendChild(u),e._getConstrainer().appendChild(n)}return e._resizeConstrainer(),n},_i.prototype._getConstrainer=function(){var t=document.getElementById("flourish-popup-constrainer");if(t)return t;(t=document.createElement("div")).id="flourish-popup-constrainer";var e=t.style;return e.overflow="hidden",e.pointerEvents="none",e.position="absolute",e.left="0",e.top="0",e.margin="0",e.padding="0",document.body.appendChild(t),this._resizeConstrainer(t),t},_i.prototype._resizeConstrainer=function(t){var e=t||this._getConstrainer(),n=e.style;document.body.removeChild(e),document.body.getBoundingClientRect(),n.width=document.documentElement.scrollWidth+"px",n.height=document.documentElement.scrollHeight+"px",document.body.appendChild(e)},_i.prototype.draw=function(){var t=this;if(t._point){var e=document.documentElement.getBoundingClientRect(),n=t._point[0],i=t._point[1],r=t._container.getBoundingClientRect();n<r.left?n=r.left:n>r.right&&(n=r.right),i<r.top?i=r.top:i>r.bottom&&(i=r.bottom);var a,o=n-e.left,s=i-e.top,l=t._getElement(),u=l.style,c=l.querySelector(".flourish-popup-svg"),h=c.querySelector("g"),f=h.querySelector("rect"),d=h.querySelector("path"),_=l.querySelector(".flourish-popup-content");u.display="block",_.style.maxWidth=(a=r,(t._maxWidth.match(/^\d+(?:\.\d+)?%$/)?a.width*parseFloat(t._maxWidth)/100:t._maxWidth.match(/^\d+(?:\.\d+)?(?:px)?$/)?parseFloat(t._maxWidth):(null!=t._maxWidth&&console.error("Popup: Unknown value for maxWidth: "+t._maxWidth),a.width))+"px"),_.innerHTML=t._html;for(var p,g,m=_.getBoundingClientRect();p=Math.ceil(m.width),g=Math.ceil(m.height),u.width=p+2*si+"px",u.height=g+2*si+"px",m=_.getBoundingClientRect(),p!=Math.ceil(m.width)||g!=Math.ceil(m.height););f.setAttribute("width",p),f.setAttribute("height",g),c.setAttribute("width",p+2*si),c.setAttribute("height",g+2*si);for(var v,y,x,b,w,k,M,E,A,C,S,T,L,I,N,O,P,F,z,D,R=si-10,H=null,q=null,j=null,B=1/0,U=1/0,V=0;V<t._directions.length;V++){var Y=t._directions[V],W=(x=p,b=g,w=n,k=i,M=r,E=li[Y](x,b,w,k,M),A=w-si-E.pos[0],C=k-si-E.pos[1],{left:A,top:C,right:A+x+2*si,bottom:C+b+2*si}),G=Math.max(0,Math.floor(r.left)-W.left-R)+Math.max(0,W.right-Math.ceil(r.right)-R),X=Math.max(0,Math.floor(r.top)-W.top-R)+Math.max(0,W.bottom-Math.ceil(r.bottom)-R);if(0==G&&0==X){H=Y;break}(G<B||G==B&&X<v)&&(B=G,v=X,q=Y),(X<U||X==U&&G<y)&&(U=X,y=G,j=Y)}return Y=H||("horizontal"==t._fallbackFit?q:"vertical"==t._fallbackFit?j:(console.warn("Popup: failed to point box of size ("+p+", "+g+") at ("+n+", "+i+") within ("+r.left+", "+r.top+", "+r.right+", "+r.bottom+")"),t._directions[0])),S=u,T=d,L=p,I=g,N=o,O=s,P=n,F=i,z=r,D=li[Y](L,I,P,F,z),S.left=N-si-D.pos[0]+"px",S.top=O-si-D.pos[1]+"px",T.setAttribute("d","M0,0L"+D.shape.join(",")+"Z"),T.setAttribute("transform","translate("+(D.pos[0]+si)+","+(D.pos[1]+si)+")"),t}console.error("Popup: cannot draw popup till point() has been specified")},_i.prototype.hide=function(){return this._getElement().style.display="none",this};var vi,yi={line:{mode:"line",stack:!(mi.version="1.2.0"),has_axes:!0},area:{mode:"line",stack:!1,has_axes:!0,area:!0},area_stacked:{mode:"line",stack:!0,has_axes:!0,area:!0},area_prop:{mode:"line",stack:!0,proportional:!0,has_axes:!0,area:!0},donut:{mode:"donut",stack:!1,has_axes:!1,legend_type:"row",single_series:!0},bar_grouped:{mode:"bar",stack:!1,has_axes:!0,legend_type:"either",values_on_x:!0},bar_stacked:{mode:"bar",stack:!0,has_axes:!0,legend_type:"either",values_on_x:!0},bar_stacked_prop:{mode:"bar",stack:!0,legend_type:"either",proportional:!0,has_axes:!0,values_on_x:!0},column_grouped:{mode:"column",stack:!1,legend_type:"either",has_axes:!0},column_stacked:{mode:"column",stack:!0,legend_type:"either",has_axes:!0},column_stacked_prop:{mode:"column",stack:!0,legend_type:"either",proportional:!0,has_axes:!0},column_grouped_line:{mode:"column",stack:!1,legend_type:"either",has_axes:!0,has_secondary_value_axis:!0},column_stacked_line:{mode:"column",stack:!0,legend_type:"either",has_axes:!0,has_secondary_value_axis:!0},column_stacked_prop_line:{mode:"column",stack:!0,legend_type:"either",proportional:!0,has_axes:!0,has_secondary_value_axis:!0}},xi={};"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var bi,wi,ki,Mi,Ei,Ai,Ci,Si,Ti=(function(t,e){t.exports=function(n){function i(t){if(r[t])return r[t].exports;var e=r[t]={exports:{},id:t,loaded:!1};return n[t].call(e.exports,e,e.exports,i),e.loaded=!0,e.exports}var r={};return i.m=n,i.c=r,i.p="/assets/scripts/dist/",i(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),a=n(2),u=i(a),o=n(3),s=i(o),l=n(4),c=i(l),_=n(31),y=n(32);n(33);var h=function(){function l(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"[data-choice]",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(0,y.isType)("String",t)){var n=document.querySelectorAll(t);if(1<n.length)for(var i=1;i<n.length;i++){var r=n[i];new l(r,e)}}var a={silent:!1,items:[],choices:[],renderChoiceLimit:-1,maxItemCount:-1,addItems:!0,removeItems:!0,removeItemButton:!1,editItems:!1,duplicateItems:!0,delimiter:",",paste:!0,searchEnabled:!0,searchChoices:!0,searchFloor:1,searchResultLimit:4,searchFields:["label","value"],position:"auto",resetScrollPosition:!0,regexFilter:null,shouldSort:!0,shouldSortItems:!1,sortFilter:y.sortByAlpha,placeholder:!0,placeholderValue:null,searchPlaceholderValue:null,prependValue:null,appendValue:null,renderSelectedChoices:"auto",loadingText:"Loading...",noResultsText:"No results found",noChoicesText:"No choices to choose from",itemSelectText:"Press to select",addItemText:function(t){return'Press Enter to add <b>"'+(0,y.stripHTML)(t)+'"</b>'},maxItemText:function(t){return"Only "+t+" values can be added."},itemComparer:function(t,e){return t===e},uniqueItemText:"Only unique values can be added.",classNames:{containerOuter:"choices",containerInner:"choices__inner",input:"choices__input",inputCloned:"choices__input--cloned",list:"choices__list",listItems:"choices__list--multiple",listSingle:"choices__list--single",listDropdown:"choices__list--dropdown",item:"choices__item",itemSelectable:"choices__item--selectable",itemDisabled:"choices__item--disabled",itemChoice:"choices__item--choice",placeholder:"choices__placeholder",group:"choices__group",groupHeading:"choices__heading",button:"choices__button",activeState:"is-active",focusState:"is-focused",openState:"is-open",disabledState:"is-disabled",highlightedState:"is-highlighted",hiddenState:"is-hidden",flippedState:"is-flipped",loadingState:"is-loading",noResults:"has-no-results",noChoices:"has-no-choices"},fuseOptions:{include:"score"},callbackOnInit:null,callbackOnCreateTemplates:null};if(this.idNames={itemChoice:"item-choice"},this.config=(0,y.extend)(a,e),"auto"!==this.config.renderSelectedChoices&&"always"!==this.config.renderSelectedChoices&&(this.config.silent||console.warn("renderSelectedChoices: Possible values are 'auto' and 'always'. Falling back to 'auto'."),this.config.renderSelectedChoices="auto"),this.store=new c.default(this.render),this.initialised=!1,this.currentState={},this.prevState={},this.currentValue="",this.element=t,this.passedElement=(0,y.isType)("String",t)?document.querySelector(t):t,this.passedElement){this.isTextElement="text"===this.passedElement.type,this.isSelectOneElement="select-one"===this.passedElement.type,this.isSelectMultipleElement="select-multiple"===this.passedElement.type,this.isSelectElement=this.isSelectOneElement||this.isSelectMultipleElement,this.isValidElementType=this.isTextElement||this.isSelectElement,this.isIe11=!(!navigator.userAgent.match(/Trident/)||!navigator.userAgent.match(/rv[ :]11/)),!(this.isScrollingOnIe=!1)===this.config.shouldSortItems&&this.isSelectOneElement&&(this.config.silent||console.warn("shouldSortElements: Type of passed element is 'select-one', falling back to false.")),this.highlightPosition=0,this.canSearch=this.config.searchEnabled,this.placeholder=!1,this.isSelectOneElement||(this.placeholder=!!this.config.placeholder&&(this.config.placeholderValue||this.passedElement.getAttribute("placeholder"))),this.presetChoices=this.config.choices,this.presetItems=this.config.items,this.passedElement.value&&(this.presetItems=this.presetItems.concat(this.passedElement.value.split(this.config.delimiter))),this.baseId=(0,y.generateId)(this.passedElement,"choices-"),this.render=this.render.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this),this._onKeyUp=this._onKeyUp.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onClick=this._onClick.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseOver=this._onMouseOver.bind(this),this._onPaste=this._onPaste.bind(this),this._onInput=this._onInput.bind(this),this.wasTap=!0;var o="classList"in document.documentElement;o||this.config.silent||console.error("Choices: Your browser doesn't support Choices");var s=(0,y.isElement)(this.passedElement)&&this.isValidElementType;if(s){if("active"===this.passedElement.getAttribute("data-choice"))return;this.init()}else this.config.silent||console.error("Incompatible input passed")}else this.config.silent||console.error("Passed element not found")}return r(l,[{key:"init",value:function(){if(!0!==this.initialised){var t=this.config.callbackOnInit;this.initialised=!0,this._createTemplates(),this._createInput(),this.store.subscribe(this.render),this.render(),this._addEventListeners(),t&&(0,y.isType)("Function",t)&&t.call(this)}}},{key:"destroy",value:function(){if(!1!==this.initialised){this._removeEventListeners(),this.passedElement.classList.remove(this.config.classNames.input,this.config.classNames.hiddenState),this.passedElement.removeAttribute("tabindex");var t=this.passedElement.getAttribute("data-choice-orig-style");Boolean(t)?(this.passedElement.removeAttribute("data-choice-orig-style"),this.passedElement.setAttribute("style",t)):this.passedElement.removeAttribute("style"),this.passedElement.removeAttribute("aria-hidden"),this.passedElement.removeAttribute("data-choice"),this.passedElement.value=this.passedElement.value,this.containerOuter.parentNode.insertBefore(this.passedElement,this.containerOuter),this.containerOuter.parentNode.removeChild(this.containerOuter),this.clearStore(),this.config.templates=null,this.initialised=!1}}},{key:"renderGroups",value:function(t,i,e){var r=this,a=e||document.createDocumentFragment(),n=this.config.sortFilter;return this.config.shouldSort&&t.sort(n),t.forEach(function(e){var t=i.filter(function(t){return r.isSelectOneElement?t.groupId===e.id:t.groupId===e.id&&!t.selected});if(1<=t.length){var n=r._getTemplate("choiceGroup",e);a.appendChild(n),r.renderChoices(t,a,!0)}}),a}},{key:"renderChoices",value:function(t,e){var i=this,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=e||document.createDocumentFragment(),a=this.config,o=a.renderSelectedChoices,s=a.searchResultLimit,l=a.renderChoiceLimit,u=this.isSearching?y.sortByScore:this.config.sortFilter,c=function(t){var e="auto"!==o||i.isSelectOneElement||!t.selected;if(e){var n=i._getTemplate("choice",t);r.appendChild(n)}},h=t;"auto"!==o||this.isSelectOneElement||(h=t.filter(function(t){return!t.selected}));var f=h.reduce(function(t,e){return e.placeholder?t.placeholderChoices.push(e):t.normalChoices.push(e),t},{placeholderChoices:[],normalChoices:[]}),d=f.placeholderChoices,_=f.normalChoices;(this.config.shouldSort||this.isSearching)&&_.sort(u);var p=h.length,g=[].concat(v(d),v(_));this.isSearching?p=s:0<l&&!n&&(p=l);for(var m=0;m<p;m++)g[m]&&c(g[m]);return r}},{key:"renderItems",value:function(t){var n=this,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,i=e||document.createDocumentFragment();if(this.config.shouldSortItems&&!this.isSelectOneElement&&t.sort(this.config.sortFilter),this.isTextElement){var r=this.store.getItemsReducedToValues(t),a=r.join(this.config.delimiter);this.passedElement.setAttribute("value",a),this.passedElement.value=a}else{var o=document.createDocumentFragment();t.forEach(function(t){var e=n._getTemplate("option",t);o.appendChild(e)}),this.passedElement.innerHTML="",this.passedElement.appendChild(o)}return t.forEach(function(t){var e=n._getTemplate("item",t);i.appendChild(e)}),i}},{key:"render",value:function(){if(!this.store.isLoading()&&(this.currentState=this.store.getState(),this.currentState!==this.prevState)){if((this.currentState.choices!==this.prevState.choices||this.currentState.groups!==this.prevState.groups||this.currentState.items!==this.prevState.items)&&this.isSelectElement){var t=this.store.getGroupsFilteredByActive(),e=this.store.getChoicesFilteredByActive(),n=document.createDocumentFragment();this.choiceList.innerHTML="",this.config.resetScrollPosition&&(this.choiceList.scrollTop=0),1<=t.length&&!0!==this.isSearching?n=this.renderGroups(t,e,n):1<=e.length&&(n=this.renderChoices(e,n));var i=this.store.getItemsFilteredByActive(),r=this._canAddItem(i,this.input.value);if(n.childNodes&&0<n.childNodes.length)r.response?(this.choiceList.appendChild(n),this._highlightChoice()):this.choiceList.appendChild(this._getTemplate("notice",r.notice));else{var a=void 0,o=void 0;a=this.isSearching?(o=(0,y.isType)("Function",this.config.noResultsText)?this.config.noResultsText():this.config.noResultsText,this._getTemplate("notice",o,"no-results")):(o=(0,y.isType)("Function",this.config.noChoicesText)?this.config.noChoicesText():this.config.noChoicesText,this._getTemplate("notice",o,"no-choices")),this.choiceList.appendChild(a)}}if(this.currentState.items!==this.prevState.items){var s=this.store.getItemsFilteredByActive();if(this.itemList.innerHTML="",s&&s){var l=this.renderItems(s);l.childNodes&&this.itemList.appendChild(l)}}this.prevState=this.currentState}}},{key:"highlightItem",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(!t)return this;var n=t.id,i=t.groupId,r=0<=i?this.store.getGroupById(i):null;return this.store.dispatch((0,_.highlightItem)(n,!0)),e&&(r&&r.value?(0,y.triggerEvent)(this.passedElement,"highlightItem",{id:n,value:t.value,label:t.label,groupValue:r.value}):(0,y.triggerEvent)(this.passedElement,"highlightItem",{id:n,value:t.value,label:t.label})),this}},{key:"unhighlightItem",value:function(t){if(!t)return this;var e=t.id,n=t.groupId,i=0<=n?this.store.getGroupById(n):null;return this.store.dispatch((0,_.highlightItem)(e,!1)),i&&i.value?(0,y.triggerEvent)(this.passedElement,"unhighlightItem",{id:e,value:t.value,label:t.label,groupValue:i.value}):(0,y.triggerEvent)(this.passedElement,"unhighlightItem",{id:e,value:t.value,label:t.label}),this}},{key:"highlightAll",value:function(){var e=this,t=this.store.getItems();return t.forEach(function(t){e.highlightItem(t)}),this}},{key:"unhighlightAll",value:function(){var e=this,t=this.store.getItems();return t.forEach(function(t){e.unhighlightItem(t)}),this}},{key:"removeItemsByValue",value:function(e){var n=this;if(!e||!(0,y.isType)("String",e))return this;var t=this.store.getItemsFilteredByActive();return t.forEach(function(t){t.value===e&&n._removeItem(t)}),this}},{key:"removeActiveItems",value:function(e){var n=this,t=this.store.getItemsFilteredByActive();return t.forEach(function(t){t.active&&e!==t.id&&n._removeItem(t)}),this}},{key:"removeHighlightedItems",value:function(){var e=this,n=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.store.getItemsFilteredByActive();return t.forEach(function(t){t.highlighted&&t.active&&(e._removeItem(t),n&&e._triggerChange(t.value))}),this}},{key:"showDropdown",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=document.body,n=document.documentElement,i=Math.max(e.scrollHeight,e.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight);this.containerOuter.classList.add(this.config.classNames.openState),this.containerOuter.setAttribute("aria-expanded","true"),this.dropdown.classList.add(this.config.classNames.activeState),this.dropdown.setAttribute("aria-expanded","true");var r=this.dropdown.getBoundingClientRect(),a=Math.ceil(r.top+window.scrollY+this.dropdown.offsetHeight),o=!1;return"auto"===this.config.position?o=i<=a:"top"===this.config.position&&(o=!0),o&&this.containerOuter.classList.add(this.config.classNames.flippedState),t&&this.canSearch&&document.activeElement!==this.input&&this.input.focus(),(0,y.triggerEvent)(this.passedElement,"showDropdown",{}),this}},{key:"hideDropdown",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=this.containerOuter.classList.contains(this.config.classNames.flippedState);return this.containerOuter.classList.remove(this.config.classNames.openState),this.containerOuter.setAttribute("aria-expanded","false"),this.dropdown.classList.remove(this.config.classNames.activeState),this.dropdown.setAttribute("aria-expanded","false"),e&&this.containerOuter.classList.remove(this.config.classNames.flippedState),t&&this.canSearch&&document.activeElement===this.input&&this.input.blur(),(0,y.triggerEvent)(this.passedElement,"hideDropdown",{}),this}},{key:"toggleDropdown",value:function(){var t=this.dropdown.classList.contains(this.config.classNames.activeState);return t?this.hideDropdown():this.showDropdown(!0),this}},{key:"getValue",value:function(){var e=this,n=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.store.getItemsFilteredByActive(),i=[];return t.forEach(function(t){e.isTextElement?i.push(n?t.value:t):t.active&&i.push(n?t.value:t)}),this.isSelectOneElement?i[0]:i}},{key:"setValue",value:function(t){var n=this;if(!0===this.initialised){var e=[].concat(v(t)),i=function(t){var e=(0,y.getType)(t);if("Object"===e){if(!t.value)return;n.isTextElement?n._addItem(t.value,t.label,t.id,void 0,t.customProperties,t.placeholder):n._addChoice(t.value,t.label,!0,!1,-1,t.customProperties,t.placeholder)}else"String"===e&&(n.isTextElement?n._addItem(t):n._addChoice(t,t,!0,!1,-1,null))};1<e.length?e.forEach(function(t){i(t)}):i(e[0])}return this}},{key:"setValueByChoice",value:function(t){var n=this;if(!this.isTextElement){var i=this.store.getChoices(),e=(0,y.isType)("Array",t)?t:[t];e.forEach(function(e){var t=i.find(function(t){return n.config.itemComparer(t.value,e)});t?t.selected?n.config.silent||console.warn("Attempting to select choice already selected"):n._addItem(t.value,t.label,t.id,t.groupId,t.customProperties,t.placeholder,t.keyCode):n.config.silent||console.warn("Attempting to select choice that does not exist")})}return this}},{key:"setChoices",value:function(t,e,n){var i=this,r=3<arguments.length&&void 0!==arguments[3]&&arguments[3];if(!0===this.initialised&&this.isSelectElement){if(!(0,y.isType)("Array",t)||!e)return this;r&&this._clearChoices(),this._setLoading(!0),t&&t.length&&(this.containerOuter.classList.remove(this.config.classNames.loadingState),t.forEach(function(t){t.choices?i._addGroup(t,t.id||null,e,n):i._addChoice(t[e],t[n],t.selected,t.disabled,void 0,t.customProperties,t.placeholder)})),this._setLoading(!1)}return this}},{key:"clearStore",value:function(){return this.store.dispatch((0,_.clearAll)()),this}},{key:"clearInput",value:function(){return this.input.value&&(this.input.value=""),this.isSelectOneElement||this._setInputWidth(),!this.isTextElement&&this.config.searchEnabled&&(this.isSearching=!1,this.store.dispatch((0,_.activateChoices)(!0))),this}},{key:"enable",value:function(){if(this.initialised){this.passedElement.disabled=!1;var t=this.containerOuter.classList.contains(this.config.classNames.disabledState);t&&(this._addEventListeners(),this.passedElement.removeAttribute("disabled"),this.input.removeAttribute("disabled"),this.containerOuter.classList.remove(this.config.classNames.disabledState),this.containerOuter.removeAttribute("aria-disabled"),this.isSelectOneElement&&this.containerOuter.setAttribute("tabindex","0"))}return this}},{key:"disable",value:function(){if(this.initialised){this.passedElement.disabled=!0;var t=!this.containerOuter.classList.contains(this.config.classNames.disabledState);t&&(this._removeEventListeners(),this.passedElement.setAttribute("disabled",""),this.input.setAttribute("disabled",""),this.containerOuter.classList.add(this.config.classNames.disabledState),this.containerOuter.setAttribute("aria-disabled","true"),this.isSelectOneElement&&this.containerOuter.setAttribute("tabindex","-1"))}return this}},{key:"ajax",value:function(t){var e=this;return!0===this.initialised&&this.isSelectElement&&(requestAnimationFrame(function(){e._handleLoadingState(!0)}),t(this._ajaxCallback())),this}},{key:"_triggerChange",value:function(t){t&&(0,y.triggerEvent)(this.passedElement,"change",{value:t})}},{key:"_handleButtonAction",value:function(t,e){if(t&&e&&this.config.removeItems&&this.config.removeItemButton){var n=e.parentNode.getAttribute("data-id"),i=t.find(function(t){return t.id===parseInt(n,10)});this._removeItem(i),this._triggerChange(i.value),this.isSelectOneElement&&this._selectPlaceholderChoice()}}},{key:"_selectPlaceholderChoice",value:function(){var t=this.store.getPlaceholderChoice();t&&(this._addItem(t.value,t.label,t.id,t.groupId,null,t.placeholder),this._triggerChange(t.value))}},{key:"_handleItemAction",value:function(t,e){var n=this,i=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(t&&e&&this.config.removeItems&&!this.isSelectOneElement){var r=e.getAttribute("data-id");t.forEach(function(t){t.id!==parseInt(r,10)||t.highlighted?i||t.highlighted&&n.unhighlightItem(t):n.highlightItem(t)}),document.activeElement!==this.input&&this.input.focus()}}},{key:"_handleChoiceAction",value:function(t,e){if(t&&e){var n=e.getAttribute("data-id"),i=this.store.getChoiceById(n),r=t[0]&&t[0].keyCode?t[0].keyCode:null,a=this.dropdown.classList.contains(this.config.classNames.activeState);if(i.keyCode=r,(0,y.triggerEvent)(this.passedElement,"choice",{choice:i}),i&&!i.selected&&!i.disabled){var o=this._canAddItem(t,i.value);o.response&&(this._addItem(i.value,i.label,i.id,i.groupId,i.customProperties,i.placeholder,i.keyCode),this._triggerChange(i.value))}this.clearInput(),a&&this.isSelectOneElement&&(this.hideDropdown(),this.containerOuter.focus())}}},{key:"_handleBackspace",value:function(t){if(this.config.removeItems&&t){var e=t[t.length-1],n=t.some(function(t){return t.highlighted});this.config.editItems&&!n&&e?(this.input.value=e.value,this._setInputWidth(),this._removeItem(e),this._triggerChange(e.value)):(n||this.highlightItem(e,!1),this.removeHighlightedItems(!0))}}},{key:"_canAddItem",value:function(t,e){var n=!0,i=(0,y.isType)("Function",this.config.addItemText)?this.config.addItemText(e):this.config.addItemText;(this.isSelectMultipleElement||this.isTextElement)&&0<this.config.maxItemCount&&this.config.maxItemCount<=t.length&&(n=!1,i=(0,y.isType)("Function",this.config.maxItemText)?this.config.maxItemText(this.config.maxItemCount):this.config.maxItemText),this.isTextElement&&this.config.addItems&&n&&this.config.regexFilter&&(n=this._regexFilter(e));var r=!t.some(function(t){return(0,y.isType)("String",e)?t.value===e.trim():t.value===e});return r||this.config.duplicateItems||this.isSelectOneElement||!n||(n=!1,i=(0,y.isType)("Function",this.config.uniqueItemText)?this.config.uniqueItemText(e):this.config.uniqueItemText),{response:n,notice:i}}},{key:"_handleLoadingState",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],e=this.itemList.querySelector("."+this.config.classNames.placeholder);t?(this.containerOuter.classList.add(this.config.classNames.loadingState),this.containerOuter.setAttribute("aria-busy","true"),this.isSelectOneElement?e?e.innerHTML=this.config.loadingText:(e=this._getTemplate("placeholder",this.config.loadingText),this.itemList.appendChild(e)):this.input.placeholder=this.config.loadingText):(this.containerOuter.classList.remove(this.config.classNames.loadingState),this.isSelectOneElement?e.innerHTML=this.placeholder||"":this.input.placeholder=this.placeholder||"")}},{key:"_ajaxCallback",value:function(){var r=this;return function(t,n,i){if(t&&n){var e=(0,y.isType)("Object",t)?[t]:t;e&&(0,y.isType)("Array",e)&&e.length?(r._handleLoadingState(!1),r._setLoading(!0),e.forEach(function(t){if(t.choices){var e=t.id||null;r._addGroup(t,e,n,i)}else r._addChoice(t[n],t[i],t.selected,t.disabled,void 0,t.customProperties,t.placeholder)}),r._setLoading(!1),r.isSelectOneElement&&r._selectPlaceholderChoice()):r._handleLoadingState(!1),r.containerOuter.removeAttribute("aria-busy")}}}},{key:"_searchChoices",value:function(t){var e=(0,y.isType)("String",t)?t.trim():t,n=(0,y.isType)("String",this.currentValue)?this.currentValue.trim():this.currentValue;if(1<=e.length&&e!==n+" "){var i=this.store.getSearchableChoices(),r=e,a=(0,y.isType)("Array",this.config.searchFields)?this.config.searchFields:[this.config.searchFields],o=Object.assign(this.config.fuseOptions,{keys:a}),s=new u.default(i,o),l=s.search(r);return this.currentValue=e,this.highlightPosition=0,this.isSearching=!0,this.store.dispatch((0,_.filterChoices)(l)),l.length}return 0}},{key:"_handleSearch",value:function(t){if(t){var e=this.store.getChoices(),n=e.some(function(t){return!t.active});if(this.input===document.activeElement)if(t&&t.length>=this.config.searchFloor){var i=0;this.config.searchChoices&&(i=this._searchChoices(t)),(0,y.triggerEvent)(this.passedElement,"search",{value:t,resultCount:i})}else n&&(this.isSearching=!1,this.store.dispatch((0,_.activateChoices)(!0)))}}},{key:"_addEventListeners",value:function(){document.addEventListener("keyup",this._onKeyUp),document.addEventListener("keydown",this._onKeyDown),document.addEventListener("click",this._onClick),document.addEventListener("touchmove",this._onTouchMove),document.addEventListener("touchend",this._onTouchEnd),document.addEventListener("mousedown",this._onMouseDown),document.addEventListener("mouseover",this._onMouseOver),this.isSelectOneElement&&(this.containerOuter.addEventListener("focus",this._onFocus),this.containerOuter.addEventListener("blur",this._onBlur)),this.input.addEventListener("input",this._onInput),this.input.addEventListener("paste",this._onPaste),this.input.addEventListener("focus",this._onFocus),this.input.addEventListener("blur",this._onBlur)}},{key:"_removeEventListeners",value:function(){document.removeEventListener("keyup",this._onKeyUp),document.removeEventListener("keydown",this._onKeyDown),document.removeEventListener("click",this._onClick),document.removeEventListener("touchmove",this._onTouchMove),document.removeEventListener("touchend",this._onTouchEnd),document.removeEventListener("mousedown",this._onMouseDown),document.removeEventListener("mouseover",this._onMouseOver),this.isSelectOneElement&&(this.containerOuter.removeEventListener("focus",this._onFocus),this.containerOuter.removeEventListener("blur",this._onBlur)),this.input.removeEventListener("input",this._onInput),this.input.removeEventListener("paste",this._onPaste),this.input.removeEventListener("focus",this._onFocus),this.input.removeEventListener("blur",this._onBlur)}},{key:"_setInputWidth",value:function(){this.placeholder?this.input.value&&this.input.value.length>=this.placeholder.length/1.25&&(this.input.style.width=(0,y.getWidthOfInput)(this.input)):this.input.style.width=(0,y.getWidthOfInput)(this.input)}},{key:"_onKeyDown",value:function(r){var t,a=this;if(r.target===this.input||this.containerOuter.contains(r.target)){var i=r.target,o=this.store.getItemsFilteredByActive(),e=this.input===document.activeElement,s=this.dropdown.classList.contains(this.config.classNames.activeState),n=this.itemList&&this.itemList.children,l=String.fromCharCode(r.keyCode),u=r.ctrlKey||r.metaKey;this.isTextElement||!/[a-zA-Z0-9-_ ]/.test(l)||s||this.showDropdown(!0),this.canSearch=this.config.searchEnabled;var c=function(){if(s||a.isSelectOneElement){s||a.showDropdown(!0),a.canSearch=!1;var t=40===r.keyCode||34===r.keyCode?1:-1,e=r.metaKey||34===r.keyCode||33===r.keyCode,n=void 0;if(e)n=0<t?Array.from(a.dropdown.querySelectorAll("[data-choice-selectable]")).pop():a.dropdown.querySelector("[data-choice-selectable]");else{var i=a.dropdown.querySelector("."+a.config.classNames.highlightedState);n=i?(0,y.getAdjacentEl)(i,"[data-choice-selectable]",t):a.dropdown.querySelector("[data-choice-selectable]")}n&&((0,y.isScrolledIntoView)(n,a.choiceList,t)||a._scrollToChoice(n,t),a._highlightChoice(n)),r.preventDefault()}},h=function(){!e||r.target.value||a.isSelectOneElement||(a._handleBackspace(o),r.preventDefault())},f=(d(t={},65,function(){u&&n&&(a.canSearch=!1,a.config.removeItems&&!a.input.value&&a.input===document.activeElement&&a.highlightAll())}),d(t,13,function(){if(a.isTextElement&&i.value){var t=a.input.value,e=a._canAddItem(o,t);e.response&&(s&&a.hideDropdown(),a._addItem(t),a._triggerChange(t),a.clearInput())}if(i.hasAttribute("data-button")&&(a._handleButtonAction(o,i),r.preventDefault()),s){r.preventDefault();var n=a.dropdown.querySelector("."+a.config.classNames.highlightedState);n&&(o[0]&&(o[0].keyCode=13),a._handleChoiceAction(o,n))}else a.isSelectOneElement&&(s||(a.showDropdown(!0),r.preventDefault()))}),d(t,27,function(){s&&(a.toggleDropdown(),a.containerOuter.focus())}),d(t,38,c),d(t,33,c),d(t,40,c),d(t,34,c),d(t,8,h),d(t,46,h),t);f[r.keyCode]&&f[r.keyCode]()}}},{key:"_onKeyUp",value:function(t){if(t.target===this.input){var e=this.input.value,n=this.store.getItemsFilteredByActive(),i=this._canAddItem(n,e);if(this.isTextElement){var r=this.dropdown.classList.contains(this.config.classNames.activeState);if(e){if(i.notice){var a=this._getTemplate("notice",i.notice);this.dropdown.innerHTML=a.outerHTML}!0===i.response?r||this.showDropdown():!i.notice&&r&&this.hideDropdown()}else r&&this.hideDropdown()}else 46!==t.keyCode&&8!==t.keyCode||t.target.value?this.canSearch&&i.response&&this._handleSearch(this.input.value):!this.isTextElement&&this.isSearching&&(this.isSearching=!1,this.store.dispatch((0,_.activateChoices)(!0)));this.canSearch=this.config.searchEnabled}}},{key:"_onInput",value:function(){this.isSelectOneElement||this._setInputWidth()}},{key:"_onTouchMove",value:function(){!0===this.wasTap&&(this.wasTap=!1)}},{key:"_onTouchEnd",value:function(t){var e=t.target||t.touches[0].target,n=this.dropdown.classList.contains(this.config.classNames.activeState);!0===this.wasTap&&this.containerOuter.contains(e)&&(e!==this.containerOuter&&e!==this.containerInner||this.isSelectOneElement||(this.isTextElement?document.activeElement!==this.input&&this.input.focus():n||this.showDropdown(!0)),t.stopPropagation()),this.wasTap=!0}},{key:"_onMouseDown",value:function(t){var e=t.target;if(e===this.choiceList&&this.isIe11&&(this.isScrollingOnIe=!0),this.containerOuter.contains(e)&&e!==this.input){var n=void 0,i=this.store.getItemsFilteredByActive(),r=t.shiftKey;(n=(0,y.findAncestorByAttrName)(e,"data-button"))?this._handleButtonAction(i,n):(n=(0,y.findAncestorByAttrName)(e,"data-item"))?this._handleItemAction(i,n,r):(n=(0,y.findAncestorByAttrName)(e,"data-choice"))&&this._handleChoiceAction(i,n),t.preventDefault()}}},{key:"_onClick",value:function(t){var e=t.target,n=this.dropdown.classList.contains(this.config.classNames.activeState),i=this.store.getItemsFilteredByActive();if(this.containerOuter.contains(e))e.hasAttribute("data-button")&&this._handleButtonAction(i,e),n?this.isSelectOneElement&&e!==this.input&&!this.dropdown.contains(e)&&this.hideDropdown(!0):this.isTextElement?document.activeElement!==this.input&&this.input.focus():this.canSearch?this.showDropdown(!0):(this.showDropdown(),this.containerOuter.focus());else{var r=i.some(function(t){return t.highlighted});r&&this.unhighlightAll(),this.containerOuter.classList.remove(this.config.classNames.focusState),n&&this.hideDropdown()}}},{key:"_onMouseOver",value:function(t){(t.target===this.dropdown||this.dropdown.contains(t.target))&&t.target.hasAttribute("data-choice")&&this._highlightChoice(t.target)}},{key:"_onPaste",value:function(t){t.target!==this.input||this.config.paste||t.preventDefault()}},{key:"_onFocus",value:function(t){var e=this,n=t.target;if(this.containerOuter.contains(n)){var i=this.dropdown.classList.contains(this.config.classNames.activeState),r={text:function(){n===e.input&&e.containerOuter.classList.add(e.config.classNames.focusState)},"select-one":function(){e.containerOuter.classList.add(e.config.classNames.focusState),n===e.input&&(i||e.showDropdown())},"select-multiple":function(){n===e.input&&(e.containerOuter.classList.add(e.config.classNames.focusState),i||e.showDropdown(!0))}};r[this.passedElement.type]()}}},{key:"_onBlur",value:function(t){var e=this,n=t.target;if(this.containerOuter.contains(n)&&!this.isScrollingOnIe){var i=this.store.getItemsFilteredByActive(),r=this.dropdown.classList.contains(this.config.classNames.activeState),a=i.some(function(t){return t.highlighted}),o={text:function(){n===e.input&&(e.containerOuter.classList.remove(e.config.classNames.focusState),a&&e.unhighlightAll(),r&&e.hideDropdown())},"select-one":function(){e.containerOuter.classList.remove(e.config.classNames.focusState),n===e.containerOuter&&r&&!e.canSearch&&e.hideDropdown(),n===e.input&&r&&e.hideDropdown()},"select-multiple":function(){n===e.input&&(e.containerOuter.classList.remove(e.config.classNames.focusState),r&&e.hideDropdown(),a&&e.unhighlightAll())}};o[this.passedElement.type]()}else this.isScrollingOnIe=!1,this.input.focus()}},{key:"_regexFilter",value:function(t){if(!t)return!1;var e=this.config.regexFilter,n=new RegExp(e.source,"i");return n.test(t)}},{key:"_scrollToChoice",value:function(t,a){var o=this;if(t){var e=this.choiceList.offsetHeight,n=t.offsetHeight,i=t.offsetTop+n,r=this.choiceList.scrollTop+e,s=0<a?this.choiceList.scrollTop+i-r:t.offsetTop;requestAnimationFrame(function(t){!function e(){var t=o.choiceList.scrollTop,n=!1,i=void 0,r=void 0;0<a?(r=1<(i=(s-t)/4)?i:1,o.choiceList.scrollTop=t+r,t<s&&(n=!0)):(r=1<(i=(t-s)/4)?i:1,o.choiceList.scrollTop=t-r,s<t&&(n=!0)),n&&requestAnimationFrame(function(t){e()})}()})}}},{key:"_highlightChoice",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,n=Array.from(this.dropdown.querySelectorAll("[data-choice-selectable]")),i=t;if(n&&n.length){var r=Array.from(this.dropdown.querySelectorAll("."+this.config.classNames.highlightedState));r.forEach(function(t){t.classList.remove(e.config.classNames.highlightedState),t.setAttribute("aria-selected","false")}),i?this.highlightPosition=n.indexOf(i):(i=n.length>this.highlightPosition?n[this.highlightPosition]:n[n.length-1])||(i=n[0]),i.classList.add(this.config.classNames.highlightedState),i.setAttribute("aria-selected","true"),this.containerOuter.setAttribute("aria-activedescendant",i.id)}}},{key:"_addItem",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:-1,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:-1,r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,a=5<arguments.length&&void 0!==arguments[5]&&arguments[5],o=6<arguments.length&&void 0!==arguments[6]?arguments[6]:null,s=(0,y.isType)("String",t)?t.trim():t,l=o,u=this.store.getItems(),c=e||s,h=parseInt(n,10)||-1,f=0<=i?this.store.getGroupById(i):null,d=u?u.length+1:1;return this.config.prependValue&&(s=this.config.prependValue+s.toString()),this.config.appendValue&&(s+=this.config.appendValue.toString()),this.store.dispatch((0,_.addItem)(s,c,d,h,i,r,a,l)),this.isSelectOneElement&&this.removeActiveItems(d),f&&f.value?(0,y.triggerEvent)(this.passedElement,"addItem",{id:d,value:s,label:c,groupValue:f.value,keyCode:l}):(0,y.triggerEvent)(this.passedElement,"addItem",{id:d,value:s,label:c,keyCode:l}),this}},{key:"_removeItem",value:function(t){if(!t||!(0,y.isType)("Object",t))return this;var e=t.id,n=t.value,i=t.label,r=t.choiceId,a=t.groupId,o=0<=a?this.store.getGroupById(a):null;return this.store.dispatch((0,_.removeItem)(e,r)),o&&o.value?(0,y.triggerEvent)(this.passedElement,"removeItem",{id:e,value:n,label:i,groupValue:o.value}):(0,y.triggerEvent)(this.passedElement,"removeItem",{id:e,value:n,label:i}),this}},{key:"_addChoice",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=3<arguments.length&&void 0!==arguments[3]&&arguments[3],r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:-1,a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null,o=6<arguments.length&&void 0!==arguments[6]&&arguments[6],s=7<arguments.length&&void 0!==arguments[7]?arguments[7]:null;if(null!=t){var l=this.store.getChoices(),u=e||t,c=l?l.length+1:1,h=this.baseId+"-"+this.idNames.itemChoice+"-"+c;this.store.dispatch((0,_.addChoice)(t,u,c,r,i,h,a,o,s)),n&&this._addItem(t,u,c,void 0,a,o,s)}}},{key:"_clearChoices",value:function(){this.store.dispatch((0,_.clearChoices)())}},{key:"_addGroup",value:function(t,e){var n=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"value",r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"label",a=(0,y.isType)("Object",t)?t.choices:Array.from(t.getElementsByTagName("OPTION")),o=e||Math.floor((new Date).valueOf()*Math.random()),s=!!t.disabled&&t.disabled;a?(this.store.dispatch((0,_.addGroup)(t.label,o,!0,s)),a.forEach(function(t){var e=t.disabled||t.parentNode&&t.parentNode.disabled;n._addChoice(t[i],(0,y.isType)("Object",t)?t[r]:t.innerHTML,t.selected,e,o,t.customProperties,t.placeholder)})):this.store.dispatch((0,_.addGroup)(t.label,t.id,!1,t.disabled))}},{key:"_getTemplate",value:function(t){var e=arguments;if(!t)return null;for(var n=this.config.templates,i=arguments.length,r=Array(1<i?i-1:0),a=1;a<i;a++)r[a-1]=e[a];return n[t].apply(n,r)}},{key:"_createTemplates",value:function(){var r=this,a=this.config.classNames,t={containerOuter:function(t){return(0,y.strToEl)('\n          <div\n            class="'+a.containerOuter+'"\n            '+(r.isSelectElement?r.config.searchEnabled?'role="combobox" aria-autocomplete="list"':'role="listbox"':"")+'\n            data-type="'+r.passedElement.type+'"\n            '+(r.isSelectOneElement?'tabindex="0"':"")+'\n            aria-haspopup="true"\n            aria-expanded="false"\n            dir="'+t+'"\n            >\n          </div>\n        ')},containerInner:function(){return(0,y.strToEl)('\n          <div class="'+a.containerInner+'"></div>\n        ')},itemList:function(){var t,e=(0,s.default)(a.list,(d(t={},a.listSingle,r.isSelectOneElement),d(t,a.listItems,!r.isSelectOneElement),t));return(0,y.strToEl)('\n          <div class="'+e+'"></div>\n        ')},placeholder:function(t){return(0,y.strToEl)('\n          <div class="'+a.placeholder+'">\n            '+t+"\n          </div>\n        ")},item:function(t){var e,n,i=(0,s.default)(a.item,(d(e={},a.highlightedState,t.highlighted),d(e,a.itemSelectable,!t.highlighted),d(e,a.placeholder,t.placeholder),e));return r.config.removeItemButton?(i=(0,s.default)(a.item,(d(n={},a.highlightedState,t.highlighted),d(n,a.itemSelectable,!t.disabled),d(n,a.placeholder,t.placeholder),n)),(0,y.strToEl)('\n            <div\n              class="'+i+'"\n              data-item\n              data-id="'+t.id+'"\n              data-value="'+t.value+'"\n              data-deletable\n              '+(t.active?'aria-selected="true"':"")+"\n              "+(t.disabled?'aria-disabled="true"':"")+"\n              >\n              "+t.label+'\x3c!--\n           --\x3e<button\n                type="button"\n                class="'+a.button+'"\n                data-button\n                aria-label="Remove item: \''+t.value+"'\"\n                >\n                Remove item\n              </button>\n            </div>\n          ")):(0,y.strToEl)('\n          <div\n            class="'+i+'"\n            data-item\n            data-id="'+t.id+'"\n            data-value="'+t.value+'"\n            '+(t.active?'aria-selected="true"':"")+"\n            "+(t.disabled?'aria-disabled="true"':"")+"\n            >\n            "+t.label+"\n          </div>\n        ")},choiceList:function(){return(0,y.strToEl)('\n          <div\n            class="'+a.list+'"\n            dir="ltr"\n            role="listbox"\n            '+(r.isSelectOneElement?"":'aria-multiselectable="true"')+"\n            >\n          </div>\n        ")},choiceGroup:function(t){var e=(0,s.default)(a.group,d({},a.itemDisabled,t.disabled));return(0,y.strToEl)('\n          <div\n            class="'+e+'"\n            data-group\n            data-id="'+t.id+'"\n            data-value="'+t.value+'"\n            role="group"\n            '+(t.disabled?'aria-disabled="true"':"")+'\n            >\n            <div class="'+a.groupHeading+'">'+t.value+"</div>\n          </div>\n        ")},choice:function(t){var e,n=(0,s.default)(a.item,a.itemChoice,(d(e={},a.itemDisabled,t.disabled),d(e,a.itemSelectable,!t.disabled),d(e,a.placeholder,t.placeholder),e));return(0,y.strToEl)('\n          <div\n            class="'+n+'"\n            data-select-text="'+r.config.itemSelectText+'"\n            data-choice\n            data-id="'+t.id+'"\n            data-value="'+t.value+'"\n            '+(t.disabled?'data-choice-disabled aria-disabled="true"':"data-choice-selectable")+'\n            id="'+t.elementId+'"\n            '+(0<t.groupId?'role="treeitem"':'role="option"')+"\n            >\n            "+t.label+"\n          </div>\n        ")},input:function(){var t=(0,s.default)(a.input,a.inputCloned);return(0,y.strToEl)('\n          <input\n            type="text"\n            class="'+t+'"\n            autocomplete="off"\n            autocapitalize="off"\n            spellcheck="false"\n            role="textbox"\n            aria-autocomplete="list"\n            >\n        ')},dropdown:function(){var t=(0,s.default)(a.list,a.listDropdown);return(0,y.strToEl)('\n          <div\n            class="'+t+'"\n            aria-expanded="false"\n            >\n          </div>\n        ')},notice:function(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",i=(0,s.default)(a.item,a.itemChoice,(d(e={},a.noResults,"no-results"===n),d(e,a.noChoices,"no-choices"===n),e));return(0,y.strToEl)('\n          <div class="'+i+'">\n            '+t+"\n          </div>\n        ")},option:function(t){return(0,y.strToEl)('\n          <option value="'+t.value+'" selected>'+t.label+"</option>\n        ")}},e=this.config.callbackOnCreateTemplates,n={};e&&(0,y.isType)("Function",e)&&(n=e.call(this,y.strToEl)),this.config.templates=(0,y.extend)(t,n)}},{key:"_setLoading",value:function(t){this.store.dispatch((0,_.setIsLoading)(t))}},{key:"_createInput",value:function(){var i=this,t=this.passedElement.getAttribute("dir")||"ltr",e=this._getTemplate("containerOuter",t),n=this._getTemplate("containerInner"),r=this._getTemplate("itemList"),a=this._getTemplate("choiceList"),o=this._getTemplate("input"),s=this._getTemplate("dropdown");this.containerOuter=e,this.containerInner=n,this.input=o,this.choiceList=a,this.itemList=r,this.dropdown=s,this.passedElement.classList.add(this.config.classNames.input,this.config.classNames.hiddenState),this.passedElement.tabIndex="-1";var l=this.passedElement.getAttribute("style");if(Boolean(l)&&this.passedElement.setAttribute("data-choice-orig-style",l),this.passedElement.setAttribute("style","display:none;"),this.passedElement.setAttribute("aria-hidden","true"),this.passedElement.setAttribute("data-choice","active"),(0,y.wrap)(this.passedElement,n),(0,y.wrap)(n,e),this.isSelectOneElement?o.placeholder=this.config.searchPlaceholderValue||"":this.placeholder&&(o.placeholder=this.placeholder,o.style.width=(0,y.getWidthOfInput)(o)),this.config.addItems||this.disable(),e.appendChild(n),e.appendChild(s),n.appendChild(r),this.isTextElement||s.appendChild(a),this.isSelectMultipleElement||this.isTextElement?n.appendChild(o):this.canSearch&&s.insertBefore(o,s.firstChild),this.isSelectElement){var u=Array.from(this.passedElement.getElementsByTagName("OPTGROUP"));if(this.highlightPosition=0,this.isSearching=!1,this._setLoading(!0),u&&u.length)u.forEach(function(t){i._addGroup(t,t.id||null)});else{var c=Array.from(this.passedElement.options),h=this.config.sortFilter,f=this.presetChoices;c.forEach(function(t){f.push({value:t.value,label:t.innerHTML,selected:t.selected,disabled:t.disabled||t.parentNode.disabled,placeholder:t.hasAttribute("placeholder")})}),this.config.shouldSort&&f.sort(h);var d=f.some(function(t){return t.selected});f.forEach(function(t,e){if(i.isSelectOneElement){var n=d||!d&&0<e;i._addChoice(t.value,t.label,!n||t.selected,!!n&&t.disabled,void 0,t.customProperties,t.placeholder)}else i._addChoice(t.value,t.label,t.selected,t.disabled,void 0,t.customProperties,t.placeholder)})}this._setLoading(!1)}else this.isTextElement&&this.presetItems.forEach(function(t){var e=(0,y.getType)(t);if("Object"===e){if(!t.value)return;i._addItem(t.value,t.label,t.id,void 0,t.customProperties,t.placeholder)}else"String"===e&&i._addItem(t)})}}]),l}();t.exports=h},function(r,t,e){!function(t){function k(){console.log.apply(console,arguments)}function e(t,e){var n;for(n in this.list=t,this.options=e=e||{},i)i.hasOwnProperty(n)&&("boolean"==typeof i[n]?this.options[n]=n in e?e[n]:i[n]:this.options[n]=e[n]||i[n])}function M(t){return"[object Array]"===Object.prototype.toString.call(t)}function n(t,e){e=e||{},this.options=e,this.options.location=e.location||n.defaultOptions.location,this.options.distance="distance"in e?e.distance:n.defaultOptions.distance,this.options.threshold="threshold"in e?e.threshold:n.defaultOptions.threshold,this.options.maxPatternLength=e.maxPatternLength||n.defaultOptions.maxPatternLength,this.pattern=e.caseSensitive?t:t.toLowerCase(),this.patternLen=t.length,this.patternLen<=this.options.maxPatternLength&&(this.matchmask=1<<this.patternLen-1,this.patternAlphabet=this._calculatePatternAlphabet())}var i={id:null,caseSensitive:!1,include:[],shouldSort:!0,searchFn:n,sortFn:function(t,e){return t.score-e.score},getFn:function t(e,n,i){var r,a,o,s,l,u;if(n){if(-1!==(o=n.indexOf("."))?(r=n.slice(0,o),a=n.slice(o+1)):r=n,null!=(s=e[r]))if(a||"string"!=typeof s&&"number"!=typeof s)if(M(s))for(l=0,u=s.length;l<u;l++)t(s[l],a,i);else a&&t(s,a,i);else i.push(s)}else i.push(e);return i},keys:[],verbose:!1,tokenize:!1,matchAllTokens:!1,tokenSeparator:/ +/g,minMatchCharLength:1,findAllMatches:!1};e.VERSION="2.7.3",e.prototype.set=function(t){return this.list=t},e.prototype.search=function(t){this.options.verbose&&k("\nSearch term:",t,"\n"),this.pattern=t,this.results=[],this.resultMap={},this._keyMap=null,this._prepareSearchers(),this._startSearch(),this._computeScore(),this._sort();var e=this._format();return e},e.prototype._prepareSearchers=function(){var t=this.options,e=this.pattern,n=t.searchFn,i=e.split(t.tokenSeparator),r=0,a=i.length;if(this.options.tokenize)for(this.tokenSearchers=[];r<a;r++)this.tokenSearchers.push(new n(i[r],t));this.fullSeacher=new n(e,t)},e.prototype._startSearch=function(){var t,e,n,i,r=this.options,a=r.getFn,o=this.list,s=o.length,l=this.options.keys,u=l.length,c=null;if("string"==typeof o[0])for(n=0;n<s;n++)this._analyze("",o[n],n,n);else for(this._keyMap={},n=0;n<s;n++)for(c=o[n],i=0;i<u;i++){if("string"!=typeof(t=l[i])){if(e=1-t.weight||1,this._keyMap[t.name]={weight:e},t.weight<=0||1<t.weight)throw new Error("Key weight has to be > 0 and <= 1");t=t.name}else this._keyMap[t]={weight:1};this._analyze(t,a(c,t,[]),c,n)}},e.prototype._analyze=function(t,e,n,i){var r,a,o,s,l,u,c,h,f,d,_,p,g,m,v,y=this.options,x=!1;if(null!=e){a=[];var b=0;if("string"==typeof e){if(r=e.split(y.tokenSeparator),y.verbose&&k("---------\nKey:",t),this.options.tokenize){for(m=0;m<this.tokenSearchers.length;m++){for(h=this.tokenSearchers[m],y.verbose&&k("Pattern:",h.pattern),p=!(f=[]),v=0;v<r.length;v++){d=r[v],_=h.search(d);var w={};_.isMatch?(w[d]=_.score,p=x=!0,a.push(_.score)):(w[d]=1,this.options.matchAllTokens||a.push(1)),f.push(w)}p&&b++,y.verbose&&k("Token scores:",f)}for(s=a[0],u=a.length,m=1;m<u;m++)s+=a[m];s/=u,y.verbose&&k("Token score average:",s)}c=this.fullSeacher.search(e),y.verbose&&k("Full text score:",c.score),l=c.score,void 0!==s&&(l=(l+s)/2),y.verbose&&k("Score average:",l),g=!this.options.tokenize||!this.options.matchAllTokens||b>=this.tokenSearchers.length,y.verbose&&k("Check Matches",g),(x||c.isMatch)&&g&&((o=this.resultMap[i])?o.output.push({key:t,score:l,matchedIndices:c.matchedIndices}):(this.resultMap[i]={item:n,output:[{key:t,score:l,matchedIndices:c.matchedIndices}]},this.results.push(this.resultMap[i])))}else if(M(e))for(m=0;m<e.length;m++)this._analyze(t,e[m],n,i)}},e.prototype._computeScore=function(){var t,e,n,i,r,a,o,s,l,u=this._keyMap,c=this.results;for(this.options.verbose&&k("\n\nComputing score:\n"),t=0;t<c.length;t++){for(n=0,i=c[t].output,r=i.length,s=1,e=0;e<r;e++)a=i[e].score,o=u?u[i[e].key].weight:1,l=a*o,1!==o?s=Math.min(s,l):(n+=l,i[e].nScore=l);c[t].score=1===s?n/r:s,this.options.verbose&&k(c[t])}},e.prototype._sort=function(){var t=this.options;t.shouldSort&&(t.verbose&&k("\n\nSorting...."),this.results.sort(t.sortFn))},e.prototype._format=function(){var t,e,n,i,r=this.options,a=r.getFn,o=[],s=this.results,l=r.include;for(r.verbose&&k("\n\nOutput:\n\n",s),n=r.id?function(t){s[t].item=a(s[t].item,r.id,[])[0]}:function(){},i=function(t){var e,n,i,r,a,o=s[t];if(0<l.length){if(e={item:o.item},-1!==l.indexOf("matches"))for(i=o.output,e.matches=[],n=0;n<i.length;n++)r=i[n],a={indices:r.matchedIndices},r.key&&(a.key=r.key),e.matches.push(a);-1!==l.indexOf("score")&&(e.score=s[t].score)}else e=o.item;return e},t=0,e=s.length;t<e;t++)n(t),o.push(i(t));return o},n.defaultOptions={location:0,distance:100,threshold:.6,maxPatternLength:32},n.prototype._calculatePatternAlphabet=function(){var t={},e=0;for(e=0;e<this.patternLen;e++)t[this.pattern.charAt(e)]=0;for(e=0;e<this.patternLen;e++)t[this.pattern.charAt(e)]|=1<<this.pattern.length-e-1;return t},n.prototype._bitapScore=function(t,e){var n=t/this.patternLen,i=Math.abs(this.options.location-e);return this.options.distance?n+i/this.options.distance:i?1:n},n.prototype.search=function(t){var e,n,i,r,a,o,s,l,u,c,h,f,d,_,p,g,m,v,y,x,b,w,k,M=this.options;if(t=M.caseSensitive?t:t.toLowerCase(),this.pattern===t)return{isMatch:!0,score:0,matchedIndices:[[0,t.length-1]]};if(this.patternLen>M.maxPatternLength){if(v=t.match(new RegExp(this.pattern.replace(M.tokenSeparator,"|"))),y=!!v)for(b=[],e=0,w=v.length;e<w;e++)k=v[e],b.push([t.indexOf(k),k.length-1]);return{isMatch:y,score:y?.5:1,matchedIndices:b}}for(r=M.findAllMatches,a=M.location,i=t.length,o=M.threshold,s=t.indexOf(this.pattern,a),x=[],e=0;e<i;e++)x[e]=0;for(-1!=s&&(o=Math.min(this._bitapScore(0,s),o),-1!=(s=t.lastIndexOf(this.pattern,a+this.patternLen))&&(o=Math.min(this._bitapScore(0,s),o))),s=-1,g=1,m=[],c=this.patternLen+i,e=0;e<this.patternLen;e++){for(l=0,u=c;l<u;)this._bitapScore(e,a+u)<=o?l=u:c=u,u=Math.floor((c-l)/2+l);for(c=u,h=Math.max(1,a-u+1),f=r?i:Math.min(a+u,i)+this.patternLen,(d=Array(f+2))[f+1]=(1<<e)-1,n=f;h<=n;n--)if((p=this.patternAlphabet[t.charAt(n-1)])&&(x[n-1]=1),d[n]=(d[n+1]<<1|1)&p,0!==e&&(d[n]|=(_[n+1]|_[n])<<1|1|_[n+1]),d[n]&this.matchmask&&(g=this._bitapScore(e,n-1))<=o){if(o=g,s=n-1,m.push(s),s<=a)break;h=Math.max(1,2*a-s)}if(this._bitapScore(e+1,a)>o)break;_=d}return b=this._getMatchedIndices(x),{isMatch:0<=s,score:0===g?.001:g,matchedIndices:b}},n.prototype._getMatchedIndices=function(t){for(var e,n=[],i=-1,r=-1,a=0,o=t.length;a<o;a++)(e=t[a])&&-1===i?i=a:e||-1===i||((r=a-1)-i+1>=this.options.minMatchCharLength&&n.push([i,r]),i=-1);return t[a-1]&&a-1-i+1>=this.options.minMatchCharLength&&n.push([i,a-1]),n},r.exports=e}()},function(t,e,n){var i;!function(){function o(){for(var t=arguments,e=[],n=0;n<arguments.length;n++){var i=t[n];if(i){var r=typeof i;if("string"===r||"number"===r)e.push(i);else if(Array.isArray(i))e.push(o.apply(null,i));else if("object"===r)for(var a in i)s.call(i,a)&&i[a]&&e.push(a)}}return e.join(" ")}var s={}.hasOwnProperty;void 0!==t&&t.exports?t.exports=o:void 0===(i=function(){return o}.apply(e,[]))||(t.exports=i)}()},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),a=n(5),o=n(26),s=(i=o)&&i.__esModule?i:{default:i},l=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.store=(0,a.createStore)(s.default,window.devToolsExtension?window.devToolsExtension():void 0)}return r(t,[{key:"getState",value:function(){return this.store.getState()}},{key:"dispatch",value:function(t){this.store.dispatch(t)}},{key:"subscribe",value:function(t){this.store.subscribe(t)}},{key:"isLoading",value:function(){var t=this.store.getState();return t.general.loading}},{key:"getItems",value:function(){var t=this.store.getState();return t.items}},{key:"getItemsFilteredByActive",value:function(){var t=this.getItems(),e=t.filter(function(t){return!0===t.active},[]);return e}},{key:"getItemsReducedToValues",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.getItems(),e=t.reduce(function(t,e){return t.push(e.value),t},[]);return e}},{key:"getChoices",value:function(){var t=this.store.getState();return t.choices}},{key:"getChoicesFilteredByActive",value:function(){var t=this.getChoices(),e=t.filter(function(t){return!0===t.active});return e}},{key:"getChoicesFilteredBySelectable",value:function(){var t=this.getChoices(),e=t.filter(function(t){return!0!==t.disabled});return e}},{key:"getSearchableChoices",value:function(){var t=this.getChoicesFilteredBySelectable();return t.filter(function(t){return!0!==t.placeholder})}},{key:"getChoiceById",value:function(e){if(e){var t=this.getChoicesFilteredByActive(),n=t.find(function(t){return t.id===parseInt(e,10)});return n}return!1}},{key:"getGroups",value:function(){var t=this.store.getState();return t.groups}},{key:"getGroupsFilteredByActive",value:function(){var t=this.getGroups(),i=this.getChoices(),e=t.filter(function(t){var e=!0===t.active&&!1===t.disabled,n=i.some(function(t){return!0===t.active&&!1===t.disabled});return e&&n},[]);return e}},{key:"getGroupById",value:function(e){var t=this.getGroups(),n=t.find(function(t){return t.id===e});return n}},{key:"getPlaceholderChoice",value:function(){var t=this.getChoices(),e=[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(t)).reverse().find(function(t){return!0===t.placeholder});return e}}]),t}();e.default=l,t.exports=l},function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.compose=e.applyMiddleware=e.bindActionCreators=e.combineReducers=e.createStore=void 0;var r=n(6),a=i(r),o=n(21),s=i(o),l=n(23),u=i(l),c=n(24),h=i(c),f=n(25),d=i(f),_=n(22);i(_),e.createStore=a.default,e.combineReducers=s.default,e.bindActionCreators=u.default,e.applyMiddleware=h.default,e.compose=d.default},function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.ActionTypes=void 0,e.default=function t(e,n,i){function r(){_===d&&(_=d.slice())}function a(){return f}function o(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var n=!0;return r(),_.push(e),function(){if(n){n=!1,r();var t=_.indexOf(e);_.splice(t,1)}}}function s(t){if(!(0,g.default)(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(p)throw new Error("Reducers may not dispatch actions.");try{p=!0,f=h(f,t)}finally{p=!1}for(var e=d=_,n=0;n<e.length;n++){var i=e[n];i()}return t}function l(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");h=t,s({type:v.INIT})}function u(){var t,i=o;return(t={subscribe:function(t){function e(){t.next&&t.next(a())}if("object"!=typeof t)throw new TypeError("Expected the observer to be an object.");e();var n=i(e);return{unsubscribe:n}}})[m.default]=function(){return this},t}var c;if("function"==typeof n&&void 0===i&&(i=n,n=void 0),void 0!==i){if("function"!=typeof i)throw new Error("Expected the enhancer to be a function.");return i(t)(e,n)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var h=e,f=n,d=[],_=d,p=!1;return s({type:v.INIT}),(c={dispatch:s,subscribe:o,getState:a,replaceReducer:l})[m.default]=u,c};var r=n(7),g=i(r),a=n(17),m=i(a),v=e.ActionTypes={INIT:"@@redux/INIT"}},function(t,e,n){var i=n(8),r=n(14),a=n(16),o=Function.prototype,s=Object.prototype,l=o.toString,u=s.hasOwnProperty,c=l.call(Object);t.exports=function(t){if(!a(t)||"[object Object]"!=i(t))return!1;var e=r(t);if(null===e)return!0;var n=u.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==c}},function(t,e,n){var i=n(9),r=n(12),a=n(13),o=i?i.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":o&&o in Object(t)?r(t):a(t)}},function(t,e,n){var i=n(10),r=i.Symbol;t.exports=r},function(t,e,n){var i=n(11),r="object"==typeof self&&self&&self.Object===Object&&self,a=i||r||Function("return this")();t.exports=a},function(n,t){(function(t){var e="object"==typeof t&&t&&t.Object===Object&&t;n.exports=e}).call(t,function(){return this}())},function(t,e,n){var i=n(9),r=Object.prototype,a=r.hasOwnProperty,o=r.toString,s=i?i.toStringTag:void 0;t.exports=function(t){var e=a.call(t,s),n=t[s];try{var i=!(t[s]=void 0)}catch(t){}var r=o.call(t);return i&&(e?t[s]=n:delete t[s]),r}},function(t,e){var n=Object.prototype,i=n.toString;t.exports=function(t){return i.call(t)}},function(t,e,n){var i=n(15),r=i(Object.getPrototypeOf,Object);t.exports=r},function(t,e){t.exports=function(e,n){return function(t){return e(n(t))}}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){t.exports=n(18)},function(t,s,l){(function(t,e){Object.defineProperty(s,"__esModule",{value:!0});var n,i,r=l(20),a=(i=r)&&i.__esModule?i:{default:i};n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:e;var o=(0,a.default)(n);s.default=o}).call(s,function(){return this}(),l(19)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}},function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.default=function(t){for(var e=Object.keys(t),d={},n=0;n<e.length;n++){var i=e[n];"function"==typeof t[i]&&(d[i]=t[i])}var r,_=Object.keys(d),p=void 0;try{r=d,Object.keys(r).forEach(function(t){var e=r[t],n=e(void 0,{type:a.ActionTypes.INIT});if(void 0===n)throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");var i="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if(void 0===e(void 0,{type:i}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+a.ActionTypes.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}catch(t){p=t}return function(){var t,e,n,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=arguments[1];if(p)throw p;for(var a=!1,o={},s=0;s<_.length;s++){var l=_[s],u=d[l],c=i[l],h=u(c,r);if(void 0===h){var f=(t=l,n=void 0,"Given action "+((n=(e=e=r)&&e.type)&&'"'+n.toString()+'"'||"an action")+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.');throw new Error(f)}o[l]=h,a=a||h!==c}return a?o:i}};var a=n(6),r=n(7),o=(i(r),n(22));i(o)},function(t,e){e.__esModule=!0,e.default=function(t){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t);try{throw new Error(t)}catch(t){}}},function(t,e){function s(t,e){return function(){return e(t.apply(void 0,arguments))}}e.__esModule=!0,e.default=function(t,e){if("function"==typeof t)return s(t,e);if("object"!=typeof t||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":typeof t)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(t),i={},r=0;r<n.length;r++){var a=n[r],o=t[a];"function"==typeof o&&(i[a]=s(o,e))}return i}},function(t,e,n){e.__esModule=!0;var u=Object.assign||function(t){for(var e=arguments,n=1;n<arguments.length;n++){var i=e[n];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t};e.default=function(){for(var t=arguments,e=arguments.length,l=Array(e),n=0;n<e;n++)l[n]=t[n];return function(s){return function(t,e,n){var i=s(t,e,n),r=i.dispatch,a=[],o={getState:i.getState,dispatch:function(t){return r(t)}};return a=l.map(function(t){return t(o)}),r=c.default.apply(void 0,a)(i.dispatch),u({},i,{dispatch:r})}}};var i,r=n(25),c=(i=r)&&i.__esModule?i:{default:i}},function(t,e){e.__esModule=!0,e.default=function(){for(var t=arguments,e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=t[i];return 0===n.length?function(t){return t}:1===n.length?n[0]:n.reduce(function(t,e){return function(){return t(e.apply(void 0,arguments))}})}},function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),a=n(27),o=i(a),s=n(28),l=i(s),u=n(29),c=i(u),h=n(30),f=i(h),d=(0,r.combineReducers)({items:o.default,groups:l.default,choices:c.default,general:f.default});e.default=function(t,e){var n=t;return"CLEAR_ALL"===e.type&&(n=void 0),d(n,e)}},function(t,e){function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1];switch(e.type){case"ADD_ITEM":var n=[].concat(i(t),[{id:e.id,choiceId:e.choiceId,groupId:e.groupId,value:e.value,label:e.label,active:!0,highlighted:!1,customProperties:e.customProperties,placeholder:e.placeholder||!1,keyCode:null}]);return n.map(function(t){return t.highlighted&&(t.highlighted=!1),t});case"REMOVE_ITEM":return t.map(function(t){return t.id===e.id&&(t.active=!1),t});case"HIGHLIGHT_ITEM":return t.map(function(t){return t.id===e.id&&(t.highlighted=e.highlighted),t});default:return t}}},function(t,e){function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1];switch(e.type){case"ADD_GROUP":return[].concat(n(t),[{id:e.id,value:e.value,active:e.active,disabled:e.disabled}]);case"CLEAR_CHOICES":return t.groups=[];default:return t}}},function(t,e){function a(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1];switch(e.type){case"ADD_CHOICE":return[].concat(a(t),[{id:e.id,elementId:e.elementId,groupId:e.groupId,value:e.value,label:e.label||e.value,disabled:e.disabled||!1,selected:!1,active:!0,score:9999,customProperties:e.customProperties,placeholder:e.placeholder||!1,keyCode:null}]);case"ADD_ITEM":var n=t;return e.activateOptions&&(n=t.map(function(t){return t.active=e.active,t})),-1<e.choiceId&&(n=t.map(function(t){return t.id===parseInt(e.choiceId,10)&&(t.selected=!0),t})),n;case"REMOVE_ITEM":return-1<e.choiceId?t.map(function(t){return t.id===parseInt(e.choiceId,10)&&(t.selected=!1),t}):t;case"FILTER_CHOICES":var i=e.results,r=t.map(function(e){return e.active=i.some(function(t){return t.item.id===e.id&&(e.score=t.score,!0)}),e});return r;case"ACTIVATE_CHOICES":return t.map(function(t){return t.active=e.active,t});case"CLEAR_CHOICES":return t.choices=[];default:return t}}},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{loading:!1},e=arguments[1];switch(e.type){case"LOADING":return{loading:e.isLoading};default:return t}}},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.addItem=function(t,e,n,i,r,a,o,s){return{type:"ADD_ITEM",value:t,label:e,id:n,choiceId:i,groupId:r,customProperties:a,placeholder:o,keyCode:s}},e.removeItem=function(t,e){return{type:"REMOVE_ITEM",id:t,choiceId:e}},e.highlightItem=function(t,e){return{type:"HIGHLIGHT_ITEM",id:t,highlighted:e}},e.addChoice=function(t,e,n,i,r,a,o,s,l){return{type:"ADD_CHOICE",value:t,label:e,id:n,groupId:i,disabled:r,elementId:a,customProperties:o,placeholder:s,keyCode:l}},e.filterChoices=function(t){return{type:"FILTER_CHOICES",results:t}},e.activateChoices=function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{type:"ACTIVATE_CHOICES",active:t}},e.clearChoices=function(){return{type:"CLEAR_CHOICES"}},e.addGroup=function(t,e,n,i){return{type:"ADD_GROUP",value:t,id:e,active:n,disabled:i}},e.clearAll=function(){return{type:"CLEAR_ALL"}},e.setIsLoading=function(t){return{type:"LOADING",isLoading:t}}},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=(e.capitalise=function(t){return t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})},e.generateChars=function(t){for(var e="",n=0;n<t;n++){var i=u(0,36);e+=i.toString(36)}return e}),a=(e.generateId=function(t,e){var n=t.id||t.name&&t.name+"-"+r(2)||r(4);return n=n.replace(/(:|\.|\[|\]|,)/g,""),n=e+n},e.getType=function(t){return Object.prototype.toString.call(t).slice(8,-1)}),s=e.isType=function(t,e){var n=a(e);return null!=e&&n===t},o=(e.isNode=function(t){return"object"===("undefined"==typeof Node?"undefined":n(Node))?t instanceof Node:t&&"object"===(void 0===t?"undefined":n(t))&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},e.isElement=function(t){return"object"===("undefined"==typeof HTMLElement?"undefined":n(HTMLElement))?t instanceof HTMLElement:t&&"object"===(void 0===t?"undefined":n(t))&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName},e.extend=function n(){for(var t=arguments,i={},e=arguments.length,r=function(t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s("Object",t[e])?i[e]=n(!0,i[e],t[e]):i[e]=t[e])},a=0;a<e;a++){var o=t[a];s("Object",o)&&r(o)}return i},e.whichTransitionEvent=function(){var t,e=document.createElement("fakeelement"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in n)if(void 0!==e.style[t])return n[t]},e.whichAnimationEvent=function(){var t,e=document.createElement("fakeelement"),n={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(t in n)if(void 0!==e.style[t])return n[t]}),l=(e.getParentsUntil=function(t,e,n){for(var i=[];t&&t!==document;t=t.parentNode){if(e){var r=e.charAt(0);if("."===r&&t.classList.contains(e.substr(1)))break;if("#"===r&&t.id===e.substr(1))break;if("["===r&&t.hasAttribute(e.substr(1,e.length-1)))break;if(t.tagName.toLowerCase()===e)break}if(n){var a=n.charAt(0);"."===a&&t.classList.contains(n.substr(1))&&i.push(t),"#"===a&&t.id===n.substr(1)&&i.push(t),"["===a&&t.hasAttribute(n.substr(1,n.length-1))&&i.push(t),t.tagName.toLowerCase()===n&&i.push(t)}else i.push(t)}return 0===i.length?null:i},e.wrap=function(t,e){return e=e||document.createElement("div"),t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e),e.appendChild(t)},e.getSiblings=function(t){for(var e=[],n=t.parentNode.firstChild;n;n=n.nextSibling)1===n.nodeType&&n!==t&&e.push(n);return e},e.findAncestor=function(t,e){for(;(t=t.parentElement)&&!t.classList.contains(e););return t},e.findAncestorByAttrName=function(t,e){for(var n=t;n;){if(n.hasAttribute(e))return n;n=n.parentElement}return null},e.debounce=function(i,r,a){var o;return function(){var t=this,e=arguments,n=a&&!o;clearTimeout(o),o=setTimeout(function(){o=null,a||i.apply(t,e)},r),n&&i.apply(t,e)}},e.getElemDistance=function(t){var e=0;if(t.offsetParent)for(;e+=t.offsetTop,t=t.offsetParent;);return 0<=e?e:0},e.getElementOffset=function(t,e){var n=e;return 1<n&&(n=1),0<n&&(n=0),Math.max(t.offsetHeight*n)},e.getAdjacentEl=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;if(t&&e){var i=t.parentNode.parentNode,r=Array.from(i.querySelectorAll(e)),a=r.indexOf(t),o=0<n?1:-1;return r[a+o]}},e.getScrollPosition=function(t){return"bottom"===t?Math.max((window.scrollY||window.pageYOffset)+(window.innerHeight||document.documentElement.clientHeight)):window.scrollY||window.pageYOffset},e.isInView=function(t,e,n){return this.getScrollPosition(e)>this.getElemDistance(t)+this.getElementOffset(t,n)},e.isScrolledIntoView=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;if(t)return 0<n?e.scrollTop+e.offsetHeight>=t.offsetTop+t.offsetHeight:t.offsetTop>=e.scrollTop},e.stripHTML=function(t){return t.replace(/&/g,"&amp;").replace(/>/g,"&rt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}),u=(e.addAnimation=function(e,n){var i=o();e.classList.add(n),e.addEventListener(i,function t(){e.classList.remove(n),e.removeEventListener(i,t,!1)},!1)},e.getRandomNumber=function(t,e){return Math.floor(Math.random()*(e-t)+t)}),c=e.strToEl=(i=document.createElement("div"),function(t){var e=t.trim(),n=void 0;for(i.innerHTML=e,n=i.children[0];i.firstChild;)i.removeChild(i.firstChild);return n});e.getWidthOfInput=function(t){var e=t.value||t.placeholder,n=t.offsetWidth;if(e){var i=c("<span>"+l(e)+"</span>");if(i.style.position="absolute",i.style.padding="0",i.style.top="-9999px",i.style.left="-9999px",i.style.width="auto",i.style.whiteSpace="pre",document.body.contains(t)&&window.getComputedStyle){var r=window.getComputedStyle(t);r&&(i.style.fontSize=r.fontSize,i.style.fontFamily=r.fontFamily,i.style.fontWeight=r.fontWeight,i.style.fontStyle=r.fontStyle,i.style.letterSpacing=r.letterSpacing,i.style.textTransform=r.textTransform,i.style.padding=r.padding)}document.body.appendChild(i),e&&i.offsetWidth!==t.offsetWidth&&(n=i.offsetWidth+4),document.body.removeChild(i)}return n+"px"},e.sortByAlpha=function(t,e){var n=(t.label||t.value).toLowerCase(),i=(e.label||e.value).toLowerCase();return n<i?-1:i<n?1:0},e.sortByScore=function(t,e){return t.score-e.score},e.triggerEvent=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,i=new CustomEvent(e,{detail:n,bubbles:!0,cancelable:!0});return t.dispatchEvent(i)}},function(t,e){!function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}var e,l,i,u;Array.from||(Array.from=(e=Object.prototype.toString,l=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},i=Math.pow(2,53)-1,u=function(t){var e,n=(e=Number(t),isNaN(e)?0:0!==e&&isFinite(e)?(0<e?1:-1)*Math.floor(Math.abs(e)):e);return Math.min(Math.max(n,0),i)},function(t){var e=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var n,i=1<arguments.length?arguments[1]:void 0;if(void 0!==i){if(!l(i))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(n=arguments[2])}for(var r,a=u(e.length),o=l(this)?Object(new this(a)):new Array(a),s=0;s<a;)r=e[s],o[s]=i?void 0===n?i(r,s):i.call(n,r,s):r,s+=1;return o.length=a,o})),Array.prototype.find||(Array.prototype.find=function(t){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),i=n.length>>>0,r=arguments[1],a=0;a<i;a++)if(e=n[a],t.call(r,e,a,n))return e}),t.prototype=window.Event.prototype,window.CustomEvent=t}()}])}(bi={exports:{}},bi.exports),bi.exports),Li=(wi=Ti)&&wi.__esModule&&Object.prototype.hasOwnProperty.call(wi,"default")?wi.default:wi;Ti.Choices;function Ii(){kh()}function Ni(){var t,e;t=oi(ki).selectAll("option").data(yn.data.column_names.value),e=t.enter().append("option"),t.merge(e).attr("value",function(t){return t}).text(function(t){return t}),t.exit().remove(),ki.style.display="block",(Ei=new Li(ki,{removeItemButton:!0,placeholderValue:_n.series_filter_text,noChoicesText:_n.series_filter_none_text})).setValueByChoice(_n.series_filter);var n=(Mi=document.querySelector(".choices")).querySelector("div.choices__inner");n.style.display="flex";var i=n.querySelector("input.choices__input").style;i.width=null,i.flex="1 1 auto",i.overflow="hidden",i.textOverflow="ellipsis",i.whiteSpace="nowrap",i.minWidth=0,ki.addEventListener("change",function(){_n.series_filter=Ei.getValue().map(function(t){return t.value}),Ei.hideDropdown(),Ii()})}function Oi(){ki||(ki=document.getElementById("series-filter"));var t=Ai!=_n.series_filter_text||Ci!=_n.series_filter_none_text,e=yn.data.column_names.value.join("")!=Si;if(!_n.series_filter_enabled)return Ei&&Ei.destroy(),ki.style.display="none",void(Ei=null);Ei?(t||e)&&(Ei.destroy(),Ni()):Ni(),Ei.removeActiveItems(),Ei.setValueByChoice(_n.series_filter),Mi.style.display=_n.series_filter_hidden?"none":null,Ai=_n.series_filter_text,Ci=_n.series_filter_none_text,Si=yn.data.column_names.value.join("")}var Pi="$";function Fi(){}function zi(t,e){var n=new Fi;if(t instanceof Fi)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var i,r=-1,a=t.length;if(null==e)for(;++r<a;)n.set(r,t[r]);else for(;++r<a;)n.set(e(i=t[r],r,t),i)}else if(t)for(var o in t)n.set(o,t[o]);return n}function Di(){var f,d,e,_=[],o=[];function p(t,n,i,r){if(n>=_.length)return null!=f&&t.sort(f),null!=d?d(t):t;for(var e,a,o,s=-1,l=t.length,u=_[n++],c=zi(),h=i();++s<l;)(o=c.get(e=u(a=t[s])+""))?o.push(a):c.set(e,[a]);return c.each(function(t,e){r(h,e,p(t,n,i,r))}),h}return e={object:function(t){return p(t,0,Ri,Hi)},map:function(t){return p(t,0,qi,ji)},entries:function(t){return function n(t,i){if(++i>_.length)return t;var r,a=o[i-1];return null!=d&&i>=_.length?r=t.entries():(r=[],t.each(function(t,e){r.push({key:e,values:n(t,i)})})),null!=a?r.sort(function(t,e){return a(t.key,e.key)}):r}(p(t,0,qi,ji),0)},key:function(t){return _.push(t),e},sortKeys:function(t){return o[_.length-1]=t,e},sortValues:function(t){return f=t,e},rollup:function(t){return d=t,e}}}function Ri(){return{}}function Hi(t,e,n){t[e]=n}function qi(){return zi()}function ji(t,e,n){t.set(e,n)}function Bi(){}Fi.prototype=zi.prototype={constructor:Fi,has:function(t){return Pi+t in this},get:function(t){return this[Pi+t]},set:function(t,e){return this[Pi+t]=e,this},remove:function(t){var e=Pi+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===Pi&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===Pi&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===Pi&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===Pi&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===Pi&&++t;return t},empty:function(){for(var t in this)if(t[0]===Pi)return!1;return!0},each:function(t){for(var e in this)e[0]===Pi&&t(this[e],e.slice(1),this)}};var Ui=zi.prototype;function Vi(t,e){var n=new Bi;if(t instanceof Bi)t.each(function(t){n.add(t)});else if(t){var i=-1,r=t.length;if(null==e)for(;++i<r;)n.add(t[i]);else for(;++i<r;)n.add(e(t[i],i,t))}return n}function Yi(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function Wi(a){var n;return 1===a.length&&(n=a,a=function(t,e){return Yi(n(t),e)}),{left:function(t,e,n,i){for(null==n&&(n=0),null==i&&(i=t.length);n<i;){var r=n+i>>>1;a(t[r],e)<0?n=r+1:i=r}return n},right:function(t,e,n,i){for(null==n&&(n=0),null==i&&(i=t.length);n<i;){var r=n+i>>>1;0<a(t[r],e)?i=r:n=r+1}return n}}}Bi.prototype=Vi.prototype={constructor:Bi,has:Ui.has,add:function(t){return this[Pi+(t+="")]=t,this},remove:Ui.remove,clear:Ui.clear,values:Ui.keys,size:Ui.size,empty:Ui.empty,each:Ui.each};var Gi=Wi(Yi).right;var Xi,Zi,$i,Ki,Qi,Ji,tr,er,nr,ir,rr,ar=Math.sqrt(50),or=Math.sqrt(10),sr=Math.sqrt(2);function lr(t,e,n){var i,r,a,o,s=-1;if(n=+n,(t=+t)===(e=+e)&&0<n)return[t];if((i=e<t)&&(r=t,t=e,e=r),0===(o=ur(t,e,n))||!isFinite(o))return[];if(0<o)for(t=Math.ceil(t/o),e=Math.floor(e/o),a=new Array(r=Math.ceil(e-t+1));++s<r;)a[s]=(t+s)*o;else for(t=Math.floor(t*o),e=Math.ceil(e*o),a=new Array(r=Math.ceil(t-e+1));++s<r;)a[s]=(t-s)/o;return i&&a.reverse(),a}function ur(t,e,n){var i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),a=i/Math.pow(10,r);return 0<=r?(ar<=a?10:or<=a?5:sr<=a?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(ar<=a?10:or<=a?5:sr<=a?2:1)}function cr(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),a=i/r;return ar<=a?r*=10:or<=a?r*=5:sr<=a&&(r*=2),e<t?-r:r}function hr(t,e){var n,i,r=t.length,a=-1;if(null==e){for(;++a<r;)if(null!=(n=t[a])&&n<=n)for(i=n;++a<r;)null!=(n=t[a])&&i<n&&(i=n)}else for(;++a<r;)if(null!=(n=e(t[a],a,t))&&n<=n)for(i=n;++a<r;)null!=(n=e(t[a],a,t))&&i<n&&(i=n);return i}function fr(t,e){var n,i,r=t.length,a=-1;if(null==e){for(;++a<r;)if(null!=(n=t[a])&&n<=n)for(i=n;++a<r;)null!=(n=t[a])&&n<i&&(i=n)}else for(;++a<r;)if(null!=(n=e(t[a],a,t))&&n<=n)for(i=n;++a<r;)null!=(n=e(t[a],a,t))&&n<i&&(i=n);return i}function dr(t){if("number"!=Xi.label_type)return"datetime"==Xi.label_type?Xi.labelParse(t)||null:""==t?null:t;var e=rr(t);return isNaN(e)?null:e}var _r={value:function(){}};function pr(){for(var t,e=arguments,n=0,i=arguments.length,r={};n<i;++n){if(!(t=e[n]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new gr(r)}function gr(t){this._=t}function mr(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function vr(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=_r,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}gr.prototype=pr.prototype={constructor:gr,on:function(t,e){var n,i,r=this._,a=(i=r,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),o=-1,s=a.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(n=(t=a[o]).type)r[n]=vr(r[n],t.name,e);else if(null==e)for(n in r)r[n]=vr(r[n],t.name,null);return this}for(;++o<s;)if((n=(t=a[o]).type)&&(n=mr(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new gr(t)},call:function(t,e){var n=arguments;if(0<(i=arguments.length-2))for(var i,r,a=new Array(i),o=0;o<i;++o)a[o]=n[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,i=(r=this._[t]).length;o<i;++o)r[o].value.apply(e,a)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,a=i.length;r<a;++r)i[r].value.apply(e,n)}};var yr,xr,br=0,wr=0,kr=0,Mr=1e3,Er=0,Ar=0,Cr=0,Sr="object"==typeof performance&&performance.now?performance:Date,Tr="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Lr(){return Ar||(Tr(Ir),Ar=Sr.now()+Cr)}function Ir(){Ar=0}function Nr(){this._call=this._time=this._next=null}function Or(t,e,n){var i=new Nr;return i.restart(t,e,n),i}function Pr(){Ar=(Er=Sr.now())+Cr,br=wr=0;try{!function(){Lr(),++br;for(var t,e=yr;e;)0<=(t=Ar-e._time)&&e._call.call(null,t),e=e._next;--br}()}finally{br=0,function(){var t,e,n=yr,i=1/0;for(;n;)n=n._call?(i>n._time&&(i=n._time),(t=n)._next):(e=n._next,n._next=null,t?t._next=e:yr=e);xr=t,zr(i)}(),Ar=0}}function Fr(){var t=Sr.now(),e=t-Er;Mr<e&&(Cr-=e,Er=t)}function zr(t){br||(wr&&(wr=clearTimeout(wr)),24<t-Ar?(t<1/0&&(wr=setTimeout(Pr,t-Sr.now()-Cr)),kr&&(kr=clearInterval(kr))):(kr||(Er=Sr.now(),kr=setInterval(Fr,Mr)),br=1,Tr(Pr)))}function Dr(e,n,t){var i=new Nr;return n=null==n?0:+n,i.restart(function(t){i.stop(),e(t+n)},n,t),i}Nr.prototype=Or.prototype={constructor:Nr,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Lr():+n)+(null==e?0:+e),this._next||xr===this||(xr?xr._next=this:yr=this,xr=this),this._call=t,this._time=n,zr()},stop:function(){this._call&&(this._call=null,this._time=1/0,zr())}};var Rr=pr("start","end","cancel","interrupt"),Hr=[],qr=0,jr=1,Br=2,Ur=3,Vr=4,Yr=5,Wr=6;function Gr(t,e,n,i,r,a){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(a,o,s){var l,u=a.__transition;function c(t){var e,n,i,r;if(s.state!==jr)return f();for(e in u)if((r=u[e]).name===s.name){if(r.state===Ur)return Dr(c);r.state===Vr?(r.state=Wr,r.timer.stop(),r.on.call("interrupt",a,a.__data__,r.index,r.group),delete u[e]):+e<o&&(r.state=Wr,r.timer.stop(),r.on.call("cancel",a,a.__data__,r.index,r.group),delete u[e])}if(Dr(function(){s.state===Ur&&(s.state=Vr,s.timer.restart(h,s.delay,s.time),h(t))}),s.state=Br,s.on.call("start",a,a.__data__,s.index,s.group),s.state===Br){for(s.state=Ur,l=new Array(i=s.tween.length),e=0,n=-1;e<i;++e)(r=s.tween[e].value.call(a,a.__data__,s.index,s.group))&&(l[++n]=r);l.length=n+1}}function h(t){for(var e=t<s.duration?s.ease.call(null,t/s.duration):(s.timer.restart(f),s.state=Yr,1),n=-1,i=l.length;++n<i;)l[n].call(a,e);s.state===Yr&&(s.on.call("end",a,a.__data__,s.index,s.group),f())}function f(){for(var t in s.state=Wr,s.timer.stop(),delete u[o],u)return;delete a.__transition}(u[o]=s).timer=Or(function(t){s.state=jr,s.timer.restart(c,s.delay,s.time),s.delay<=t&&c(t-s.delay)},0,s.time)}(t,n,{name:e,index:i,group:r,on:Rr,tween:Hr,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:qr})}function Xr(t,e){var n=$r(t,e);if(n.state>qr)throw new Error("too late; already scheduled");return n}function Zr(t,e){var n=$r(t,e);if(n.state>Ur)throw new Error("too late; already running");return n}function $r(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Kr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Qr(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Jr(){}var ta=1/.7,ea="\\s*([+-]?\\d+)\\s*",na="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ia="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ra=/^#([0-9a-f]{3})$/,aa=/^#([0-9a-f]{6})$/,oa=new RegExp("^rgb\\("+[ea,ea,ea]+"\\)$"),sa=new RegExp("^rgb\\("+[ia,ia,ia]+"\\)$"),la=new RegExp("^rgba\\("+[ea,ea,ea,na]+"\\)$"),ua=new RegExp("^rgba\\("+[ia,ia,ia,na]+"\\)$"),ca=new RegExp("^hsl\\("+[na,ia,ia]+"\\)$"),ha=new RegExp("^hsla\\("+[na,ia,ia,na]+"\\)$"),fa={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function da(t){var e;return t=(t+"").trim().toLowerCase(),(e=ra.exec(t))?new va((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=aa.exec(t))?_a(parseInt(e[1],16)):(e=oa.exec(t))?new va(e[1],e[2],e[3],1):(e=sa.exec(t))?new va(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=la.exec(t))?pa(e[1],e[2],e[3],e[4]):(e=ua.exec(t))?pa(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ca.exec(t))?xa(e[1],e[2]/100,e[3]/100,1):(e=ha.exec(t))?xa(e[1],e[2]/100,e[3]/100,e[4]):fa.hasOwnProperty(t)?_a(fa[t]):"transparent"===t?new va(NaN,NaN,NaN,0):null}function _a(t){return new va(t>>16&255,t>>8&255,255&t,1)}function pa(t,e,n,i){return i<=0&&(t=e=n=NaN),new va(t,e,n,i)}function ga(t){return t instanceof Jr||(t=da(t)),t?new va((t=t.rgb()).r,t.g,t.b,t.opacity):new va}function ma(t,e,n,i){return 1===arguments.length?ga(t):new va(t,e,n,null==i?1:i)}function va(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function ya(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function xa(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||1<=n?t=e=NaN:e<=0&&(t=NaN),new ba(t,e,n,i)}function ba(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function wa(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Kr(Jr,da,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),Kr(va,ma,Qr(Jr,{brighter:function(t){return t=null==t?ta:Math.pow(ta,t),new va(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new va(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+ya(this.r)+ya(this.g)+ya(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),Kr(ba,function(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof ba)return new ba(t.h,t.s,t.l,t.opacity);if(t instanceof Jr||(t=da(t)),!t)return new ba;if(t instanceof ba)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),a=Math.max(e,n,i),o=NaN,s=a-r,l=(a+r)/2;return s?(o=e===a?(n-i)/s+6*(n<i):n===a?(i-e)/s+2:(e-n)/s+4,s/=l<.5?a+r:2-a-r,o*=60):s=0<l&&l<1?0:o,new ba(o,s,l,t.opacity)}(t):new ba(t,e,n,null==i?1:i)},Qr(Jr,{brighter:function(t){return t=null==t?ta:Math.pow(ta,t),new ba(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ba(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new va(wa(240<=t?t-240:t+120,r,i),wa(t,r,i),wa(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var ka=Math.PI/180,Ma=180/Math.PI,Ea=.96422,Aa=1,Ca=.82521,Sa=4/29,Ta=6/29,La=3*Ta*Ta,Ia=Ta*Ta*Ta;function Na(t){if(t instanceof Oa)return new Oa(t.l,t.a,t.b,t.opacity);if(t instanceof Ha){if(isNaN(t.h))return new Oa(t.l,0,0,t.opacity);var e=t.h*ka;return new Oa(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof va||(t=ga(t));var n,i,r=Da(t.r),a=Da(t.g),o=Da(t.b),s=Pa((.2225045*r+.7168786*a+.0606169*o)/Aa);return r===a&&a===o?n=i=s:(n=Pa((.4360747*r+.3850649*a+.1430804*o)/Ea),i=Pa((.0139322*r+.0971045*a+.7141733*o)/Ca)),new Oa(116*s-16,500*(n-s),200*(s-i),t.opacity)}function Oa(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}function Pa(t){return Ia<t?Math.pow(t,1/3):t/La+Sa}function Fa(t){return Ta<t?t*t*t:La*(t-Sa)}function za(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Da(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ra(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof Ha)return new Ha(t.h,t.c,t.l,t.opacity);if(t instanceof Oa||(t=Na(t)),0===t.a&&0===t.b)return new Ha(NaN,0,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Ma;return new Ha(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new Ha(t,e,n,null==i?1:i)}function Ha(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}Kr(Oa,function(t,e,n,i){return 1===arguments.length?Na(t):new Oa(t,e,n,null==i?1:i)},Qr(Jr,{brighter:function(t){return new Oa(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Oa(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new va(za(3.1338561*(e=Ea*Fa(e))-1.6168667*(t=Aa*Fa(t))-.4906146*(n=Ca*Fa(n))),za(-.9787684*e+1.9161415*t+.033454*n),za(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),Kr(Ha,Ra,Qr(Jr,{brighter:function(t){return new Ha(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Ha(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Na(this).rgb()}}));var qa=1.78277,ja=-.29227,Ba=-.90649,Ua=1.97294,Va=Ua*Ba,Ya=Ua*qa,Wa=qa*ja- -.14861*Ba;function Ga(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function Xa(t){return function(){return t}}function Za(a){return 1==(a=+a)?$a:function(t,e){return e-t?(n=t,i=e,r=a,n=Math.pow(n,r),i=Math.pow(i,r)-n,r=1/r,function(t){return Math.pow(n+t*i,r)}):Xa(isNaN(t)?e:t);var n,i,r}}function $a(t,e){var n,i,r=e-t;return r?(n=t,i=r,function(t){return n+t*i}):Xa(isNaN(t)?e:t)}Kr(Ga,function(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof Ga)return new Ga(t.h,t.s,t.l,t.opacity);t instanceof va||(t=ga(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(Wa*i+Va*e-Ya*n)/(Wa+Va-Ya),a=i-r,o=(Ua*(n-r)-ja*a)/Ba,s=Math.sqrt(o*o+a*a)/(Ua*r*(1-r)),l=s?Math.atan2(o,a)*Ma-120:NaN;return new Ga(l<0?l+360:l,s,r,t.opacity)}(t):new Ga(t,e,n,null==i?1:i)},Qr(Jr,{brighter:function(t){return t=null==t?ta:Math.pow(ta,t),new Ga(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ga(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*ka,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new va(255*(e+n*(-.14861*i+qa*r)),255*(e+n*(ja*i+Ba*r)),255*(e+n*(Ua*i)),this.opacity)}}));var Ka=function t(e){var o=Za(e);function n(e,t){var n=o((e=ma(e)).r,(t=ma(t)).r),i=o(e.g,t.g),r=o(e.b,t.b),a=$a(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=i(t),e.b=r(t),e.opacity=a(t),e+""}}return n.gamma=t,n}(1);function Qa(e,n){return n-=e=+e,function(t){return e+n*t}}var Ja=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,to=new RegExp(Ja.source,"g");function eo(t,i){var e,n,r,a,o,s=Ja.lastIndex=to.lastIndex=0,l=-1,u=[],c=[];for(t+="",i+="";(e=Ja.exec(t))&&(n=to.exec(i));)(r=n.index)>s&&(r=i.slice(s,r),u[l]?u[l]+=r:u[++l]=r),(e=e[0])===(n=n[0])?u[l]?u[l]+=n:u[++l]=n:(u[++l]=null,c.push({i:l,x:Qa(e,n)})),s=to.lastIndex;return s<i.length&&(r=i.slice(s),u[l]?u[l]+=r:u[++l]=r),u.length<2?c[0]?(o=c[0].x,function(t){return o(t)+""}):(a=i,function(){return a}):(i=c.length,function(t){for(var e,n=0;n<i;++n)u[(e=c[n]).i]=e.x(t);return u.join("")})}function no(t,e){var n,i=typeof e;return null==e||"boolean"===i?Xa(e):("number"===i?Qa:"string"===i?(n=da(e))?(e=n,Ka):eo:e instanceof da?Ka:e instanceof Date?function(e,n){var i=new Date;return n-=e=+e,function(t){return i.setTime(e+n*t),i}}:Array.isArray(e)?function(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,a=new Array(r),o=new Array(i);for(n=0;n<r;++n)a[n]=no(t[n],e[n]);for(;n<i;++n)o[n]=e[n];return function(t){for(n=0;n<r;++n)o[n]=a[n](t);return o}}:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?function(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=no(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}:Qa)(t,e)}function io(e,n){return n-=e=+e,function(t){return Math.round(e+n*t)}}var ro,ao,oo,so,lo=180/Math.PI,uo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function co(t,e,n,i,r,a){var o,s,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,l/=s),t*i<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:r,translateY:a,rotate:Math.atan2(e,t)*lo,skewX:Math.atan(l)*lo,scaleX:o,scaleY:s}}function ho(f,d,_,p){function g(t){return t.length?t.pop()+" ":""}return function(t,e){var n,i,r,a,o,s,l,u,c=[],h=[];return t=f(t),e=f(e),function(t,e,n,i,r,a){if(t!==n||e!==i){var o=r.push("translate(",null,d,null,_);a.push({i:o-4,x:Qa(t,n)},{i:o-2,x:Qa(e,i)})}else(n||i)&&r.push("translate("+n+d+i+_)}(t.translateX,t.translateY,e.translateX,e.translateY,c,h),n=t.rotate,i=e.rotate,r=c,a=h,n!==i?(180<n-i?i+=360:180<i-n&&(n+=360),a.push({i:r.push(g(r)+"rotate(",null,p)-2,x:Qa(n,i)})):i&&r.push(g(r)+"rotate("+i+p),o=t.skewX,s=e.skewX,l=c,u=h,o!==s?u.push({i:l.push(g(l)+"skewX(",null,p)-2,x:Qa(o,s)}):s&&l.push(g(l)+"skewX("+s+p),function(t,e,n,i,r,a){if(t!==n||e!==i){var o=r.push(g(r)+"scale(",null,",",null,")");a.push({i:o-4,x:Qa(t,n)},{i:o-2,x:Qa(e,i)})}else 1===n&&1===i||r.push(g(r)+"scale("+n+","+i+")")}(t.scaleX,t.scaleY,e.scaleX,e.scaleY,c,h),t=e=null,function(t){for(var e,n=-1,i=h.length;++n<i;)c[(e=h[n]).i]=e.x(t);return c.join("")}}}var fo=ho(function(t){return"none"===t?uo:(ro||(ro=document.createElement("DIV"),ao=document.documentElement,oo=document.defaultView),ro.style.transform=t,t=oo.getComputedStyle(ao.appendChild(ro),null).getPropertyValue("transform"),ao.removeChild(ro),co(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),_o=ho(function(t){return null==t?uo:(so||(so=document.createElementNS("http://www.w3.org/2000/svg","g")),so.setAttribute("transform",t),(t=so.transform.baseVal.consolidate())?co((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):uo)},", ",")",")");Math.SQRT2;function po(t,e,n){var i=t._id;return t.each(function(){var t=Zr(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return $r(t,i).value[e]}}function go(t,e){var n;return("number"==typeof e?Qa:e instanceof da?Ka:(n=da(e))?(e=n,Ka):eo)(t,e)}var mo=ai.prototype.constructor;function vo(t){return function(){this.style.removeProperty(t)}}var yo=0;function xo(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function bo(){return++yo}var wo=ai.prototype;xo.prototype=function(t){return ai().transition(t)}.prototype={constructor:xo,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=En(t));for(var i=this._groups,r=i.length,a=new Array(r),o=0;o<r;++o)for(var s,l,u=i[o],c=u.length,h=a[o]=new Array(c),f=0;f<c;++f)(s=u[f])&&(l=t.call(s,s.__data__,f,u))&&("__data__"in s&&(l.__data__=s.__data__),h[f]=l,Gr(h[f],e,n,f,h,$r(s,n)));return new xo(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Cn(t));for(var i=this._groups,r=i.length,a=[],o=[],s=0;s<r;++s)for(var l,u=i[s],c=u.length,h=0;h<c;++h)if(l=u[h]){for(var f,d=t.call(l,l.__data__,h,u),_=$r(l,n),p=0,g=d.length;p<g;++p)(f=d[p])&&Gr(f,e,n,p,d,_);a.push(d),o.push(l)}return new xo(a,o,e,n)},filter:function(t){"function"!=typeof t&&(t=Sn(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a,o=e[r],s=o.length,l=i[r]=[],u=0;u<s;++u)(a=o[u])&&t.call(a,a.__data__,u,o)&&l.push(a);return new xo(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,a=Math.min(i,r),o=new Array(i),s=0;s<a;++s)for(var l,u=e[s],c=n[s],h=u.length,f=o[s]=new Array(h),d=0;d<h;++d)(l=u[d]||c[d])&&(f[d]=l);for(;s<i;++s)o[s]=e[s];return new xo(o,this._parents,this._name,this._id)},selection:function(){return new mo(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=bo(),i=this._groups,r=i.length,a=0;a<r;++a)for(var o,s=i[a],l=s.length,u=0;u<l;++u)if(o=s[u]){var c=$r(o,e);Gr(o,t,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new xo(i,this._parents,t,n)},call:wo.call,nodes:wo.nodes,node:wo.node,size:wo.size,empty:wo.empty,each:wo.each,on:function(t,e){var n,i,r,a,o,s,l=this._id;return arguments.length<2?$r(this.node(),l).on.on(t):this.each((n=l,r=e,s=((i=t)+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return 0<=e&&(t=t.slice(0,e)),!t||"start"===t})?Xr:Zr,function(){var t=s(this,n),e=t.on;e!==a&&(o=(a=e).copy()).on(i,r),t.on=o}))},attr:function(t,e){var n=wn(t),i="transform"===n?_o:go;return this.attrTween(t,"function"==typeof e?(n.local?function(i,r,a){var o,s,l;return function(){var t,e,n=a(this);if(null!=n)return(t=this.getAttributeNS(i.space,i.local))===(e=n+"")?null:t===o&&e===s?l:(s=e,l=r(o=t,n));this.removeAttributeNS(i.space,i.local)}}:function(i,r,a){var o,s,l;return function(){var t,e,n=a(this);if(null!=n)return(t=this.getAttribute(i))===(e=n+"")?null:t===o&&e===s?l:(s=e,l=r(o=t,n));this.removeAttribute(i)}})(n,i,po(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(e,n,i){var r,a,o=i+"";return function(){var t=this.getAttributeNS(e.space,e.local);return t===o?null:t===r?a:a=n(r=t,i)}}:function(e,n,i){var r,a,o=i+"";return function(){var t=this.getAttribute(e);return t===o?null:t===r?a:a=n(r=t,i)}})(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=wn(t);return this.tween(n,(i.local?function(i,r){var a,o;function t(){var e,n,t=r.apply(this,arguments);return t!==o&&(a=(o=t)&&(e=i,n=t,function(t){this.setAttributeNS(e.space,e.local,n(t))})),a}return t._value=r,t}:function(i,r){var a,o;function t(){var e,n,t=r.apply(this,arguments);return t!==o&&(a=(o=t)&&(e=i,n=t,function(t){this.setAttribute(e,n(t))})),a}return t._value=r,t})(i,e))},style:function(t,e,n){var i,r,a,o,s,l,u,c,h,f,d,_,p,g,m,v,y,x,b,w,k,M,E,A,C,S="transform"==(t+="")?fo:go;return null==e?this.styleTween(t,(k=t,M=S,function(){var t=zn(this,k),e=(this.style.removeProperty(k),zn(this,k));return t===e?null:t===E&&e===A?C:C=M(E=t,A=e)})).on("end.style."+t,vo(t)):"function"==typeof e?this.styleTween(t,(m=t,v=S,y=po(this,"style."+t,e),function(){var t=zn(this,m),e=y(this),n=e+"";return null==e&&(this.style.removeProperty(m),n=e=zn(this,m)),t===n?null:t===x&&n===b?w:(b=n,w=v(x=t,e))})).each((u=this._id,g="end."+(p="style."+(c=t)),function(){var t=Zr(this,u),e=t.on,n=null==t.value[p]?_||(_=vo(c)):void 0;e===h&&d===n||(f=(h=e).copy()).on(g,d=n),t.on=f})):this.styleTween(t,(i=t,r=S,a=e,l=a+"",function(){var t=zn(this,i);return t===l?null:t===o?s:s=r(o=t,a)}),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,function(r,a,o){var s,l;function t(){var e,n,i,t=a.apply(this,arguments);return t!==l&&(s=(l=t)&&(e=r,n=t,i=o,function(t){this.style.setProperty(e,n(t),i)})),s}return t._value=a,t}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?(n=po(this,"text",t),function(){var t=n(this);this.textContent=null==t?"":t}):(e=null==t?"":t+"",function(){this.textContent=e}));var e,n},remove:function(){return this.on("end.remove",(n=this._id,function(){var t=this.parentNode;for(var e in this.__transition)if(+e!==n)return;t&&t.removeChild(this)}));var n},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=$r(this.node(),n).tween,a=0,o=r.length;a<o;++a)if((i=r[a]).name===t)return i.value;return null}return this.each((null==e?function(r,a){var o,s;return function(){var t=Zr(this,r),e=t.tween;if(e!==o)for(var n=0,i=(s=o=e).length;n<i;++n)if(s[n].name===a){(s=s.slice()).splice(n,1);break}t.tween=s}}:function(a,o,s){var l,u;if("function"!=typeof s)throw new Error;return function(){var t=Zr(this,a),e=t.tween;if(e!==l){u=(l=e).slice();for(var n={name:o,value:s},i=0,r=u.length;i<r;++i)if(u[i].name===o){u[i]=n;break}i===r&&u.push(n)}t.tween=u}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){Xr(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){Xr(this,t).delay=e}})(e,t)):$r(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){Zr(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){Zr(this,t).duration=e}})(e,t)):$r(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Zr(this,t).ease=e}}(e,t)):$r(this.node(),e).ease},end:function(){var r,a,o=this,s=o._id,l=o.size();return new Promise(function(t,e){var n={value:e},i={value:function(){0==--l&&t()}};o.each(function(){var t=Zr(this,s),e=t.on;e!==r&&((a=(r=e).copy())._.cancel.push(n),a._.interrupt.push(n),a._.end.push(i)),t.on=a})})}};Math.PI,Math.PI;var ko={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Mo(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return ko.time=Lr(),ko;return n}ai.prototype.interrupt=function(t){return this.each(function(){!function(t,e){var n,i,r,a=t.__transition,o=!0;if(a){for(r in e=null==e?null:e+"",a)(n=a[r]).name===e?(i=n.state>Br&&n.state<Yr,n.state=Wr,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete a[r]):o=!1;o&&delete t.__transition}}(this,t)})},ai.prototype.transition=function(t){var e,n;t=t instanceof xo?(e=t._id,t._name):(e=bo(),(n=ko).time=Lr(),null==t?null:t+"");for(var i=this._groups,r=i.length,a=0;a<r;++a)for(var o,s=i[a],l=s.length,u=0;u<l;++u)(o=s[u])&&Gr(o,t,e,u,s,n||Mo(o,e));return new xo(i,this._parents,t,e)};var Eo=(1+Math.sqrt(5))/2;var Ao=Object.freeze({palette:["#1D6996","#EDAD08","#73AF48","#94346E","#38A6A5","#E17C05","#5F4690","#0F8554","#6F4070","#CC503E","#994E95","#666666"],extend:!0,advanced:!1,hue_rotation_angle:222.49,custom_palette:""});var Co="A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",So="fl-spanner",To=So+"-";function Lo(e){("string"==typeof e||e instanceof HTMLElement)&&(e=oi(e));var o={data:[],element:null,ignore_case:!0,text:function(t){return t},class:So},n=function(t,e){var n=o.text(t,e);if(!n||"string"!=typeof n)return null;var i=n.trim();return i?{original:n,trimmed:i,length:i.length,d:t,i:e}:null},i=function(){var t=e.node(),a=e.text(),l=o.element;return l||(l=t instanceof SVGElement||"svg"===t.nodeName.toLowerCase()?"tspan":"span"),o.data.map(n).filter(function(t){return t}).sort(function(t,e){return e.length-t.length||t.i-e.i}).forEach(function(s){var t,e,n,i,r=(t=l,e=s.trimmed.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),n="<"+t+".*?<\\/"+t+">|(?:(^|[^"+Co+"])("+e+")($|[^"+Co+"]))",i=o.ignore_case?"gi":"g",new RegExp(n,i));a=a.replace(r,function(t,e,n,i){return n?e+(r=l,a=n,o=s.i,"<"+r+" class='"+To+o+"'>"+a+"</"+r+">")+i:t;var r,a,o})}),e.html(a),e.selectAll(l).each(function(){var t=o.data[this.getAttribute("class").slice(To.length)];oi(this).datum(t).attr("class",o.class)})};return i.data=function(t){return void 0===t?o.data:(o.data=Array.isArray(t)?t:[t],i)},i.element=function(t){return void 0===t?o.element:(o.element=t,i)},i.ignoreCase=function(t){return void 0===t?o.ignore_case:(o.ignore_case=!!t,i)},i.text=function(t){return void 0===t?o.text:(o.text=t,i)},i.class=function(t){return void 0===t?o.class:(o.class=t,i)},i}function Io(t,e,n,i){Lo(t).data(e)().style("color",function(t){return n(t)}).style("font-weight",i)}var No,Oo=function(h,e){var f={},r=function(t){if("string"==typeof t)return"function"==typeof e?e(t):e?t.toLowerCase().replace(/\s+/g,""):t;t=""+t};for(var t in Ao)void 0===h[t]&&(h[t]=Ao[t]);return{find:function(t){return f[r(t)]},updateColors:function(t){f={};var l,e=Vi(t.map(r)).values(),u=h.palette,c=u.length;h.extend?e.forEach(function(t,e){if(e<c)f[t]=u[e];else{if(e===c){for(var n,i=u.map(function(t){return Ra(t)}),r=i.reduce(function(t,e){return t+e.c},0)/c,a=i.reduce(function(t,e){return t+e.l},0)/c,o=c;n=i[--o].h,isNaN(n)&&0<o;);var s=h.advanced?h.hue_rotation_angle:Ao.hue_rotation_angle;(l=function(t,e){e=void 0!==e?e:360/Eo;var n=Ra(t=t||"#FF0000"),i=n.h,r=n.c,a=n.l,o=0;return function(){var t=o++*e;return da(Ra((i+t)%360,r,a)).hex()}}(Ra(n,r,a).toString(),s))()}f[t]=l()}}):e.forEach(function(t,e){f[t]=u[e%c]}),h.custom_palette.split("\n").filter(function(t){return t}).forEach(function(t){var e=t.lastIndexOf(":");if(-1!==e){var n=r(t.slice(0,e).trim()),i=t.slice(e+1).trim();n&&i&&(f[n]=i)}})}}}(_n.color),Po=[];function Fo(){var t=(No="row"==xi.legend_type||"either"==xi.legend_type&&"row"==_n.color_mode)?Xi.row_names:Xi.unfiltered_series_names;Oo.updateColors(t),Po=No?Xi.row_names:Xi.series_names,function(){var t=!xi.legend_show||xi.facet_by_series&&!No,e=oi("#legend").selectAll(".series").data(t?[]:Po),n=e.enter().append("span").attr("class","series");n.append("span").attr("class","swatch"),n.append("span").attr("class","label");var i=e.merge(n);i.style("width",_n.legend_stack?"100%":null).style("line-height",1.33*Math.max(_n.legend_swatch_height,_n.legend_text_size)+"rem"),i.select(".swatch").style("border-radius",_n.legend_swatch_radius+"px").style("width",_n.legend_swatch_width+"rem").style("height",_n.legend_swatch_height+"rem").style("background",function(t){return Oo.find(t)}),i.select(".label").text(function(t){return t}).style("font-size",_n.legend_text_size+"rem").style("color",_n.legend_text_color),e.exit().remove(),mn.setLegendPosition(_n.legend_position)}()}function zo(t){return Oo.find(Xi.series_names[t])}function Do(t){return Oo.find(Xi.labelFormat(t).toString())}function Ro(t){return No?Do(t.label):zo(t.series)}function Ho(t){return No?"rgba(0,0,0,0.5)":zo(t.index)}function qo(){!function(t,e){if("off"!=_n.text_legend){var n=_n.text_legend_bold?"bold":null;("auto"==_n.text_legend||_n.text_legend_title)&&Io(oi("#fl-layout-header h1"),t,e,n),("auto"==_n.text_legend||_n.text_legend_subtitle)&&Io(oi("#fl-layout-header h2"),t,e,n)}}(Po,Oo.find)}function jo(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var Bo=Array.prototype,Uo=Bo.map,Vo=Bo.slice,Yo={name:"implicit"};function Wo(){var a,o,t=function t(){var a=zi(),o=[],i=[],r=Yo;function s(t){var e=t+"",n=a.get(e);if(!n){if(r!==Yo)return r;a.set(e,n=o.push(t))}return i[(n-1)%i.length]}return s.domain=function(t){if(!arguments.length)return o.slice();o=[],a=zi();for(var e,n,i=-1,r=t.length;++i<r;)a.has(n=(e=t[i])+"")||a.set(n,o.push(e));return s},s.range=function(t){return arguments.length?(i=Vo.call(t),s):i.slice()},s.unknown=function(t){return arguments.length?(r=t,s):r},s.copy=function(){return t(o,i).unknown(r)},jo.apply(s,arguments),s}().unknown(void 0),s=t.domain,l=t.range,u=[0,1],c=!1,h=0,f=0,d=.5;function e(){var t=s().length,e=u[1]<u[0],n=u[e-0],i=u[1-e];a=(i-n)/Math.max(1,t-h+2*f),c&&(a=Math.floor(a)),n+=(i-n-a*(t-h))*d,o=a*(1-h),c&&(n=Math.round(n),o=Math.round(o));var r=function(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(r);++i<r;)a[i]=t+i*n;return a}(t).map(function(t){return n+a*t});return l(e?r.reverse():r)}return delete t.unknown,t.domain=function(t){return arguments.length?(s(t),e()):s()},t.range=function(t){return arguments.length?(u=[+t[0],+t[1]],e()):u.slice()},t.rangeRound=function(t){return u=[+t[0],+t[1]],c=!0,e()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(t){return arguments.length?(c=!!t,e()):c},t.padding=function(t){return arguments.length?(h=Math.min(1,f=+t),e()):h},t.paddingInner=function(t){return arguments.length?(h=Math.min(1,t),e()):h},t.paddingOuter=function(t){return arguments.length?(f=+t,e()):f},t.align=function(t){return arguments.length?(d=Math.max(0,Math.min(1,t)),e()):d},t.copy=function(){return Wo(s(),u).round(c).paddingInner(h).paddingOuter(f).align(d)},jo.apply(e(),arguments)}function Go(){return function t(e){var n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return t(n())},e}(Wo.apply(null,arguments).paddingInner(1))}function Xo(t){return+t}var Zo=[0,1];function $o(t){return t}function Ko(e,n){return(n-=e=+e)?function(t){return(t-e)/n}:(t=isNaN(n)?NaN:.5,function(){return t});var t}function Qo(t){var e,n=t[0],i=t[t.length-1];return i<n&&(e=n,n=i,i=e),function(t){return Math.max(n,Math.min(i,t))}}function Jo(t,e,n){var i=t[0],r=t[1],a=e[0],o=e[1];return a=r<i?(i=Ko(r,i),n(o,a)):(i=Ko(i,r),n(a,o)),function(t){return a(i(t))}}function ts(n,t,e){var i=Math.min(n.length,t.length)-1,r=new Array(i),a=new Array(i),o=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<i;)r[o]=Ko(n[o],n[o+1]),a[o]=e(t[o],t[o+1]);return function(t){var e=Gi(n,t,1,i)-1;return a[e](r[e](t))}}function es(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ns(){var n,i,e,r,a,o,s=Zo,l=Zo,u=no,c=$o;function h(){return r=2<Math.min(s.length,l.length)?ts:Jo,a=o=null,f}function f(t){return isNaN(t=+t)?e:(a||(a=r(s.map(n),l,u)))(n(c(t)))}return f.invert=function(t){return c(i((o||(o=r(l,s.map(n),Qa)))(t)))},f.domain=function(t){return arguments.length?(s=Uo.call(t,Xo),c===$o||(c=Qo(s)),h()):s.slice()},f.range=function(t){return arguments.length?(l=Vo.call(t),h()):l.slice()},f.rangeRound=function(t){return l=Vo.call(t),u=io,h()},f.clamp=function(t){return arguments.length?(c=t?Qo(s):$o,f):c!==$o},f.interpolate=function(t){return arguments.length?(u=t,h()):u},f.unknown=function(t){return arguments.length?(e=t,f):e},function(t,e){return n=t,i=e,h()}}function is(t,e){return ns()(t,e)}function rs(t,e,n,i){var r,a,o,s,l,u,c=cr(t,e,n);switch((i=$(null==i?",f":i)).type){case"s":var h=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN((l=c,u=h,r=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(G(u)/3)))-G(Math.abs(l)))))||(i.precision=r),it(i,h);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN((o=c,s=Math.max(Math.abs(t),Math.abs(e)),o=Math.abs(o),s=Math.abs(s)-o,r=Math.max(0,G(s)-G(o))+1))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN((a=c,r=Math.max(0,-G(Math.abs(a)))))||(i.precision=r-2*("%"===i.type))}return nt(i)}function as(){var s,l,t=is($o,$o);return t.copy=function(){return es(t,as())},jo.apply(t,arguments),l=(s=t).domain,s.ticks=function(t){var e=l();return lr(e[0],e[e.length-1],null==t?10:t)},s.tickFormat=function(t,e){var n=l();return rs(n[0],n[n.length-1],null==t?10:t,e)},s.nice=function(t){null==t&&(t=10);var e,n=l(),i=0,r=n.length-1,a=n[i],o=n[r];return o<a&&(e=a,a=o,o=e,e=i,i=r,r=e),0<(e=ur(a,o,t))?e=ur(a=Math.floor(a/e)*e,o=Math.ceil(o/e)*e,t):e<0&&(e=ur(a=Math.ceil(a*e)/e,o=Math.floor(o*e)/e,t)),0<e?(n[i]=Math.floor(a/e)*e,n[r]=Math.ceil(o/e)*e,l(n)):e<0&&(n[i]=Math.ceil(a*e)/e,n[r]=Math.floor(o*e)/e,l(n)),s},s}function os(t,e){var n,i=0,r=(t=t.slice()).length-1,a=t[i],o=t[r];return o<a&&(n=i,i=r,r=n,n=a,a=o,o=n),t[i]=e.floor(a),t[r]=e.ceil(o),t}function ss(t){return Math.log(t)}function ls(t){return Math.exp(t)}function us(t){return-Math.log(-t)}function cs(t){return-Math.exp(-t)}function hs(t){return isFinite(t)?+("1e"+t):t<0?0:t}function fs(e){return function(t){return-e(-t)}}function ds(t){var f,d,r=t(ss,ls),_=r.domain,p=10;function e(){var e,n;return f=(n=p)===Math.E?Math.log:10===n&&Math.log10||2===n&&Math.log2||(n=Math.log(n),function(t){return Math.log(t)/n}),d=10===(e=p)?hs:e===Math.E?Math.exp:function(t){return Math.pow(e,t)},_()[0]<0?(f=fs(f),d=fs(d),t(us,cs)):t(ss,ls),r}return r.base=function(t){return arguments.length?(p=+t,e()):p},r.domain=function(t){return arguments.length?(_(t),e()):_()},r.ticks=function(t){var e,n=_(),i=n[0],r=n[n.length-1];(e=r<i)&&(l=i,i=r,r=l);var a,o,s,l=f(i),u=f(r),c=null==t?10:+t,h=[];if(!(p%1)&&u-l<c){if(l=Math.round(l)-1,u=Math.round(u)+1,0<i){for(;l<u;++l)for(o=1,a=d(l);o<p;++o)if(!((s=a*o)<i)){if(r<s)break;h.push(s)}}else for(;l<u;++l)for(o=p-1,a=d(l);1<=o;--o)if(!((s=a*o)<i)){if(r<s)break;h.push(s)}}else h=lr(l,u,Math.min(u-l,c)).map(d);return e?h.reverse():h},r.tickFormat=function(t,n){if(null==n&&(n=10===p?".0e":","),"function"!=typeof n&&(n=nt(n)),t===1/0)return n;null==t&&(t=10);var i=Math.max(1,p*t/r.ticks().length);return function(t){var e=t/d(Math.round(f(t)));return e*p<p-.5&&(e*=p),e<=i?n(t):""}},r.nice=function(){return _(os(_(),{floor:function(t){return d(Math.floor(f(t)))},ceil:function(t){return d(Math.ceil(f(t)))}}))},r}function _s(){var t=ds(ns()).domain([1,10]);return t.copy=function(){return es(t,_s()).base(t.base())},jo.apply(t,arguments),t}var ps=1e3,gs=60*ps,ms=60*gs,vs=24*ms,ys=7*vs,xs=30*vs,bs=365*vs;function ws(t){return new Date(t)}function ks(t){return t instanceof Date?+t:+new Date(+t)}function Ms(){return jo.apply(function t(o,e,n,i,r,a,s,l,u){var c=is($o,$o),h=c.invert,f=c.domain,d=u(".%L"),_=u(":%S"),p=u("%I:%M"),g=u("%I %p"),m=u("%a %d"),v=u("%b %d"),y=u("%B"),x=u("%Y"),b=[[s,1,ps],[s,5,5*ps],[s,15,15*ps],[s,30,30*ps],[a,1,gs],[a,5,5*gs],[a,15,15*gs],[a,30,30*gs],[r,1,ms],[r,3,3*ms],[r,6,6*ms],[r,12,12*ms],[i,1,vs],[i,2,2*vs],[n,1,ys],[e,1,xs],[e,3,3*xs],[o,1,bs]];function w(t){return(s(t)<t?d:a(t)<t?_:r(t)<t?p:i(t)<t?g:e(t)<t?n(t)<t?m:v:o(t)<t?y:x)(t)}function k(t,e,n,i){if(null==t&&(t=10),"number"==typeof t){var r=Math.abs(n-e)/t,a=Wi(function(t){return t[2]}).right(b,r);t=a===b.length?(i=cr(e/bs,n/bs,t),o):a?(i=(a=b[r/b[a-1][2]<b[a][2]/r?a-1:a])[1],a[0]):(i=Math.max(cr(e,n,t),1),l)}return null==i?t:t.every(i)}return c.invert=function(t){return new Date(h(t))},c.domain=function(t){return arguments.length?f(Uo.call(t,ks)):f().map(ws)},c.ticks=function(t,e){var n,i=f(),r=i[0],a=i[i.length-1],o=a<r;return o&&(n=r,r=a,a=n),n=(n=k(t,r,a,e))?n.range(r,a+1):[],o?n.reverse():n},c.tickFormat=function(t,e){return null==e?w:u(e)},c.nice=function(t,e){var n=f();return(t=k(t,n[0],n[n.length-1],e))?f(os(n,t)):c},c.copy=function(){return es(c,t(o,e,n,i,r,a,s,l,u))},c}(wt,bt,vt,gt,pt,_t,dt,ft,Ot).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Es(t,e){var n=t.label||t.data.label;return _n.data_trans_bind_data_points?n:e}function As(t,e){var n=xi.facets_show&&!xi.facet_by_series?"-"+t.facet.index:"";return _n.data_trans_bind_series?t.name+n:e}function Cs(t){for(var e,n,i=-1,r=t.length,a=t[r-1],o=a[0],s=a[1],l=0;++i<r;)e=o,n=s,e-=o=(a=t[i])[0],n-=s=a[1],l+=Math.sqrt(e*e+n*n);return l}var Ss={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},Ts=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function Ls(t){return 48<=t&&t<=57}function Is(t){this.index=0,this.path=t,this.max=t.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function Ns(t){for(;t.index<t.max&&(10===(e=t.path.charCodeAt(t.index))||13===e||8232===e||8233===e||32===e||9===e||11===e||12===e||160===e||5760<=e&&0<=Ts.indexOf(e));)t.index++;var e}function Os(t){var e,n=t.index,i=n,r=t.max,a=!1,o=!1,s=!1,l=!1;if(r<=i)t.err="SvgPath: missed param (at pos "+i+")";else if(43!==(e=t.path.charCodeAt(i))&&45!==e||(e=++i<r?t.path.charCodeAt(i):0),Ls(e)||46===e){if(46!==e){if(a=48===e,e=++i<r?t.path.charCodeAt(i):0,a&&i<r&&e&&Ls(e))return void(t.err="SvgPath: numbers started with `0` such as `09` are ilegal (at pos "+n+")");for(;i<r&&Ls(t.path.charCodeAt(i));)i++,o=!0;e=i<r?t.path.charCodeAt(i):0}if(46===e){for(l=!0,i++;Ls(t.path.charCodeAt(i));)i++,s=!0;e=i<r?t.path.charCodeAt(i):0}if(101===e||69===e){if(l&&!o&&!s)return void(t.err="SvgPath: invalid float exponent (at pos "+i+")");if(43!==(e=++i<r?t.path.charCodeAt(i):0)&&45!==e||i++,!(i<r&&Ls(t.path.charCodeAt(i))))return void(t.err="SvgPath: invalid float exponent (at pos "+i+")");for(;i<r&&Ls(t.path.charCodeAt(i));)i++}t.index=i,t.param=parseFloat(t.path.slice(n,i))+0}else t.err="SvgPath: param should start with 0..9 or `.` (at pos "+i+")"}function Ps(t){var e,n;n=(e=t.path[t.segmentStart]).toLowerCase();var i=t.data;if("m"===n&&2<i.length&&(t.result.push([e,i[0],i[1]]),i=i.slice(2),n="l",e="m"===e?"l":"L"),"r"===n)t.result.push([e].concat(i));else for(;i.length>=Ss[n]&&(t.result.push([e].concat(i.splice(0,Ss[n]))),Ss[n]););}function Fs(t){var e,n,i,r=t.max;if(t.segmentStart=t.index,function(t){switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}(t.path.charCodeAt(t.index)))if(n=Ss[t.path[t.index].toLowerCase()],t.index++,Ns(t),t.data=[],n){for(e=!1;;){for(i=n;0<i;i--){if(Os(t),t.err.length)return;t.data.push(t.param),Ns(t),e=!1,t.index<r&&44===t.path.charCodeAt(t.index)&&(t.index++,Ns(t),e=!0)}if(!e){if(t.index>=t.max)break;if(!(48<=(a=t.path.charCodeAt(t.index))&&a<=57||43===a||45===a||46===a))break}}var a;Ps(t)}else Ps(t);else t.err="SvgPath: bad command "+t.path[t.index]+" (at pos "+t.index+")"}var zs=function(t){var e=new Is(t),n=e.max;for(Ns(e);e.index<n&&!e.err.length;)Fs(e);return e.err.length?e.result=[]:e.result.length&&("mM".indexOf(e.result[0][0])<0?(e.err="SvgPath: string should start with `M` or `m`",e.result=[]):e.result[0][0]="M"),{err:e.err,segments:e.result}};function Ds(){if(!(this instanceof Ds))return new Ds;this.queue=[],this.cache=null}Ds.prototype.matrix=function(t){return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]||(this.cache=null,this.queue.push(t)),this},Ds.prototype.translate=function(t,e){return 0===t&&0===e||(this.cache=null,this.queue.push([1,0,0,1,t,e])),this},Ds.prototype.scale=function(t,e){return 1===t&&1===e||(this.cache=null,this.queue.push([t,0,0,e,0,0])),this},Ds.prototype.rotate=function(t,e,n){var i,r,a;return 0!==t&&(this.translate(e,n),i=t*Math.PI/180,r=Math.cos(i),a=Math.sin(i),this.queue.push([r,a,-a,r,0,0]),this.cache=null,this.translate(-e,-n)),this},Ds.prototype.skewX=function(t){return 0!==t&&(this.cache=null,this.queue.push([1,0,Math.tan(t*Math.PI/180),1,0,0])),this},Ds.prototype.skewY=function(t){return 0!==t&&(this.cache=null,this.queue.push([1,Math.tan(t*Math.PI/180),0,1,0,0])),this},Ds.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],1===this.queue.length)return this.cache;for(var t=1;t<this.queue.length;t++)this.cache=(e=this.cache,n=this.queue[t],[e[0]*n[0]+e[2]*n[1],e[1]*n[0]+e[3]*n[1],e[0]*n[2]+e[2]*n[3],e[1]*n[2]+e[3]*n[3],e[0]*n[4]+e[2]*n[5]+e[4],e[1]*n[4]+e[3]*n[5]+e[5]]);var e,n;return this.cache},Ds.prototype.calc=function(t,e,n){var i;return this.queue.length?(this.cache||(this.cache=this.toArray()),[t*(i=this.cache)[0]+e*i[2]+(n?0:i[4]),t*i[1]+e*i[3]+(n?0:i[5])]):[t,e]};var Rs=Ds,Hs={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},qs=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,js=/[\s,]+/,Bs=2*Math.PI;function Us(t,e,n,i){var r=t*i-e*n<0?-1:1,a=(t*n+e*i)/(Math.sqrt(t*t+e*e)*Math.sqrt(t*t+e*e));return 1<a&&(a=1),a<-1&&(a=-1),r*Math.acos(a)}var Vs=function(t,e,n,i,r,a,o,s,l){var u=Math.sin(l*Bs/360),c=Math.cos(l*Bs/360),h=c*(t-n)/2+u*(e-i)/2,f=-u*(t-n)/2+c*(e-i)/2;if(0===h&&0===f)return[];if(0===o||0===s)return[];o=Math.abs(o),s=Math.abs(s);var d=h*h/(o*o)+f*f/(s*s);1<d&&(o*=Math.sqrt(d),s*=Math.sqrt(d));var _,p,g,m,v,y,x,b=function(t,e,n,i,r,a,o,s,l,u){var c=u*(t-n)/2+l*(e-i)/2,h=-l*(t-n)/2+u*(e-i)/2,f=o*o,d=s*s,_=c*c,p=h*h,g=f*d-f*p-d*_;g<0&&(g=0),g/=f*p+d*_;var m=(g=Math.sqrt(g)*(r===a?-1:1))*o/s*h,v=g*-s/o*c,y=u*m-l*v+(t+n)/2,x=l*m+u*v+(e+i)/2,b=(c-m)/o,w=(h-v)/s,k=(-c-m)/o,M=(-h-v)/s,E=Us(1,0,b,w),A=Us(b,w,k,M);return 0===a&&0<A&&(A-=Bs),1===a&&A<0&&(A+=Bs),[y,x,E,A]}(t,e,n,i,r,a,o,s,u,c),w=[],k=b[2],M=b[3],E=Math.max(Math.ceil(Math.abs(M)/(Bs/4)),1);M/=E;for(var A=0;A<E;A++)w.push((_=k,p=M,void 0,g=4/3*Math.tan(p/4),m=Math.cos(_),v=Math.sin(_),y=Math.cos(_+p),x=Math.sin(_+p),[m,v,m-v*g,v+m*g,y+x*g,x-y*g,y,x])),k+=M;return w.map(function(t){for(var e=0;e<t.length;e+=2){var n=t[e+0],i=t[e+1],r=c*(n*=o)-u*(i*=s),a=u*n+c*i;t[e+0]=r+b[0],t[e+1]=a+b[1]}return t})},Ys=1e-10,Ws=Math.PI/180;function Gs(t,e,n){if(!(this instanceof Gs))return new Gs(t,e,n);this.rx=t,this.ry=e,this.ax=n}Gs.prototype.transform=function(t){var e=Math.cos(this.ax*Ws),n=Math.sin(this.ax*Ws),i=[this.rx*(t[0]*e+t[2]*n),this.rx*(t[1]*e+t[3]*n),this.ry*(-t[0]*n+t[2]*e),this.ry*(-t[1]*n+t[3]*e)],r=i[0]*i[0]+i[2]*i[2],a=i[1]*i[1]+i[3]*i[3],o=((i[0]-i[3])*(i[0]-i[3])+(i[2]+i[1])*(i[2]+i[1]))*((i[0]+i[3])*(i[0]+i[3])+(i[2]-i[1])*(i[2]-i[1])),s=(r+a)/2;if(o<Ys*s)return this.rx=this.ry=Math.sqrt(s),this.ax=0,this;var l=i[0]*i[1]+i[2]*i[3],u=s+(o=Math.sqrt(o))/2,c=s-o/2;return this.ax=Math.abs(l)<Ys&&Math.abs(u-a)<Ys?90:180*Math.atan(Math.abs(l)>Math.abs(u-a)?(u-r)/l:l/(u-a))/Math.PI,0<=this.ax?(this.rx=Math.sqrt(u),this.ry=Math.sqrt(c)):(this.ax+=90,this.rx=Math.sqrt(c),this.ry=Math.sqrt(u)),this},Gs.prototype.isDegenerate=function(){return this.rx<Ys*this.ry||this.ry<Ys*this.rx};var Xs=Gs;function Zs(t){if(!(this instanceof Zs))return new Zs(t);var e=zs(t);this.segments=e.segments,this.err=e.err,this.__stack=[]}Zs.prototype.__matrix=function(c){var h,f=this;c.queue.length&&this.iterate(function(t,e,n,i){var r,a,o,s;switch(t[0]){case"v":a=0===(r=c.calc(0,t[1],!0))[0]?["v",r[1]]:["l",r[0],r[1]];break;case"V":a=(r=c.calc(n,t[1],!1))[0]===c.calc(n,i,!1)[0]?["V",r[1]]:["L",r[0],r[1]];break;case"h":a=0===(r=c.calc(t[1],0,!0))[1]?["h",r[0]]:["l",r[0],r[1]];break;case"H":a=(r=c.calc(t[1],i,!1))[1]===c.calc(n,i,!1)[1]?["H",r[0]]:["L",r[0],r[1]];break;case"a":case"A":var l=c.toArray(),u=Xs(t[1],t[2],t[3]).transform(l);if(l[0]*l[3]-l[1]*l[2]<0&&(t[5]=t[5]?"0":"1"),r=c.calc(t[6],t[7],"a"===t[0]),"A"===t[0]&&t[6]===n&&t[7]===i||"a"===t[0]&&0===t[6]&&0===t[7]){a=["a"===t[0]?"l":"L",r[0],r[1]];break}a=u.isDegenerate()?["a"===t[0]?"l":"L",r[0],r[1]]:[t[0],u.rx,u.ry,u.ax,t[4],t[5],r[0],r[1]];break;case"m":s=0<e,a=["m",(r=c.calc(t[1],t[2],s))[0],r[1]];break;default:for(a=[o=t[0]],s=o.toLowerCase()===o,h=1;h<t.length;h+=2)r=c.calc(t[h],t[h+1],s),a.push(r[0],r[1])}f.segments[e]=a},!0)},Zs.prototype.__evaluateStack=function(){var t,e;if(this.__stack.length){if(1===this.__stack.length)return this.__matrix(this.__stack[0]),void(this.__stack=[]);for(t=Rs(),e=this.__stack.length;0<=--e;)t.matrix(this.__stack[e].toArray());this.__matrix(t),this.__stack=[]}},Zs.prototype.toString=function(){var t,e,n=[];this.__evaluateStack();for(var i=0;i<this.segments.length;i++)e=this.segments[i][0],t=0<i&&"m"!==e&&"M"!==e&&e===this.segments[i-1][0],n=n.concat(t?this.segments[i].slice(1):this.segments[i]);return n.join(" ").replace(/ ?([achlmqrstvz]) ?/gi,"$1").replace(/ \-/g,"-").replace(/zm/g,"z m")},Zs.prototype.translate=function(t,e){return this.__stack.push(Rs().translate(t,e||0)),this},Zs.prototype.scale=function(t,e){return this.__stack.push(Rs().scale(t,e||0===e?e:t)),this},Zs.prototype.rotate=function(t,e,n){return this.__stack.push(Rs().rotate(t,e||0,n||0)),this},Zs.prototype.skewX=function(t){return this.__stack.push(Rs().skewX(t)),this},Zs.prototype.skewY=function(t){return this.__stack.push(Rs().skewY(t)),this},Zs.prototype.matrix=function(t){return this.__stack.push(Rs().matrix(t)),this},Zs.prototype.transform=function(t){return t.trim()&&this.__stack.push((e=t,r=new Rs,e.split(qs).forEach(function(t){if(t.length)if(void 0===Hs[t])switch(i=t.split(js).map(function(t){return+t||0}),n){case"matrix":return void(6===i.length&&r.matrix(i));case"scale":return void(1===i.length?r.scale(i[0],i[0]):2===i.length&&r.scale(i[0],i[1]));case"rotate":return void(1===i.length?r.rotate(i[0],0,0):3===i.length&&r.rotate(i[0],i[1],i[2]));case"translate":return void(1===i.length?r.translate(i[0],0):2===i.length&&r.translate(i[0],i[1]));case"skewX":return void(1===i.length&&r.skewX(i[0]));case"skewY":return void(1===i.length&&r.skewY(i[0]))}else n=t}),r)),this;var e,n,i,r},Zs.prototype.round=function(i){var e,r=0,a=0,o=0,s=0;return i=i||0,this.__evaluateStack(),this.segments.forEach(function(n){var t=n[0].toLowerCase()===n[0];switch(n[0]){case"H":case"h":return t&&(n[1]+=o),o=n[1]-n[1].toFixed(i),void(n[1]=+n[1].toFixed(i));case"V":case"v":return t&&(n[1]+=s),s=n[1]-n[1].toFixed(i),void(n[1]=+n[1].toFixed(i));case"Z":case"z":return o=r,void(s=a);case"M":case"m":return t&&(n[1]+=o,n[2]+=s),o=n[1]-n[1].toFixed(i),s=n[2]-n[2].toFixed(i),r=o,a=s,n[1]=+n[1].toFixed(i),void(n[2]=+n[2].toFixed(i));case"A":case"a":return t&&(n[6]+=o,n[7]+=s),o=n[6]-n[6].toFixed(i),s=n[7]-n[7].toFixed(i),n[1]=+n[1].toFixed(i),n[2]=+n[2].toFixed(i),n[3]=+n[3].toFixed(i+2),n[6]=+n[6].toFixed(i),void(n[7]=+n[7].toFixed(i));default:return e=n.length,t&&(n[e-2]+=o,n[e-1]+=s),o=n[e-2]-n[e-2].toFixed(i),s=n[e-1]-n[e-1].toFixed(i),void n.forEach(function(t,e){e&&(n[e]=+n[e].toFixed(i))})}}),this},Zs.prototype.iterate=function(r,t){var e,n,i,a=this.segments,o={},s=!1,l=0,u=0,c=0,h=0;if(t||this.__evaluateStack(),a.forEach(function(t,e){var n=r(t,e,l,u);Array.isArray(n)&&(o[e]=n,s=!0);var i=t[0]===t[0].toLowerCase();switch(t[0]){case"m":case"M":return l=t[1]+(i?l:0),u=t[2]+(i?u:0),c=l,void(h=u);case"h":case"H":return void(l=t[1]+(i?l:0));case"v":case"V":return void(u=t[1]+(i?u:0));case"z":case"Z":return l=c,void(u=h);default:l=t[t.length-2]+(i?l:0),u=t[t.length-1]+(i?u:0)}}),!s)return this;for(i=[],e=0;e<a.length;e++)if(void 0!==o[e])for(n=0;n<o[e].length;n++)i.push(o[e][n]);else i.push(a[e]);return this.segments=i,this},Zs.prototype.abs=function(){return this.iterate(function(t,e,n,i){var r,a=t[0],o=a.toUpperCase();if(a!==o)switch(t[0]=o,a){case"v":return void(t[1]+=i);case"a":return t[6]+=n,void(t[7]+=i);default:for(r=1;r<t.length;r++)t[r]+=r%2?n:i}},!0),this},Zs.prototype.rel=function(){return this.iterate(function(t,e,n,i){var r,a=t[0],o=a.toLowerCase();if(a!==o&&(0!==e||"M"!==a))switch(t[0]=o,a){case"V":return void(t[1]-=i);case"A":return t[6]-=n,void(t[7]-=i);default:for(r=1;r<t.length;r++)t[r]-=r%2?n:i}},!0),this},Zs.prototype.unarc=function(){return this.iterate(function(t,e,n,i){var r,a,o,s=[],l=t[0];return"A"!==l&&"a"!==l?null:(o="a"===l?(a=n+t[6],i+t[7]):(a=t[6],t[7]),0===(r=Vs(n,i,a,o,t[4],t[5],t[1],t[2],t[3])).length?[["a"===t[0]?"l":"L",t[6],t[7]]]:(r.forEach(function(t){s.push(["C",t[2],t[3],t[4],t[5],t[6],t[7]])}),s))}),this},Zs.prototype.unshort=function(){var s,l,u,c,h,f=this.segments;return this.iterate(function(t,e,n,i){var r,a=t[0],o=a.toUpperCase();e&&("T"===o?(r="t"===a,u=f[e-1],l="Q"===u[0]?(s=u[1]-n,u[2]-i):"q"===u[0]?(s=u[1]-u[3],u[2]-u[4]):s=0,c=-s,h=-l,r||(c+=n,h+=i),f[e]=[r?"q":"Q",c,h,t[1],t[2]]):"S"===o&&(r="s"===a,u=f[e-1],l="C"===u[0]?(s=u[3]-n,u[4]-i):"c"===u[0]?(s=u[3]-u[5],u[4]-u[6]):s=0,c=-s,h=-l,r||(c+=n,h+=i),f[e]=[r?"c":"C",c,h,t[1],t[2],t[3],t[4]]))}),this};var $s=Zs,Ks={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},Qs=/([astvzqmhlc])([^astvzqmhlc]*)/gi;function Js(t){var a=[];return t.replace(Qs,function(t,e,n){var i,r=e.toLowerCase();for(n=(i=n.match(tl))?i.map(Number):[],"m"===r&&2<n.length&&(a.push([e].concat(n.splice(0,2))),r="l",e="m"===e?"l":"L");0<=n.length;){if(n.length===Ks[r])return n.unshift(e),a.push(n);if(n.length<Ks[r])throw new Error("malformed path data");a.push([e].concat(n.splice(0,Ks[r])))}}),a}var tl=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function el(t,e,n,i,r,a,o,s){return new nl(t,e,n,i,r,a,o,s)}function nl(t,e,n,i,r,a,o,s){this.a={x:t,y:e},this.b={x:n,y:i},this.c={x:r,y:a},this.d={x:o,y:s},null!=o&&null!=s?(this.getArcLength=dl,this.getPoint=sl,this.getDerivative=rl):(this.getArcLength=ll,this.getPoint=ol,this.getDerivative=il),this.init()}function il(t,e,n){return{x:2*(1-n)*(t[1]-t[0])+2*n*(t[2]-t[1]),y:2*(1-n)*(e[1]-e[0])+2*n*(e[2]-e[1])}}function rl(t,e,n){return ol([3*(t[1]-t[0]),3*(t[2]-t[1]),3*(t[3]-t[2])],[3*(e[1]-e[0]),3*(e[2]-e[1]),3*(e[3]-e[2])],n)}function al(t,e,n,i,r){for(var a=1,o=t/e,s=(t-n(i,r,o))/e;.001<a;){var l=n(i,r,o+s),u=n(i,r,o-s),c=Math.abs(t-l)/e,h=Math.abs(t-u)/e;c<a?(a=c,o+=s):h<a?(a=h,o-=s):s/=2}return o}function ol(t,e,n){return{x:(1-n)*(1-n)*t[0]+2*(1-n)*n*t[1]+n*n*t[2],y:(1-n)*(1-n)*e[0]+2*(1-n)*n*e[1]+n*n*e[2]}}function sl(t,e,n){return{x:(1-n)*(1-n)*(1-n)*t[0]+3*(1-n)*(1-n)*n*t[1]+3*(1-n)*n*n*t[2]+n*n*n*t[3],y:(1-n)*(1-n)*(1-n)*e[0]+3*(1-n)*(1-n)*n*e[1]+3*(1-n)*n*n*e[2]+n*n*n*e[3]}}function ll(t,e,n){void 0===n&&(n=1);var i=t[0]-2*t[1]+t[2],r=e[0]-2*e[1]+e[2],a=2*t[1]-2*t[0],o=2*e[1]-2*e[0],s=4*(i*i+r*r),l=4*(i*a+r*o),u=a*a+o*o;if(0===s)return n*Math.sqrt(Math.pow(t[2]-t[0],2)+Math.pow(e[2]-e[0],2));var c=l/(2*s),h=n+c,f=u/s-c*c;return Math.sqrt(s)/2*(h*Math.sqrt(h*h+f)-c*Math.sqrt(c*c+f)+f*Math.log(Math.abs((h+Math.sqrt(h*h+f))/(c+Math.sqrt(c*c+f)))))}nl.prototype={constructor:nl,init:function(){this.length=this.getArcLength([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y])},getTotalLength:function(){return this.length},getPointAtLength:function(t){var e=al(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]);return this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],e)},getTangentAtLength:function(t){var e=al(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),n=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],e),i=Math.sqrt(n.x*n.x+n.y*n.y);return 0<i?{x:n.x/i,y:n.y/i}:{x:0,y:0}},getPropertiesAtLength:function(t){var e,n=al(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),i=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],n),r=Math.sqrt(i.x*i.x+i.y*i.y);e=0<r?{x:i.x/r,y:i.y/r}:{x:0,y:0};var a=this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],n);return{x:a.x,y:a.y,tangentX:e.x,tangentY:e.y}}};var ul=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],cl=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],hl=[[1],[1,1],[1,2,1],[1,3,3,1]];function fl(t,e,n){var i,r,a,o,s=n.length-1;if(0===s)return 0;if(0===t){for(a=r=0;a<=s;a++)r+=(o=a,hl[s][o]*Math.pow(1-e,s-a)*Math.pow(e,a)*n[a]);return r}for(i=new Array(s),a=0;a<s;a++)i[a]=s*(n[a+1]-n[a]);return fl(t-1,e,i)}function dl(t,e,n){var i,r,a,o;void 0===n&&(n=1);var s,l,u,c,h;for(i=n/2,a=r=0;a<20;a++)o=i*ul[20][a]+i,r+=cl[20][a]*(s=e,void 0,u=fl(1,l=o,t),c=fl(1,l,s),h=u*u+c*c,Math.sqrt(h));return i*r}var _l=2*Math.PI;function pl(t,e,n,i){var r=t*n+e*i;return 1<r&&(r=1),r<-1&&(r=-1),(t*i-e*n<0?-1:1)*Math.acos(r)}function gl(t,e,o,s,n,i,r,a,l){var u=Math.sin(n*_l/360),c=Math.cos(n*_l/360),h=c*(t-a)/2+u*(e-l)/2,f=-u*(t-a)/2+c*(e-l)/2;if(0===h&&0===f)return[];if(0===o||0===s)return[];o=Math.abs(o),s=Math.abs(s);var d=h*h/(o*o)+f*f/(s*s);1<d&&(o*=Math.sqrt(d),s*=Math.sqrt(d));var _,p,g,m,v,y,x,b=function(t,e,n,i,r,a,o,s,l,u){var c=u*(t-n)/2+l*(e-i)/2,h=-l*(t-n)/2+u*(e-i)/2,f=o*o,d=s*s,_=c*c,p=h*h,g=f*d-f*p-d*_;g<0&&(g=0),g/=f*p+d*_;var m=(g=Math.sqrt(g)*(r===a?-1:1))*o/s*h,v=g*-s/o*c,y=u*m-l*v+(t+n)/2,x=l*m+u*v+(e+i)/2,b=(c-m)/o,w=(h-v)/s,k=(-c-m)/o,M=(-h-v)/s,E=pl(1,0,b,w),A=pl(b,w,k,M);return 0===a&&0<A&&(A-=_l),1===a&&A<0&&(A+=_l),[y,x,E,A]}(t,e,a,l,i,r,o,s,u,c),w=[],k=b[2],M=b[3],E=Math.max(Math.ceil(Math.abs(M)/(_l/4)),1);M/=E;for(var A=0;A<E;A++)w.push((_=k,p=M,void 0,g=4/3*Math.tan(p/4),m=Math.cos(_),v=Math.sin(_),y=Math.cos(_+p),x=Math.sin(_+p),[m,v,m-v*g,v+m*g,y+x*g,x-y*g,y,x])),k+=M;return w.map(function(t){for(var e=0;e<t.length;e+=2){var n=t[e+0],i=t[e+1],r=c*(n*=o)-u*(i*=s),a=u*n+c*i;t[e+0]=r+b[0],t[e+1]=a+b[1]}return t})}function ml(t,e,n,i,r,a,o,s,l){return new vl(t,e,n,i,r,a,o,s,l)}function vl(t,e,n,i,r,a,o,s,l){var u=0,c=[],h=[];gl(t,e,n,i,r,a,o,s,l).forEach(function(t){var e=new el(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]),n=e.getTotalLength();u+=n,c.push(n),h.push(e)}),this.length=u,this.partialLengths=c,this.curves=h}function yl(t,e,n,i){return new xl(t,e,n,i)}function xl(t,e,n,i){this.x0=t,this.x1=e,this.y0=n,this.y1=i}function bl(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function wl(t,e,n){return[t[0]+(e[0]-t[0])*n,t[1]+(e[1]-t[1])*n]}function kl(t,n,i){var r=t.map(function(t,e){return i=t,r=n[e],function(n){return i.map(function(t,e){return t+n*(r[e]-t)})};var i,r});return function(e){var t=r.map(function(t){return t(e)});return i?"M"+t.join("L")+"Z":t}}function Ml(t){return"number"==typeof t&&isFinite(t)}function El(t){return function(t){for(var e=0;e<t.length-2;e++){var n=t[e],i=t[e+1],r=t[e+2];if(n[0]*(i[1]-r[1])+i[0]*(r[1]-n[1])+r[0]*(n[1]-i[1]))return!0}return!1}(t)?function(t){for(var e,n,i=-1,r=t.length,a=0,o=0,s=t[r-1],l=0;++i<r;)e=s,s=t[i],l+=n=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*n,o+=(e[1]+s[1])*n;return[a/(l*=3),o/l]}(t):[(t[0][0]+t[t.length-1][0])/2,(t[0][1]+t[t.length-1][1])/2]}vl.prototype={constructor:vl,init:function(){},getTotalLength:function(){return this.length},getPointAtLength:function(t){t<0?t=0:t>this.length&&(t=this.length);for(var e=this.partialLengths.length-1;this.partialLengths[e]>=t&&0<this.partialLengths[e];)e--;e<this.partialLengths.length-1&&e++;for(var n=0,i=0;i<e;i++)n+=this.partialLengths[i];return this.curves[e].getPointAtLength(t-n)},getTangentAtLength:function(t){t<0?t=0:t>this.length&&(t=this.length);for(var e=this.partialLengths.length-1;this.partialLengths[e]>=t&&0<this.partialLengths[e];)e--;e<this.partialLengths.length-1&&e++;for(var n=0,i=0;i<e;i++)n+=this.partialLengths[i];return this.curves[e].getTangentAtLength(t-n)},getPropertiesAtLength:function(t){var e=this.getTangentAtLength(t),n=this.getPointAtLength(t);return{x:n.x,y:n.y,tangentX:e.x,tangentY:e.y}}},xl.prototype.getTotalLength=function(){return Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2))},xl.prototype.getPointAtLength=function(t){var e=t/Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2)),n=(this.x1-this.x0)*e,i=(this.y1-this.y0)*e;return{x:this.x0+n,y:this.y0+i}},xl.prototype.getTangentAtLength=function(){var t=Math.sqrt((this.x1-this.x0)*(this.x1-this.x0)+(this.y1-this.y0)*(this.y1-this.y0));return{x:(this.x1-this.x0)/t,y:(this.y1-this.y0)/t}},xl.prototype.getPropertiesAtLength=function(t){var e=this.getPointAtLength(t),n=this.getTangentAtLength();return{x:e.x,y:e.y,tangentX:n.x,tangentY:n.y}};var Al='All shapes must be supplied as arrays of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).\nExample valid ways of supplying a shape would be:\n[[0, 0], [10, 0], [10, 10]]\n"M0,0 L10,0 L10,10Z"\n';function Cl(t,e){var n=new $s(t).abs();return function(t){var e=t.segments||[],n=[];if(!e.length||"M"!==e[0][0])return!1;for(var i=0;i<e.length;i++){var r=e[i],a=r[0],o=r[1],s=r[2];if("M"===a&&i||"Z"===a)break;if("M"===a||"L"===a)n.push([o,s]);else if("H"===a)n.push([o,n[n.length-1][1]]);else{if("V"!==a)return!1;n.push([n[n.length-1][0],o])}}return!!n.length&&{ring:n}}(n)||function(t,e){var n,i,r=(s=t,s.toString().split("M").map(function(t,e){return t=t.trim(),e&&t?"M"+t:t}).filter(function(t){return t}))[0],a=[],o=3;var s;if(!r)throw new TypeError(Al);i=function(t){if("undefined"!=typeof window&&window&&window.document)try{var e=window.document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttributeNS(null,"d",t),e}catch(t){}return function(t){var s=0,l=[],u=[];function c(t){if(!t)return null;for(var e,n,i=Js(t),r=[0,0],a=[0,0],o=0;o<i.length;o++)"M"===i[o][0]?(n=[(r=[i[o][1],i[o][2]])[0],r[1]],u.push(null)):"m"===i[o][0]?(n=[(r=[i[o][1]+r[0],i[o][2]+r[1]])[0],r[1]],u.push(null)):"L"===i[o][0]?(s+=Math.sqrt(Math.pow(r[0]-i[o][1],2)+Math.pow(r[1]-i[o][2],2)),u.push(new yl(r[0],i[o][1],r[1],i[o][2])),r=[i[o][1],i[o][2]]):"l"===i[o][0]?(s+=Math.sqrt(Math.pow(i[o][1],2)+Math.pow(i[o][2],2)),u.push(new yl(r[0],i[o][1]+r[0],r[1],i[o][2]+r[1])),r=[i[o][1]+r[0],i[o][2]+r[1]]):"H"===i[o][0]?(s+=Math.abs(r[0]-i[o][1]),u.push(new yl(r[0],i[o][1],r[1],r[1])),r[0]=i[o][1]):"h"===i[o][0]?(s+=Math.abs(i[o][1]),u.push(new yl(r[0],r[0]+i[o][1],r[1],r[1])),r[0]=i[o][1]+r[0]):"V"===i[o][0]?(s+=Math.abs(r[1]-i[o][1]),u.push(new yl(r[0],r[0],r[1],i[o][1])),r[1]=i[o][1]):"v"===i[o][0]?(s+=Math.abs(i[o][1]),u.push(new yl(r[0],r[0],r[1],r[1]+i[o][1])),r[1]=i[o][1]+r[1]):"z"===i[o][0]||"Z"===i[o][0]?(s+=Math.sqrt(Math.pow(n[0]-r[0],2)+Math.pow(n[1]-r[1],2)),u.push(new yl(r[0],n[0],r[1],n[1])),r=[n[0],n[1]]):"C"===i[o][0]?(e=new el(r[0],r[1],i[o][1],i[o][2],i[o][3],i[o][4],i[o][5],i[o][6]),s+=e.getTotalLength(),r=[i[o][5],i[o][6]],u.push(e)):"c"===i[o][0]?(e=new el(r[0],r[1],r[0]+i[o][1],r[1]+i[o][2],r[0]+i[o][3],r[1]+i[o][4],r[0]+i[o][5],r[1]+i[o][6]),s+=e.getTotalLength(),r=[i[o][5]+r[0],i[o][6]+r[1]],u.push(e)):"S"===i[o][0]?(e=0<o&&-1<["C","c","S","s"].indexOf(i[o-1][0])?new el(r[0],r[1],2*r[0]-i[o-1][i[o-1].length-4],2*r[1]-i[o-1][i[o-1].length-3],i[o][1],i[o][2],i[o][3],i[o][4]):new el(r[0],r[1],r[0],r[1],i[o][1],i[o][2],i[o][3],i[o][4]),s+=e.getTotalLength(),r=[i[o][3],i[o][4]],u.push(e)):"s"===i[o][0]?(e=0<o&&-1<["C","c","S","s"].indexOf(i[o-1][0])?new el(r[0],r[1],r[0]+e.d.x-e.c.x,r[1]+e.d.y-e.c.y,r[0]+i[o][1],r[1]+i[o][2],r[0]+i[o][3],r[1]+i[o][4]):new el(r[0],r[1],r[0],r[1],r[0]+i[o][1],r[1]+i[o][2],r[0]+i[o][3],r[1]+i[o][4]),s+=e.getTotalLength(),r=[i[o][3]+r[0],i[o][4]+r[1]],u.push(e)):"Q"===i[o][0]?(e=r[0]!=i[o][1]&&r[1]!=i[o][2]?new el(r[0],r[1],i[o][1],i[o][2],i[o][3],i[o][4]):new yl(i[o][1],i[o][3],i[o][2],i[o][4]),s+=e.getTotalLength(),u.push(e),r=[i[o][3],i[o][4]],a=[i[o][1],i[o][2]]):"q"===i[o][0]?(e=0!=i[o][1]||0!=i[o][2]?new el(r[0],r[1],r[0]+i[o][1],r[1]+i[o][2],r[0]+i[o][3],r[1]+i[o][4]):new yl(r[0]+i[o][1],r[0]+i[o][3],r[1]+i[o][2],r[1]+i[o][4]),s+=e.getTotalLength(),a=[r[0]+i[o][1],r[1]+i[o][2]],r=[i[o][3]+r[0],i[o][4]+r[1]],u.push(e)):"T"===i[o][0]?(e=0<o&&-1<["Q","q","T","t"].indexOf(i[o-1][0])?new el(r[0],r[1],2*r[0]-a[0],2*r[1]-a[1],i[o][1],i[o][2]):new yl(r[0],i[o][1],r[1],i[o][2]),u.push(e),s+=e.getTotalLength(),a=[2*r[0]-a[0],2*r[1]-a[1]],r=[i[o][1],i[o][2]]):"t"===i[o][0]?(e=0<o&&-1<["Q","q","T","t"].indexOf(i[o-1][0])?new el(r[0],r[1],2*r[0]-a[0],2*r[1]-a[1],r[0]+i[o][1],r[1]+i[o][2]):new yl(r[0],r[0]+i[o][1],r[1],r[1]+i[o][2]),s+=e.getTotalLength(),a=[2*r[0]-a[0],2*r[1]-a[1]],r=[i[o][1]+r[0],i[o][2]+r[0]],u.push(e)):"A"===i[o][0]?(e=new ml(r[0],r[1],i[o][1],i[o][2],i[o][3],i[o][4],i[o][5],i[o][6],i[o][7]),s+=e.getTotalLength(),r=[i[o][6],i[o][7]],u.push(e)):"a"===i[o][0]&&(e=new ml(r[0],r[1],i[o][1],i[o][2],i[o][3],i[o][4],i[o][5],r[0]+i[o][6],r[1]+i[o][7]),s+=e.getTotalLength(),r=[r[0]+i[o][6],r[1]+i[o][7]],u.push(e)),l.push(s);return c}c.getTotalLength=function(){return s},c.getPointAtLength=function(t){var e=n(t);return u[e.i].getPointAtLength(e.fraction)},c.getTangentAtLength=function(t){var e=n(t);return u[e.i].getTangentAtLength(e.fraction)},c.getPropertiesAtLength=function(t){var e=n(t);return u[e.i].getPropertiesAtLength(e.fraction)};var n=function(t){t<0?t=0:s<t&&(t=s);for(var e=l.length-1;l[e]>=t&&0<l[e];)e--;return{fraction:t-l[++e-1],i:e}};return c(t)}(t)}(r),n=i.getTotalLength(),e&&Ml(e)&&0<e&&(o=Math.max(o,Math.ceil(n/e)));for(var l=0;l<o;l++){var u=i.getPointAtLength(n*l/o);a.push([u.x,u.y])}return{ring:a,skipBisect:!0}}(n,e)}function Sl(t,e){for(var n=t.length+e,i=Cs(t)/e,r=0,a=0,o=i/2;t.length<n;){var s=t[r],l=t[(r+1)%t.length],u=bl(s,l);o<=a+u?(t.splice(r+1,0,u?wl(s,l,(o-a)/u):s.slice(0)),o+=i):(a+=u,r++)}}function Tl(t,e){var n,i,r,a;if("string"==typeof t){var o=Cl(t,e);t=o.ring,i=o.skipBisect}else if(!Array.isArray(t))throw new TypeError(Al);if(n=t.slice(0),!n.every(function(t){return Array.isArray(t)&&2<=t.length&&Ml(t[0])&&Ml(t[1])}))throw new TypeError(Al);return 1<n.length&&(r=n[0],a=n[n.length-1],bl(r,a)<1e-9)&&n.pop(),0<function(t){for(var e,n=-1,i=t.length,r=t[i-1],a=0;++n<i;)e=r,r=t[n],a+=e[1]*r[0]-e[0]*r[1];return a/2}(n)&&n.reverse(),!i&&e&&Ml(e)&&0<e&&function(t,e){void 0===e&&(e=1/0);for(var n=0;n<t.length;n++)for(var i=t[n],r=n===t.length-1?t[0]:t[n+1];bl(i,r)>e;)r=wl(i,r,.5),t.splice(n+1,0,r)}(n,e),n}function Ll(e,n,t){void 0===t&&(t={});var i=t.maxSegmentLength;void 0===i&&(i=10);var r=t.string;void 0===r&&(r=!0);var a,o,s,l,u=Tl(e,i),c=Tl(n,i),h=(o=c,s=r,l=(a=u).length-o.length,Sl(a,l<0?-1*l:0),Sl(o,0<l?l:0),function(r,t){for(var e,a,n,o=r.length,s=1/0,i=function(i){a=0,t.forEach(function(t,e){var n=bl(r[(i+e)%o],t);a+=n*n}),a<s&&(s=a,e=i)},l=0;l<o;l++)i(l);e&&(n=r.splice(0,e),r.splice.apply(r,[r.length,0].concat(n)))}(a,o),kl(a,o,s));return!r||"string"!=typeof e&&"string"!=typeof n?h:function(t){return t<1e-4&&"string"==typeof e?e:1-t<1e-4&&"string"==typeof n?n:h(t)}}function Il(t,e,n,i,r){return Pl((c=t,h=e,f=n,function(i){var t=El(i),r=Cs(i.concat([i[0]])),a=Math.atan2(i[0][1]-t[1],i[0][0]-t[0]),o=0;return i.map(function(t,e){var n;return e&&(o+=bl(t,i[e-1])),n=a+2*Math.PI*(r?o/r:e/i.length),[Math.cos(n)*f+c,Math.sin(n)*f+h]})}),i,"M"+(l=(a=t)-(s=n)+","+(o=e))+(u="A"+s+","+s+",0,1,1,")+(a+s)+","+o+u+l+"Z",2*Math.PI*n,r);var a,o,s,l,u,c,h,f}function Nl(t,e,n,i,r,a){return Pl((c=t,h=e,f=n,d=i,function(r){var t=El(r),a=Cs(r.concat([r[0]])),e=Math.atan2(r[0][1]-t[1],r[0][0]-t[0]),o=0;e<0&&(e=2*Math.PI+e);var s=e/(2*Math.PI);return r.map(function(t,e){e&&(o+=bl(t,r[e-1]));var n,i=(n=(s+(a?o/a:e/r.length))%1)<=1/8?[1,.5+4*n]:n<=3/8?[1.5-4*n,1]:n<=5/8?[0,2.5-4*n]:n<=7/8?[4*n-2.5,0]:[1,4*n-3.5];return[c+i[0]*f,h+i[1]*d]})}),r,"M"+(o=t)+","+(s=e)+"L"+(l=o+n)+","+s+"L"+l+","+(u=s+i)+"L"+o+","+u+"Z",2*n+2*i,a);var o,s,l,u,c,h,f,d}function Ol(t,e,n,i,r,a){var o=Nl(e,n,i,r,t,a);return function(t){return o(1-t)}}function Pl(t,e,n,i,r){void 0===r&&(r={});var a=r.maxSegmentLength;void 0===a&&(a=10);var o=r.string;void 0===o&&(o=!0);var s,l,u=Tl(e,a);return Ml(i)&&u.length<i/a&&Sl(u,Math.ceil(i/a-u.length)),s=t(u),l=kl(s,u,o),o?function(t){return t<1e-4?n:l(t)}:l}function Fl(t){var e=t.split(/[A-Z]/).filter(function(t){return""!=t});return 2==e.length?t="M"+e[0]+"L"+e[0]+"L"+e[1]+"Z":1==e.length&&(t="M"+e[0]+"L"+e[0]+"L"+e[0]+"Z"),t}function zl(t){return _n.y_axis_log&&t<=0?.01:t}function Dl(t,e,n){var i=Math.max(_n.dot_radius,.1);return _n.dot_radius_last&&e==n.parentNode.__data__.data_points.length-1&&(i=_n.dot_radius_last),i}function Rl(t,e,n,u){var i=u?"-secondary":"",r=t.selectAll(".data-point"+i).data(function(t){return u?t.data_points:t[xi.data_points]},Es),a=r.enter().append("path").attr("class","data-point"+i).attr("fill",Ro).attr("data-type","point").attr("transform","translate(0, 0)").attr("d",function(t,e){var n=u?t.facet.scales.value_secondary:t.facet.scales.value,i=t.facet.scales.label,r=Dl(0,e,this),a=i(t.label)+(i.bandwidth?i.bandwidth()/2:0),o=n(zl(t.value)),s=a-r+","+o,l="A"+r+","+r+",0,1,1,";return"M"+s+l+(a+r+","+o)+l+s+"Z"}).on("mouseout",Ch).on("click",Eh);r.merge(a).on("mouseover",Ah).attr("id",function(t){return"point-"+t.series+"-"+t.row_index+i}).transition().duration(e?0:_n.data_trans_duration).delay(n).attr("transform","translate(0, 0)").attr("opacity",_n.dot_opacity).attr("fill",Ro).attrTween("d",function(t,e){var n,i=u?t.facet.scales.value_secondary:t.facet.scales.value,r=t.facet.scales.label,a=Dl(0,e,this),o=r(t.label)+(r.bandwidth?r.bandwidth()/2:0),s=i(zl(t.value)),l=Fl(this.getAttribute("d"));return n=Il(o,s,a,l,{maxSegmentLength:1}),function(t){return n(1-t)}}).on("end",function(){this.setAttribute("data-type","point")}),r.exit().remove()}function Hl(t,e,n){var i=t.selectAll(".data-point").data(function(t){return t[xi.data_points]},Es),r=i.enter().append("path").attr("class","data-point").attr("data-type","bar").attr("opacity",_n.column_opacity).attr("fill",Ro).attr("d",function(t,e){var n=u(t);return h(t.facet.scales.value(0),n,0,t.facet.scales.col_w)}).attr("transform","translate(0, 0)").on("click",Eh).on("mouseout",Ch);function u(t){var e=t.facet.scales;if(xi.stack)return e.label(t.label);var n=xi.facet_by_series?0:t.series;return e.label(t.label)+e.col_padding/2+n*(e.col_w+e.col_padding)}function c(t){return Math.abs(t.facet.scales.value(xi.stack?t.value_base:0)-t.facet.scales.value(t.value))}function h(t,e,n,i){var r=t+n,a=e+i;return"M"+t+","+e+"L"+r+","+e+"L"+r+","+a+"L"+t+","+a+"Z"}i.merge(r).on("mouseover",Ah).attr("id",function(t){return"point-"+t.series+"-"+t.row_index}).transition().duration(e?0:_n.data_trans_duration).delay(n).attr("transform","translate(0, 0)").attr("opacity",_n.column_opacity).attr("fill",Ro).attrTween("d",function(t,e){var n=this.getAttribute("d"),i=(s=t,l=s.value<0,xi.stack?s.facet.scales.value(s.value_base)-(l?c(s):0):l?s.facet.scales.value(0)-c(s):s.facet.scales.value(0)),r=u(t),a=t.facet.scales.col_w,o=c(t);var s,l;return"bar"!=this.getAttribute("data-type")?Ol(Fl(n),i,r,o,a,{maxSegmentLength:1}):no(n,h(i,r,o,a))}).on("end",function(){this.setAttribute("data-type","bar")}),i.exit().remove()}function ql(t,e,n){var i=t.selectAll(".data-point").data(function(t){return t[xi.data_points]},Es),r=i.enter().append("path").attr("class","data-point").attr("data-type","column").attr("opacity",_n.column_opacity).attr("fill",Ro).attr("d",function(t,e){return l(s(t),t.facet.scales.value(0),t.facet.scales.col_w,0)}).attr("transform","translate(0, 0)").on("click",Eh).on("mouseout",Ch);function s(t){var e=t.facet.scales;if(xi.stack)return e.label(t.label);var n=xi.facet_by_series?0:t.series_primary;return e.label(t.label)+e.col_padding/2+n*(e.col_w+e.col_padding)}function l(t,e,n,i){var r=t+n,a=e+i;return"M"+t+","+e+"L"+r+","+e+"L"+r+","+a+"L"+t+","+a+"Z"}i.merge(r).on("mouseover",Ah).attr("id",function(t){return"point-"+t.series+"-"+t.row_index}).transition().duration(e?0:_n.data_trans_duration).delay(n).attr("transform","translate(0, 0)").attr("opacity",_n.column_opacity).attr("fill",Ro).attrTween("d",function(t,e){var n=this.getAttribute("d"),i=s(t),r=function(t){var e=t.facet.scales.value.domain(),n=e[0]>e[1],i=t.value<0;if(xi.stack)return i===n?t.facet.scales.value(t.value_base)-(t.facet.scales.value(t.value_base)-t.facet.scales.value(t.value)):t.facet.scales.value(t.value_base);return i===n?t.facet.scales.h-(t.facet.scales.value(t.facet.scales.value.domain()[0])-t.facet.scales.value(t.value)):t.facet.scales.value(0)}(t),a=t.facet.scales.col_w,o=Math.abs(t.facet.scales.value(xi.stack?t.value_base:0)-t.facet.scales.value(t.value));return"column"!=this.getAttribute("data-type")?Ol(Fl(n),i,r,a,o,{maxSegmentLength:1}):no(n,l(i,r,a,o))}).on("end",function(){this.setAttribute("data-type","column")}),i.exit().remove()}var jl=Math.PI,Bl=2*jl,Ul=1e-6,Vl=Bl-Ul;function Yl(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Wl(){return new Yl}function Gl(t){return function(){return t}}Yl.prototype=Wl.prototype={constructor:Yl,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+a)},arcTo:function(t,e,n,i,r){t=+t,e=+e,n=+n,i=+i,r=+r;var a=this._x1,o=this._y1,s=n-t,l=i-e,u=a-t,c=o-e,h=u*u+c*c;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(Ul<h)if(Math.abs(c*s-l*u)>Ul&&r){var f=n-a,d=i-o,_=s*s+l*l,p=f*f+d*d,g=Math.sqrt(_),m=Math.sqrt(h),v=r*Math.tan((jl-Math.acos((_+h-p)/(2*g*m)))/2),y=v/m,x=v/g;Math.abs(y-1)>Ul&&(this._+="L"+(t+y*u)+","+(e+y*c)),this._+="A"+r+","+r+",0,0,"+ +(u*d<c*f)+","+(this._x1=t+x*s)+","+(this._y1=e+x*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,i,r,a){t=+t,e=+e;var o=(n=+n)*Math.cos(i),s=n*Math.sin(i),l=t+o,u=e+s,c=1^a,h=a?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+u:(Math.abs(this._x1-l)>Ul||Math.abs(this._y1-u)>Ul)&&(this._+="L"+l+","+u),n&&(h<0&&(h=h%Bl+Bl),Vl<h?this._+="A"+n+","+n+",0,1,"+c+","+(t-o)+","+(e-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=l)+","+(this._y1=u):Ul<h&&(this._+="A"+n+","+n+",0,"+ +(jl<=h)+","+c+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};var Xl=Math.abs,Zl=Math.atan2,$l=Math.cos,Kl=Math.max,Ql=Math.min,Jl=Math.sin,tu=Math.sqrt,eu=1e-12,nu=Math.PI,iu=nu/2,ru=2*nu;function au(t){return 1<=t?iu:t<=-1?-iu:Math.asin(t)}function ou(t){return t.innerRadius}function su(t){return t.outerRadius}function lu(t){return t.startAngle}function uu(t){return t.endAngle}function cu(t){return t&&t.padAngle}function hu(t,e,n,i,r,a,o){var s=t-n,l=e-i,u=(o?a:-a)/tu(s*s+l*l),c=u*l,h=-u*s,f=t+c,d=e+h,_=n+c,p=i+h,g=(f+_)/2,m=(d+p)/2,v=_-f,y=p-d,x=v*v+y*y,b=r-a,w=f*p-_*d,k=(y<0?-1:1)*tu(Kl(0,b*b*x-w*w)),M=(w*y-v*k)/x,E=(-w*v-y*k)/x,A=(w*y+v*k)/x,C=(-w*v+y*k)/x,S=M-g,T=E-m,L=A-g,I=C-m;return L*L+I*I<S*S+T*T&&(M=A,E=C),{cx:M,cy:E,x01:-c,y01:-h,x11:M*(r/b-1),y11:E*(r/b-1)}}function fu(){var H=ou,q=su,j=Gl(0),B=null,U=lu,V=uu,Y=cu,W=null;function e(){var t,e,n,i=+H.apply(this,arguments),r=+q.apply(this,arguments),a=U.apply(this,arguments)-iu,o=V.apply(this,arguments)-iu,s=Xl(o-a),l=a<o;if(W||(W=t=Wl()),r<i&&(e=r,r=i,i=e),eu<r)if(ru-eu<s)W.moveTo(r*$l(a),r*Jl(a)),W.arc(0,0,r,a,o,!l),eu<i&&(W.moveTo(i*$l(o),i*Jl(o)),W.arc(0,0,i,o,a,l));else{var u,c,h=a,f=o,d=a,_=o,p=s,g=s,m=Y.apply(this,arguments)/2,v=eu<m&&(B?+B.apply(this,arguments):tu(i*i+r*r)),y=Ql(Xl(r-i)/2,+j.apply(this,arguments)),x=y,b=y;if(eu<v){var w=au(v/i*Jl(m)),k=au(v/r*Jl(m));(p-=2*w)>eu?(d+=w*=l?1:-1,_-=w):(p=0,d=_=(a+o)/2),(g-=2*k)>eu?(h+=k*=l?1:-1,f-=k):(g=0,h=f=(a+o)/2)}var M=r*$l(h),E=r*Jl(h),A=i*$l(_),C=i*Jl(_);if(eu<y){var S,T=r*$l(f),L=r*Jl(f),I=i*$l(d),N=i*Jl(d);if(s<nu&&(S=function(t,e,n,i,r,a,o,s){var l=n-t,u=i-e,c=o-r,h=s-a,f=h*l-c*u;if(!(f*f<eu))return[t+(f=(c*(e-a)-h*(t-r))/f)*l,e+f*u]}(M,E,I,N,T,L,A,C))){var O=M-S[0],P=E-S[1],F=T-S[0],z=L-S[1],D=1/Jl((1<(n=(O*F+P*z)/(tu(O*O+P*P)*tu(F*F+z*z)))?0:n<-1?nu:Math.acos(n))/2),R=tu(S[0]*S[0]+S[1]*S[1]);x=Ql(y,(i-R)/(D-1)),b=Ql(y,(r-R)/(D+1))}}eu<g?eu<b?(u=hu(I,N,M,E,r,b,l),c=hu(T,L,A,C,r,b,l),W.moveTo(u.cx+u.x01,u.cy+u.y01),b<y?W.arc(u.cx,u.cy,b,Zl(u.y01,u.x01),Zl(c.y01,c.x01),!l):(W.arc(u.cx,u.cy,b,Zl(u.y01,u.x01),Zl(u.y11,u.x11),!l),W.arc(0,0,r,Zl(u.cy+u.y11,u.cx+u.x11),Zl(c.cy+c.y11,c.cx+c.x11),!l),W.arc(c.cx,c.cy,b,Zl(c.y11,c.x11),Zl(c.y01,c.x01),!l))):(W.moveTo(M,E),W.arc(0,0,r,h,f,!l)):W.moveTo(M,E),eu<i&&eu<p?eu<x?(u=hu(A,C,T,L,i,-x,l),c=hu(M,E,I,N,i,-x,l),W.lineTo(u.cx+u.x01,u.cy+u.y01),x<y?W.arc(u.cx,u.cy,x,Zl(u.y01,u.x01),Zl(c.y01,c.x01),!l):(W.arc(u.cx,u.cy,x,Zl(u.y01,u.x01),Zl(u.y11,u.x11),!l),W.arc(0,0,i,Zl(u.cy+u.y11,u.cx+u.x11),Zl(c.cy+c.y11,c.cx+c.x11),l),W.arc(c.cx,c.cy,x,Zl(c.y11,c.x11),Zl(c.y01,c.x01),!l))):W.arc(0,0,i,_,d,l):W.lineTo(A,C)}else W.moveTo(0,0);if(W.closePath(),t)return W=null,t+""||null}return e.centroid=function(){var t=(+H.apply(this,arguments)+ +q.apply(this,arguments))/2,e=(+U.apply(this,arguments)+ +V.apply(this,arguments))/2-nu/2;return[$l(e)*t,Jl(e)*t]},e.innerRadius=function(t){return arguments.length?(H="function"==typeof t?t:Gl(+t),e):H},e.outerRadius=function(t){return arguments.length?(q="function"==typeof t?t:Gl(+t),e):q},e.cornerRadius=function(t){return arguments.length?(j="function"==typeof t?t:Gl(+t),e):j},e.padRadius=function(t){return arguments.length?(B=null==t?null:"function"==typeof t?t:Gl(+t),e):B},e.startAngle=function(t){return arguments.length?(U="function"==typeof t?t:Gl(+t),e):U},e.endAngle=function(t){return arguments.length?(V="function"==typeof t?t:Gl(+t),e):V},e.padAngle=function(t){return arguments.length?(Y="function"==typeof t?t:Gl(+t),e):Y},e.context=function(t){return arguments.length?(W=null==t?null:t,e):W},e}function du(t){this._context=t}function _u(t){return new du(t)}function pu(t){return t[0]}function gu(t){return t[1]}function mu(){var o=pu,s=gu,l=Gl(!0),u=null,c=_u,h=null;function e(t){var e,n,i,r=t.length,a=!1;for(null==u&&(h=c(i=Wl())),e=0;e<=r;++e)!(e<r&&l(n=t[e],e,t))===a&&((a=!a)?h.lineStart():h.lineEnd()),a&&h.point(+o(n,e,t),+s(n,e,t));if(i)return h=null,i+""||null}return e.x=function(t){return arguments.length?(o="function"==typeof t?t:Gl(+t),e):o},e.y=function(t){return arguments.length?(s="function"==typeof t?t:Gl(+t),e):s},e.defined=function(t){return arguments.length?(l="function"==typeof t?t:Gl(!!t),e):l},e.curve=function(t){return arguments.length?(c=t,null!=u&&(h=c(u)),e):c},e.context=function(t){return arguments.length?(null==t?u=h=null:h=c(u=t),e):u},e}function vu(t,e){return e<t?-1:t<e?1:t<=e?0:NaN}function yu(t){return t}function xu(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function bu(t){this._context=t}function wu(t,e){this._basis=new bu(t),this._beta=e}du.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},bu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:xu(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:xu(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},wu.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(0<n)for(var i,r=t[0],a=e[0],o=t[n]-r,s=e[n]-a,l=-1;++l<=n;)i=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(r+i*o),this._beta*e[l]+(1-this._beta)*(a+i*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var ku=function e(n){function t(t){return 1===n?new bu(t):new wu(t,n)}return t.beta=function(t){return e(+t)},t}(.85);function Mu(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Eu(t,e){this._context=t,this._k=(1-e)/6}Eu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Mu(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Mu(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Au=function e(n){function t(t){return new Eu(t,n)}return t.tension=function(t){return e(+t)},t}(0);function Cu(t,e){this._context=t,this._alpha=e}Cu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:!function(t,e,n){var i=t._x1,r=t._y1,a=t._x2,o=t._y2;if(t._l01_a>eu){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,r=(r*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>eu){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*u+t._x1*t._l23_2a-e*t._l12_2a)/c,o=(o*u+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(i,r,a,o,t._x2,t._y2)}(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Su=function e(n){function t(t){return n?new Cu(t,n):new Eu(t,0)}return t.alpha=function(t){return e(+t)},t}(.5);function Tu(t){return t<0?-1:1}function Lu(t,e,n){var i=t._x1-t._x0,r=e-t._x1,a=(t._y1-t._y0)/(i||r<0&&-0),o=(n-t._y1)/(r||i<0&&-0),s=(a*r+o*i)/(i+r);return(Tu(a)+Tu(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function Iu(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Nu(t,e,n){var i=t._x0,r=t._y0,a=t._x1,o=t._y1,s=(a-i)/3;t._context.bezierCurveTo(i+s,r+s*e,a-s,o-s*n,a,o)}function Ou(t){this._context=t}function Pu(t){this._context=new Fu(t)}function Fu(t){this._context=t}function zu(t){this._context=t}function Du(t){var e,n,i=t.length-1,r=new Array(i),a=new Array(i),o=new Array(i);for(a[r[0]=0]=2,o[0]=t[0]+2*t[1],e=1;e<i-1;++e)r[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(r[i-1]=2,a[i-1]=7,o[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)n=r[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(r[i-1]=o[i-1]/a[i-1],e=i-2;0<=e;--e)r[e]=(o[e]-r[e+1])/a[e];for(a[i-1]=(t[i]+r[i-1])/2,e=0;e<i-1;++e)a[e]=2*t[e+1]-r[e+1];return[r,a]}function Ru(t,e){this._context=t,this._t=e}Ou.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Nu(this,this._t0,Iu(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Nu(this,Iu(this,n=Lu(this,t,e)),n);break;default:Nu(this,this._t0,n=Lu(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Pu.prototype=Object.create(Ou.prototype)).point=function(t,e){Ou.prototype.point.call(this,e,t)},Fu.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,a){this._context.bezierCurveTo(e,t,i,n,a,r)}},zu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var i=Du(t),r=Du(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},Ru.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var Hu=function(){var _=yu,p=vu,g=null,m=Gl(0),v=Gl(ru),y=Gl(0);function e(n){var t,e,i,r,a,o=n.length,s=0,l=new Array(o),u=new Array(o),c=+m.apply(this,arguments),h=Math.min(ru,Math.max(-ru,v.apply(this,arguments)-c)),f=Math.min(Math.abs(h)/o,y.apply(this,arguments)),d=f*(h<0?-1:1);for(t=0;t<o;++t)0<(a=u[l[t]=t]=+_(n[t],t,n))&&(s+=a);for(null!=p?l.sort(function(t,e){return p(u[t],u[e])}):null!=g&&l.sort(function(t,e){return g(n[t],n[e])}),t=0,i=s?(h-o*d)/s:0;t<o;++t,c=r)e=l[t],r=c+(0<(a=u[e])?a*i:0)+d,u[e]={data:n[e],index:t,value:a,startAngle:c,endAngle:r,padAngle:f};return u}return e.value=function(t){return arguments.length?(_="function"==typeof t?t:Gl(+t),e):_},e.sortValues=function(t){return arguments.length?(p=t,g=null,e):p},e.sort=function(t){return arguments.length?(g=t,p=null,e):g},e.startAngle=function(t){return arguments.length?(m="function"==typeof t?t:Gl(+t),e):m},e.endAngle=function(t){return arguments.length?(v="function"==typeof t?t:Gl(+t),e):v},e.padAngle=function(t){return arguments.length?(y="function"==typeof t?t:Gl(+t),e):y},e}().value(function(t){return t.value}).sort(null);function qu(t,e,n,i){var r=no((e=e||this)._current,{startAngle:t.startAngle,endAngle:t.endAngle});e._current=r(0);var a=no(e._prev_r,n);return function(t){var e=a(t);return i.outerRadius(e).innerRadius(e*_n.donut_inner_radius/100),i(r(t))}}function ju(t){return"translate("+t.data.facet.scales.w/2+","+t.data.facet.scales.h/2+")"}function Bu(t){return Math.min(t.data.facet.scales.h,t.data.facet.scales.w)/2*Math.sqrt(t.data.facet.scales.sum_scale_ratio)}var Uu={area:function(){var c=pu,h=null,f=Gl(0),d=gu,_=Gl(!0),p=null,g=_u,m=null;function e(t){var e,n,i,r,a,o=t.length,s=!1,l=new Array(o),u=new Array(o);for(null==p&&(m=g(a=Wl())),e=0;e<=o;++e){if(!(e<o&&_(r=t[e],e,t))===s)if(s=!s)n=e,m.areaStart(),m.lineStart();else{for(m.lineEnd(),m.lineStart(),i=e-1;n<=i;--i)m.point(l[i],u[i]);m.lineEnd(),m.areaEnd()}s&&(l[e]=+c(r,e,t),u[e]=+f(r,e,t),m.point(h?+h(r,e,t):l[e],d?+d(r,e,t):u[e]))}if(a)return m=null,a+""||null}function t(){return mu().defined(_).curve(g).context(p)}return e.x=function(t){return arguments.length?(c="function"==typeof t?t:Gl(+t),h=null,e):c},e.x0=function(t){return arguments.length?(c="function"==typeof t?t:Gl(+t),e):c},e.x1=function(t){return arguments.length?(h=null==t?null:"function"==typeof t?t:Gl(+t),e):h},e.y=function(t){return arguments.length?(f="function"==typeof t?t:Gl(+t),d=null,e):f},e.y0=function(t){return arguments.length?(f="function"==typeof t?t:Gl(+t),e):f},e.y1=function(t){return arguments.length?(d=null==t?null:"function"==typeof t?t:Gl(+t),e):d},e.lineX0=e.lineY0=function(){return t().x(c).y(f)},e.lineY1=function(){return t().x(c).y(d)},e.lineX1=function(){return t().x(h).y(f)},e.defined=function(t){return arguments.length?(_="function"==typeof t?t:Gl(!!t),e):_},e.curve=function(t){return arguments.length?(g=t,null!=p&&(m=g(p)),e):g},e.context=function(t){return arguments.length?(null==t?p=m=null:m=g(p=t),e):p},e},line:mu,curveBasis:function(t){return new bu(t)},curveBundle:ku,curveCardinal:Au,curveCatmullRom:Su,curveLinear:_u,curveMonotoneX:function(t){return new Ou(t)},curveMonotoneY:function(t){return new Pu(t)},curveNatural:function(t){return new zu(t)},curveStep:function(t){return new Ru(t,.5)},curveStepAfter:function(t){return new Ru(t,1)},curveStepBefore:function(t){return new Ru(t,0)}};function Vu(t){return _n.y_axis_log&&t<=0?.01:t}function Yu(t){return"translate("+t.facet.layout.x+","+t.facet.layout.y+")"}function Wu(t,e,n){var i=Uu.area().x(function(t){return t.facet.scales.label(t.label)}).y0(function(t){return t.facet.scales.value(Vu(t.value))}).y1(function(t){return t.facet.scales.value(Vu((e=t,"area"==_n.chart_type?0:e.hasOwnProperty("value_base")?e.value_base:e.value)));var e}).curve(Uu[_n.line_curve]||Uu.curveLinear),r=oi("#areas").selectAll(".series").data(t),a=r.enter().append("g").attr("class","series").attr("pointer-events","none");a.append("path").attr("class","area").attr("transform",Yu).attr("fill-opacity",xi.area?_n.area_opacity:0).attr("fill",Ho).attr("clip-path",function(t,e){return"url(#clip-"+t.facet.index+"-"+e+")"}),r.merge(a).select("path.area").transition().duration(e?0:_n.data_trans_duration).delay(n).attr("transform",Yu).attr("fill-opacity",xi.area?_n.area_opacity:0).attr("fill",Ho).attr("d",function(t){return i(t[xi.data_points])}),r.exit().remove()}function Gu(t,e,n,i,r){!function(t,e,n,i,r){var a=Uu.line().x(function(t){var e=t.facet.scales.label;return e(t.label)+(e.bandwidth?e.bandwidth()/2:0)}).y(function(t){return t.facet.scales[r?"value_secondary":"value"](Vu(t.value))}).curve(Uu[_n.line_curve]||Uu.curveLinear),o=r?"-secondary":"",s=oi("#lines"+o).selectAll(".series"+o).data(t,As),l=s.enter().append("g").attr("class","series"+o);l.append("clipPath").attr("id",function(t,e){return"clip-"+t.facet.index+"-"+e+o}).append("rect").attr("width",0).attr("y",-_n.margin_top).attr("height",function(t){return t.facet.scales.h+_n.margin_top+_n.margin_bottom}),l.append("path").attr("class","line").attr("opacity",_n.line_opacity).attr("fill","none").attr("stroke",Ho).attr("stroke-width",_n.line_width).attr("transform",Yu).attr("clip-path",function(t,e){return"url(#clip-"+t.facet.index+"-"+e+o+")"}),l.append("text").attr("class","label").attr("font-size",11).attr("alignment-baseline","middle").attr("opacity",0).attr("x",(_n.dot_radius_last||_n.dot_radius)+2).attr("fill",Ho).attr("transform",c);var u=s.merge(l);function c(t){var e=r?t.data_points:t[xi.data_points],n=e[e.length-1]||null,i=t.facet.scales.label;return n?"translate("+(i(n.label)+t.facet.layout.x+(i.bandwidth?i.bandwidth()/2:0))+","+(t.facet.scales[r?"value_secondary":"value"](n.value)+t.facet.layout.y)+")":null}u.select("clipPath rect").transition().duration(e?0:_n.data_trans_duration).delay(e?0:i).attr("y",-_n.margin_top).attr("height",function(t){return t.facet.scales.h+_n.margin_top+_n.margin_bottom}).attr("width",function(t){return r||"line"==xi.mode?t.facet.scales.w:0}).on("interrupt",function(t){oi(this).attr("height",t.facet.scales.h+_n.margin_top+_n.margin_bottom).attr("width",r||"line"==xi.mode?t.facet.scales.w:0)}),u.select("path.line").transition().duration(e?0:_n.data_trans_duration).delay(n).attr("opacity",_n.line_opacity).attr("fill","none").attr("stroke",Ho).attr("stroke-width",_n.line_width).attr("transform",Yu).attr("d",function(t){return a(r?t.data_points:t[xi.data_points])}),u.select(".label").text(function(t){return _n.line_end_labels?t.name:""}).transition().duration(e?0:_n.data_trans_duration).delay(n).attr("fill",Ho).attr("x",(_n.dot_radius_last||_n.dot_radius)+2).attr("opacity",r||"line"==xi.mode?1:0).attr("transform",c),s.exit().remove()}(t,e,n,i,r),r||Wu(t,e,n)}var Xu=Array.prototype.slice;function Zu(t){return t}var $u=1,Ku=2,Qu=3,Ju=4,tc=1e-6;function ec(t){return"translate("+(t+.5)+",0)"}function nc(t){return"translate(0,"+(t+.5)+")"}function ic(){return!this.__axis}function rc(p,g){var m=[],v=null,y=null,x=6,b=6,w=3,k=p===$u||p===Ju?-1:1,M=p===Ju||p===Ku?"x":"y",E=p===$u||p===Qu?ec:nc;function e(t){var e=null==v?g.ticks?g.ticks.apply(g,m):g.domain():v,n=null==y?g.tickFormat?g.tickFormat.apply(g,m):Zu:y,i=Math.max(x,0)+w,r=g.range(),a=+r[0]+.5,o=+r[r.length-1]+.5,s=(g.bandwidth?function(e){var n=Math.max(0,e.bandwidth()-1)/2;return e.round()&&(n=Math.round(n)),function(t){return+e(t)+n}}:function(e){return function(t){return+e(t)}})(g.copy()),l=t.selection?t.selection():t,u=l.selectAll(".domain").data([null]),c=l.selectAll(".tick").data(e,g).order(),h=c.exit(),f=c.enter().append("g").attr("class","tick"),d=c.select("line"),_=c.select("text");u=u.merge(u.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),c=c.merge(f),d=d.merge(f.append("line").attr("stroke","currentColor").attr(M+"2",k*x)),_=_.merge(f.append("text").attr("fill","currentColor").attr(M,k*i).attr("dy",p===$u?"0em":p===Qu?"0.71em":"0.32em")),t!==l&&(u=u.transition(t),c=c.transition(t),d=d.transition(t),_=_.transition(t),h=h.transition(t).attr("opacity",tc).attr("transform",function(t){return isFinite(t=s(t))?E(t):this.getAttribute("transform")}),f.attr("opacity",tc).attr("transform",function(t){var e=this.parentNode.__axis;return E(e&&isFinite(e=e(t))?e:s(t))})),h.remove(),u.attr("d",p===Ju||p==Ku?b?"M"+k*b+","+a+"H0.5V"+o+"H"+k*b:"M0.5,"+a+"V"+o:b?"M"+a+","+k*b+"V0.5H"+o+"V"+k*b:"M"+a+",0.5H"+o),c.attr("opacity",1).attr("transform",function(t){return E(s(t))}),d.attr(M+"2",k*x),_.attr(M,k*i).text(n),l.filter(ic).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",p===Ku?"start":p===Ju?"end":"middle"),l.each(function(){this.__axis=s})}return e.scale=function(t){return arguments.length?(g=t,e):g},e.ticks=function(){return m=Xu.call(arguments),e},e.tickArguments=function(t){return arguments.length?(m=null==t?[]:Xu.call(t),e):m.slice()},e.tickValues=function(t){return arguments.length?(v=null==t?null:Xu.call(t),e):v&&v.slice()},e.tickFormat=function(t){return arguments.length?(y=t,e):y},e.tickSize=function(t){return arguments.length?(x=b=+t,e):x},e.tickSizeInner=function(t){return arguments.length?(x=+t,e):x},e.tickSizeOuter=function(t){return arguments.length?(b=+t,e):b},e.tickPadding=function(t){return arguments.length?(w=+t,e):w},e}var ac,oc,sc=500;function lc(t,e,n){if(""==t)return null;var i=t.split("\n");if("number"==e)i=i.map(function(t){return parseFloat(t.replace(/[^\de.-]/g,""))});else if("datetime"==e){var r=vn(i)[0];i=i.map(function(t){return Xi.labelTest(t)?Xi.labelParse(t):r.parse(t)})}return i.filter(function(t){return!isNaN(n(t))})}function uc(t){var e=t.selectAll("text"),r=-1/0,a={};e.style("visibility",function(t){var e=Xi.labelFormat(t)||t;if(a[e])return"hidden";a[e]=!0;var n=this.getBoundingClientRect(),i="hidden";return r<=n.left-2&&(0!==n.left&&0!==n.right&&(r=n.right),i="visible"),i})}function cc(t,c){var e=t.selectAll("text"),h=null,f={};e.style("visibility",function(t){var e=Xi.labelFormat(t)||t;if(f[e])return"hidden";f[e]=!0;var n,i,r,a=(i=(n=this).getBBox(),{x:(r=oi(n.parentNode).attr("transform").match(/.*translate\((\d[.\d]*)/))?parseFloat(r[1]):NaN,width:i.width,height:i.height});if(!h)return h=a,"visible";var o=a.x-h.x,s=.5*(a.height+h.height),l=a.width,u="hidden";return(s<o*Math.sin(c)||l<o*Math.cos(c))&&(h=a,u="visible"),u})}function hc(t,e,n,i,r){var a,o,s,l,u,c,h,f,d="none"!=_n.y_axis_tick_style&&xi.has_axes?[e]:[],_="gridlines"==_n.y_axis_tick_style,p=_&&_n.y_axis_ticks_inline,g="bar"==xi.mode&&"above"==_n.y_axis_bar_label_position,m=xi.values_on_x?n.label:n.value,v=xi.values_on_x?Xi.label_type:"number",y=rc(Ju,a).scale(m).tickFormat(function(t){return xi.values_on_x?Xi.labelFormat(t):xh(t)}).tickSizeOuter(0).tickSizeInner(g?0:_?-n.w:6).tickPadding(g?0:p?-3:3).ticks("number"==_n.y_axis_tick_mode?_n.y_axis_tick_count:null).tickValues("custom"==_n.y_axis_tick_mode?lc(_n.y_axis_tick_custom,v,m):null),x=t.select(".axes").selectAll(".y.axis").data(d),b=x.enter().append("g").attr("class","y axis").call(y);x.merge(b).style("font-family",_n.layout.body_font.name).transition().duration(i?0:_n.data_trans_duration).delay(r).call(y).on("end",function(){var e=1/0,t=oi(this).selectAll(".tick");setTimeout(function(){t.style("visibility",function(){var t=this.getBoundingClientRect();return e<t.bottom+2?"hidden":(0!=t.top&&0!=t.bottom&&(e=t.top),"visible")})},0)}),x.exit().transition().duration(sc).delay(r).attr("opacity",0).remove(),o=e,s=n,l=g,u=_,c=p,h=i,(f=t.select(".y.axis")).selectAll(".tick").select("text").attr("opacity",o.layout.has_y_axis?1:0).attr("text-anchor",l||c?"start":"end").transition("style").duration(h?0:_n.data_trans_duration).attr("font-size",_n.y_axis_tick_font_size).attr("fill",_n.y_axis_color).attr("dy",function(){var t=.33*(l||c?-1:1)*_n.y_axis_tick_font_size;return l&&(t-=s.label.bandwidth()/2),t/_n.y_axis_tick_font_size+"em"}),f.selectAll("line, path").attr("stroke",_n.y_axis_tick_color).attr("stroke-dasharray",_n.y_axis_tick_dashed),f.select(".domain").style("visibility",u?"hidden":null),function(t,e,n,i,r,a){var o=e.select(".axes").selectAll(".y.axis-label").data(_n.y_axis_label&&t.layout.has_y_axis?[_n.y_axis_label]:[]),s=o.enter().append("text").attr("class","y axis-label").attr("transform",l).attr("fill",_n.y_axis_color).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size",_n.y_axis_label_font_size);function l(){var t="none"==_n.y_axis_tick_style||i||"bar"==xi.mode&&"above"==_n.y_axis_bar_label_position?0:_n.y_axis_tick_w;return"rotate(-90) translate("+-n.h/2+","+-(_n.y_axis_label_font_size+t)+")"}o.merge(s).text(function(t){return t}).transition().duration(r?0:_n.data_trans_duration).delay(a).attr("fill",_n.y_axis_color).attr("transform",l).attr("font-size",_n.y_axis_label_font_size),o.exit().transition().duration(sc).delay(a).attr("opacity",0).remove()}(e,t,n,p,i,r)}function fc(t,e,n,i,r){var a,o,s,l,u,c,h,f,d="none"!=_n.y_secondary_axis_tick_style&&xi.has_secondary_value_axis?[e]:[],_="gridlines"==_n.y_secondary_axis_tick_style,p=_&&_n.y_secondary_axis_ticks_inline,g="bar"==xi.mode&&"above"==_n.y_secondary_axis_bar_label_position,m=rc(Ku,a).scale(n.value_secondary).tickFormat(function(t){return xi.values_on_x?Xi.labelFormat(t):xh(t)}).tickSizeOuter(0).tickSizeInner(g?0:_?-n.w:6).tickPadding(g?0:p?-3:3).ticks("number"==_n.y_secondary_axis_tick_mode?_n.y_secondary_axis_tick_count:null).tickValues("custom"==_n.y_secondary_axis_tick_mode?lc(_n.y_secondary_axis_tick_custom,"number",n.value_secondary):null),v=t.select(".axes").selectAll(".y-secondary.axis").data(d),y=v.enter().append("g").attr("class","y-secondary axis").attr("transform","translate("+n.w+", 0)").call(m);v.merge(y).style("font-family",_n.layout.body_font.name).transition().duration(i?0:_n.data_trans_duration).delay(r).attr("transform","translate("+n.w+", 0)").call(m).on("end",function(){var e=1/0,t=oi(this).selectAll(".tick");setTimeout(function(){t.style("visibility",function(){var t=this.getBoundingClientRect();return e<t.bottom+2?"hidden":(0!=t.top&&0!=t.bottom&&(e=t.top),"visible")})},0)}),v.exit().transition().duration(sc).delay(r).attr("opacity",0).remove(),o=e,s=n,l=g,u=_,c=p,h=i,(f=t.select(".y-secondary.axis")).selectAll(".tick").select("text").attr("opacity",o.layout.has_y_secondary_axis?1:0).attr("text-anchor",l||c?"end":"start").transition("style").duration(h?0:_n.data_trans_duration).attr("font-size",_n.y_secondary_axis_tick_font_size).attr("fill",_n.y_secondary_axis_color).attr("dy",function(){var t=.33*(l||c?-1:1)*_n.y_secondary_axis_tick_font_size;return l&&(t-=s.label.bandwidth()/2),t/_n.y_secondary_axis_tick_font_size+"em"}),f.selectAll("line, path").attr("stroke",_n.y_axis_tick_color).attr("stroke-dasharray",_n.y_axis_tick_dashed),f.select(".domain").style("visibility",u?"hidden":null),function(t,e,n,i,r,a){var o=e.select(".axes").selectAll(".y-secondary.axis-label").data(_n.y_secondary_axis_label&&t.layout.has_y_secondary_axis?[_n.y_secondary_axis_label]:[]),s=o.enter().append("text").attr("class","y-secondary axis-label").attr("transform",l).attr("fill",_n.y_secondary_axis_color).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size",_n.y_secondary_axis_label_font_size);function l(){var t="none"==_n.y_secondary_axis_tick_style||i||"bar"==xi.mode&&"above"==_n.y_secondary_axis_bar_label_position?0:_n.y_secondary_axis_tick_w;return"rotate(90) translate("+n.h/2+","+-(n.w+(_n.y_secondary_axis_label_font_size+t))+")"}o.merge(s).text(function(t){return t}).transition().duration(r?0:_n.data_trans_duration).delay(a).attr("fill",_n.y_secondary_axis_color).attr("transform",l).attr("font-size",_n.y_secondary_axis_label_font_size),o.exit().transition().duration(sc).delay(a).attr("opacity",0).remove()}(e,t,n,p,i,r)}function dc(t,e,n,i,r){var a,o,s="none"!=_n.x_axis_tick_style&&xi.has_axes?[e]:[],l="gridlines"==_n.x_axis_tick_style,u=l&&_n.x_axis_ticks_inline,c=xi.values_on_x?n.value:n.label,h=xi.values_on_x?"number":Xi.label_type,f=rc(Qu,a).scale(c).tickFormat(function(t){return xi.values_on_x?xh(t):Xi.labelFormat(t)}).tickSizeOuter(0).tickSizeInner(l?-n.h:6).tickPadding(u?2:3).ticks("number"==_n.x_axis_tick_mode?_n.x_axis_tick_count:null).tickValues("custom"==_n.x_axis_tick_mode?lc(_n.x_axis_tick_custom,h,c):null),d=t.select(".axes").selectAll(".x.axis").data(s);o=xi.values_on_x?n.h:"column"==xi.mode&&n.value.domain()[0]<0||"gridlines"==_n.x_axis_tick_style?n.value(n.value.domain()[0]):n.value(Math.max(0,n.value.domain()[0]));var _,p,g,m,v,y,x,b,w=d.enter().append("g").attr("class","x axis").attr("transform","translate(0,"+o+")").call(f),k=parseFloat(_n.x_axis_tick_angle)*(Math.PI/180),M=k?cc:uc;d.merge(w).style("font-family",_n.layout.body_font.name).transition().duration(i?0:_n.data_trans_duration).delay(r).attr("transform","translate(0,"+o+")").call(f).on("end",function(){var t=oi(this);setTimeout(function(){M(t,k)},0)}),d.exit().transition().duration(sc).delay(r).attr("opacity",0).remove(),_=e,p=l,g=u,m=i,v=t.selectAll(".x.axis"),y=v.selectAll(".tick"),x=y.size(),b=g?"-90":-_n.x_axis_tick_angle,y.select("text").attr("dy",function(t,e){return g?e==x-1?"-0.33em":"0":"-9"}).transition("style").duration(m?0:_n.data_trans_duration).attr("opacity",_.layout.has_x_axis?1:0).attr("dominant-baseline",function(t,e){return g?e==x-1?"ideographic":"hanging":g?"hanging":"central"}).style("text-anchor",function(){return g?"start":0==b?"middle":"end"}).attr("font-size",_n.x_axis_tick_font_size).attr("fill",_n.x_axis_color).attr("transform","translate(0,15) rotate("+b+")").attr("dx",function(){return g?"17":0==b?0:"5"}),v.selectAll("line, path").attr("stroke",_n.x_axis_tick_color).attr("stroke-dasharray",_n.x_axis_tick_dashed),v.select(".domain").style("visibility",p?"hidden":null),function(t,e,n,i,r,a){var o=e.select(".axes").selectAll(".x.axis-label").data(_n.x_axis_label&&t.layout.has_x_axis?[_n.x_axis_label]:[]),s=o.enter().append("text").attr("class","x axis-label").attr("transform",l).attr("fill",_n.x_axis_color).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size",_n.x_axis_label_font_size);function l(){var t="none"==_n.x_axis_tick_style||i?0:_n.x_axis_tick_h;return"translate("+n.w/2+","+(n.h+_n.x_axis_label_font_size+t)+")"}o.merge(s).text(function(t){return t}).attr("fill",_n.x_axis_color).transition().duration(r?0:_n.data_trans_duration).delay(a).attr("font-size",_n.x_axis_label_font_size).attr("transform",l),o.exit().transition().duration(sc).delay(a).attr("opacity",0).remove()}(e,t,n,u,i,r)}function _c(t){return Math.min(12,Math.max(9,t/25))}function pc(t){return t.replace(/\s*::\s*/,"::").split("::")}function gc(t){return t.replace(/\s*>>\s*/,">>").split(">>")}function mc(t,e){return"number"===e?isNaN(ac(t))?ac(t):t:"datetime"===e?Xi.labelTest(t)?Xi.labelParse(t):vn([t])[0].parse(t):t}function vc(t,e,n){var i=oi(".annotations."+n).selectAll("g.axis-highlights").data(Xi),r=i.enter().append("g").attr("class","axis-highlights").attr("transform",function(t){return"translate("+t.layout.x+", "+t.layout.y+")"}).style("opacity",0);i.merge(r).transition().duration(e?0:_n.data_trans_duration).style("opacity",1).attr("transform",function(t){return"translate("+t.layout.x+", "+t.layout.y+")"}).each(function(t){!function(t,e,n,i){var r=e.scales,a=r.h,o=_n.anno_x_label_align,s=xi.values_on_x?r.value:r.label,l=xi.values_on_x?"number":Xi.label_type,u=[];_n.anno_x_enabled&&xi.has_axes&&_n.anno_x_lines&&i==_n.anno_x_stack&&_n.anno_x_lines.split("\n").forEach(function(t){var e=pc(t),n=e[0],i=e[1];void 0!==i&&u.push({label:n,x:mc(i,l)})});var c=oi(t).selectAll("g.line.x").data(u),h=c.enter().append("g").attr("class","line x").attr("transform",function(t){return"translate("+(s(t.x)||0)+", 0)"});h.append("line").attr("width",0),h.append("text").attr("transform","rotate(-90)");var f=c.merge(h);f.transition().duration(oc).attr("transform",function(t){return"translate("+(s(t.x)||0)+", 0)"}),f.select("line").attr("stroke-dasharray",_n.anno_x_line_dash+" "+_n.anno_x_line_dash).attr("stroke",_n.anno_x_line_color).attr("stroke-width",_n.anno_x_line_width).attr("y2",a),f.select("text").text(function(t){return t.label}).attr("fill",_n.anno_x_line_color).attr("transform",function(){return"translate(0, "+("left"==o?a-6:"right"==o?6:a/2)+") rotate(-90)"}).attr("text-anchor","left"==o?"start":"right"==o?"end":"middle").attr("dy",function(t){return(s(t.x)||0)<_c(r.w)?"1.25em":"-0.5em"}).attr("font-size",_c(r.w)),c.exit().remove()}(this,t,0,n),function(t,e,n,i){var r=e.scales,a=r.h,o=_n.anno_x_label_align,s=xi.values_on_x?r.value:r.label,l=xi.values_on_x?"number":Xi.label_type,u=[];_n.anno_x_enabled&&xi.has_axes&&_n.anno_x_areas&&i==_n.anno_x_stack&&_n.anno_x_areas.split("\n").map(function(t){var e=pc(t);if(!(e.length<2)){var n=e[0],i=gc(e[1]).map(function(t){return mc(t,l)});1<i.length&&u.push({label:n,range:i})}});var c=oi(t).selectAll("g.area.x").data(u),h=c.enter().append("g").attr("class","area x").attr("transform",function(t){return"translate("+(Math.min(s(t.range[0]),s(t.range[1]))||0)+", 0)"});h.append("rect").attr("height",a).attr("width",function(t){return Math.abs(s(t.range[1])-s(t.range[0]))||0}),h.append("text").attr("transform","rotate(-90)");var f=c.merge(h);f.transition().duration(oc).attr("transform",function(t){return"translate("+(Math.min(s(t.range[0]),s(t.range[1]))||0)+", 0)"}),f.select("rect").attr("width",function(t){return Math.abs(s(t.range[1])-s(t.range[0]))||0}).attr("fill",_n.anno_x_fill_color).attr("opacity",_n.anno_x_fill_opacity).attr("height",a),f.select("text").text(function(t){return t.label}).attr("fill",_n.anno_x_label_color).attr("transform",function(){return"translate(0, "+("left"==o?a-6:"right"==o?6:a/2)+") rotate(-90)"}).attr("text-anchor","left"==o?"start":"right"==o?"end":"middle").attr("dominant-baseline","hanging").attr("dy","0.33em").attr("font-size",_c(r.w)),c.exit().remove()}(this,t,0,n),function(t,e,n,i){var r=e.scales,a=r.w,o=_n.anno_y_label_align,s=xi.values_on_x?r.label:r.value,l=xi.values_on_x?Xi.label_type:"number",u=[];_n.anno_y_enabled&&xi.has_axes&&_n.anno_y_lines&&i==_n.anno_y_stack&&_n.anno_y_lines.split("\n").forEach(function(t){var e=pc(t),n=e[0],i=e[1];void 0!==i&&u.push({label:n,y:mc(i,l)})});var c=oi(t).selectAll("g.line.y").data(u),h=c.enter().append("g").attr("class","line y").attr("transform",function(t){return"translate(0, "+s(t.y)+")"});h.append("line").attr("width",0),h.append("text");var f=c.merge(h);f.transition().duration(oc).attr("transform",function(t){return"translate(0, "+s(t.y)+")"}),f.select("line").attr("stroke-dasharray",_n.anno_y_line_dash+" "+_n.anno_y_line_dash).attr("stroke",_n.anno_y_line_color).attr("stroke-width",_n.anno_y_line_width).attr("x2",a),f.select("text").text(function(t){return t.label}).attr("fill",_n.anno_y_line_color).attr("x","left"==o?10:"right"==o?a-6:a/2).attr("text-anchor","left"==o?"start":"right"==o?"end":"middle").attr("dy","-0.5em").attr("font-size",_c(a)),c.exit().remove()}(this,t,0,n),function(t,e,n,i){var r=e.scales,a=r.w,o=_n.anno_y_label_align,s=xi.values_on_x?r.label:r.value,l=xi.values_on_x?Xi.label_type:"number",u=[];_n.anno_y_enabled&&xi.has_axes&&_n.anno_y_areas&&i==_n.anno_y_stack&&_n.anno_y_areas.split("\n").map(function(t){var e=pc(t);if(!(e.length<2)){var n=e[0],i=gc(e[1]).map(function(t){return mc(t,l)});1<i.length&&u.push({label:n,range:i})}});var c=oi(t).selectAll("g.area.y").data(u),h=c.enter().append("g").attr("class","area y").attr("transform",function(t){return"translate(0, "+Math.min(s(t.range[0]),s(t.range[1]))+")"});h.append("rect").attr("width",a).attr("height",function(t){return Math.abs(s(t.range[1])-s(t.range[0]))}),h.append("text");var f=c.merge(h);f.transition().duration(oc).attr("transform",function(t){return"translate(0, "+Math.min(s(t.range[0]),s(t.range[1]))+")"}),f.select("rect").attr("height",function(t){return Math.abs(s(t.range[1])-s(t.range[0]))}).attr("fill",_n.anno_y_fill_color).attr("opacity",_n.anno_y_fill_opacity).attr("width",a),f.select("text").text(function(t){return t.label}).attr("fill",_n.anno_y_label_color).attr("x","left"==o?10:"right"==o?a-6:a/2).attr("text-anchor","left"==o?"start":"right"==o?"end":"middle").attr("dominant-baseline","hanging").attr("dy","0.33em").attr("font-size",_c(a)),c.exit().remove()}(this,t,0,n)}),i.exit().remove()}function yc(t){return function(){return t}}function xc(t){return t[0]}function bc(t){return t[1]}function wc(){this._=null}function kc(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Mc(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function Ec(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function Ac(t){for(;t.L;)t=t.L;return t}function Cc(t,e,n,i){var r=[null,null],a=Zc.push(r)-1;return r.left=t,r.right=e,n&&Tc(r,t,e,n),i&&Tc(r,e,t,i),Gc[t.index].halfedges.push(a),Gc[e.index].halfedges.push(a),r}function Sc(t,e,n){var i=[e,n];return i.left=t,i}function Tc(t,e,n,i){t[0]||t[1]?t.left===n?t[1]=i:t[0]=i:(t[0]=i,t.left=e,t.right=n)}function Lc(t,e,n,i,r){var a,o=t[0],s=t[1],l=o[0],u=o[1],c=0,h=1,f=s[0]-l,d=s[1]-u;if(a=e-l,f||!(0<a)){if(a/=f,f<0){if(a<c)return;a<h&&(h=a)}else if(0<f){if(h<a)return;c<a&&(c=a)}if(a=i-l,f||!(a<0)){if(a/=f,f<0){if(h<a)return;c<a&&(c=a)}else if(0<f){if(a<c)return;a<h&&(h=a)}if(a=n-u,d||!(0<a)){if(a/=d,d<0){if(a<c)return;a<h&&(h=a)}else if(0<d){if(h<a)return;c<a&&(c=a)}if(a=r-u,d||!(a<0)){if(a/=d,d<0){if(h<a)return;c<a&&(c=a)}else if(0<d){if(a<c)return;a<h&&(h=a)}return(0<c||h<1)&&(0<c&&(t[0]=[l+c*f,u+c*d]),h<1&&(t[1]=[l+h*f,u+h*d])),!0}}}}}function Ic(t,e,n,i,r){var a=t[1];if(a)return!0;var o,s,l=t[0],u=t.left,c=t.right,h=u[0],f=u[1],d=c[0],_=c[1],p=(h+d)/2,g=(f+_)/2;if(_===f){if(p<e||i<=p)return;if(d<h){if(l){if(l[1]>=r)return}else l=[p,n];a=[p,r]}else{if(l){if(l[1]<n)return}else l=[p,r];a=[p,n]}}else if(s=g-(o=(h-d)/(_-f))*p,o<-1||1<o)if(d<h){if(l){if(l[1]>=r)return}else l=[(n-s)/o,n];a=[(r-s)/o,r]}else{if(l){if(l[1]<n)return}else l=[(r-s)/o,r];a=[(n-s)/o,n]}else if(f<_){if(l){if(l[0]>=i)return}else l=[e,o*e+s];a=[i,o*i+s]}else{if(l){if(l[0]<e)return}else l=[i,o*i+s];a=[e,o*e+s]}return t[0]=l,t[1]=a,!0}function Nc(t,e){return e[+(e.left!==t.site)]}wc.prototype={constructor:wc,insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else n=this._?(t=Ac(this._),e.P=null,(e.N=t).P=t.L=e,t):(e.P=e.N=null,this._=e,null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(Mc(this,n),n=(t=n).U),n.C=!1,i.C=!0,Ec(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(Ec(this,n),n=(t=n).U),n.C=!1,i.C=!0,Mc(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,a=t.L,o=t.R;if(n=a?o?Ac(o):a:o,r?r.L===t?r.L=n:r.R=n:this._=n,a&&o?(i=n.C,n.C=t.C,((n.L=a).U=n)!==o?(r=n.U,n.U=t.U,t=n.R,r.L=t,(n.R=o).U=n):(n.U=r,t=(r=n).R)):(i=t.C,t=n),t&&(t.U=r),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,Mc(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Ec(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,Mc(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,Ec(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Mc(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,Ec(this,r),t=this._;break}e.C=!0,r=(t=r).U}while(!t.C);t&&(t.C=!1)}}};var Oc,Pc=[];function Fc(){kc(this),this.x=this.y=this.arc=this.site=this.cy=null}function zc(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,a=n.site;if(i!==a){var o=r[0],s=r[1],l=i[0]-o,u=i[1]-s,c=a[0]-o,h=a[1]-s,f=2*(l*h-u*c);if(!(-Kc<=f)){var d=l*l+u*u,_=c*c+h*h,p=(h*d-u*_)/f,g=(l*_-c*d)/f,m=Pc.pop()||new Fc;m.arc=t,m.site=r,m.x=p+o,m.y=(m.cy=g+s)+Math.sqrt(p*p+g*g),t.circle=m;for(var v=null,y=Xc._;y;)if(m.y<y.y||m.y===y.y&&m.x<=y.x){if(!y.L){v=y.P;break}y=y.L}else{if(!y.R){v=y;break}y=y.R}Xc.insert(v,m),v||(Oc=m)}}}}function Dc(t){var e=t.circle;e&&(e.P||(Oc=e.N),Xc.remove(e),Pc.push(e),kc(e),t.circle=null)}var Rc=[];function Hc(){kc(this),this.edge=this.site=this.circle=null}function qc(t){var e=Rc.pop()||new Hc;return e.site=t,e}function jc(t){Dc(t),Wc.remove(t),Rc.push(t),kc(t)}function Bc(t){var e=t.circle,n=e.x,i=e.cy,r=[n,i],a=t.P,o=t.N,s=[t];jc(t);for(var l=a;l.circle&&Math.abs(n-l.circle.x)<$c&&Math.abs(i-l.circle.cy)<$c;)a=l.P,s.unshift(l),jc(l),l=a;s.unshift(l),Dc(l);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<$c&&Math.abs(i-u.circle.cy)<$c;)o=u.N,s.push(u),jc(u),u=o;s.push(u),Dc(u);var c,h=s.length;for(c=1;c<h;++c)u=s[c],l=s[c-1],Tc(u.edge,l.site,u.site,r);l=s[0],(u=s[h-1]).edge=Cc(l.site,u.site,null,r),zc(l),zc(u)}function Uc(t){for(var e,n,i,r,a,o=t[0],s=t[1],l=Wc._;l;)if(i=Vc(l,s)-o,$c<i)l=l.L;else{if(r=o-Yc(l,s),!($c<r)){-$c<i?(e=l.P,n=l):-$c<r?n=(e=l).N:e=n=l;break}if(!l.R){e=l;break}l=l.R}Gc[(a=t).index]={site:a,halfedges:[]};var u=qc(t);if(Wc.insert(e,u),e||n){if(e===n)return Dc(e),n=qc(e.site),Wc.insert(u,n),u.edge=n.edge=Cc(e.site,u.site),zc(e),void zc(n);if(n){Dc(e),Dc(n);var c=e.site,h=c[0],f=c[1],d=t[0]-h,_=t[1]-f,p=n.site,g=p[0]-h,m=p[1]-f,v=2*(d*m-_*g),y=d*d+_*_,x=g*g+m*m,b=[(m*y-_*x)/v+h,(d*x-g*y)/v+f];Tc(n.edge,c,p,b),u.edge=Cc(c,t,null,b),n.edge=Cc(t,p,null,b),zc(e),zc(n)}else u.edge=Cc(e.site,u.site)}}function Vc(t,e){var n=t.site,i=n[0],r=n[1],a=r-e;if(!a)return i;var o=t.P;if(!o)return-1/0;var s=(n=o.site)[0],l=n[1],u=l-e;if(!u)return s;var c=s-i,h=1/a-1/u,f=c/u;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*u)-l+u/2+r-a/2)))/h+i:(i+s)/2}function Yc(t,e){var n=t.N;if(n)return Vc(n,e);var i=t.site;return i[1]===e?i[0]:1/0}var Wc,Gc,Xc,Zc,$c=1e-6,Kc=1e-12;function Qc(t,e){return e[1]-t[1]||e[0]-t[0]}function Jc(t,e){var n,i,r,a=t.sort(Qc).pop();for(Zc=[],Gc=new Array(t.length),Wc=new wc,Xc=new wc;;)if(r=Oc,a&&(!r||a[1]<r.y||a[1]===r.y&&a[0]<r.x))a[0]===n&&a[1]===i||(Uc(a),n=a[0],i=a[1]),a=t.pop();else{if(!r)break;Bc(r.arc)}if(function(){for(var t,e,n,i,r=0,a=Gc.length;r<a;++r)if((t=Gc[r])&&(i=(e=t.halfedges).length)){var o=new Array(i),s=new Array(i);for(n=0;n<i;++n)o[n]=n,s[n]=(l=t,u=Zc[e[n]],f=h=void 0,c=l.site,h=u.left,f=u.right,c===f&&(f=h,h=c),f?Math.atan2(f[1]-h[1],f[0]-h[0]):(f=c===h?(h=u[1],u[0]):(h=u[0],u[1]),Math.atan2(h[0]-f[0],f[1]-h[1])));for(o.sort(function(t,e){return s[e]-s[t]}),n=0;n<i;++n)s[n]=e[o[n]];for(n=0;n<i;++n)e[n]=s[n]}var l,u,c,h,f}(),e){var o=+e[0][0],s=+e[0][1],l=+e[1][0],u=+e[1][1];!function(t,e,n,i){for(var r,a=Zc.length;a--;)Ic(r=Zc[a],t,e,n,i)&&Lc(r,t,e,n,i)&&(Math.abs(r[0][0]-r[1][0])>$c||Math.abs(r[0][1]-r[1][1])>$c)||delete Zc[a]}(o,s,l,u),function(t,e,n,i){var r,a,o,s,l,u,c,h,f,d,_,p,g,m,v=Gc.length,y=!0;for(r=0;r<v;++r)if(a=Gc[r]){for(o=a.site,s=(l=a.halfedges).length;s--;)Zc[l[s]]||l.splice(s,1);for(s=0,u=l.length;s<u;)g=a,_=(d=(m=Zc[l[s]])[+(m.left===g.site)])[0],p=d[1],h=(c=Nc(a,Zc[l[++s%u]]))[0],f=c[1],(Math.abs(_-h)>$c||Math.abs(p-f)>$c)&&(l.splice(s,0,Zc.push(Sc(o,d,Math.abs(_-t)<$c&&$c<i-p?[t,Math.abs(h-t)<$c?f:i]:Math.abs(p-i)<$c&&$c<n-_?[Math.abs(f-i)<$c?h:n,i]:Math.abs(_-n)<$c&&$c<p-e?[n,Math.abs(h-n)<$c?f:e]:Math.abs(p-e)<$c&&$c<_-t?[Math.abs(f-e)<$c?h:t,e]:null))-1),++u);u&&(y=!1)}if(y){var x,b,w,k=1/0;for(r=0,y=null;r<v;++r)(a=Gc[r])&&(w=(x=(o=a.site)[0]-t)*x+(b=o[1]-e)*b)<k&&(k=w,y=a);if(y){var M=[t,e],E=[t,i],A=[n,i],C=[n,e];y.halfedges.push(Zc.push(Sc(o=y.site,M,E))-1,Zc.push(Sc(o,E,A))-1,Zc.push(Sc(o,A,C))-1,Zc.push(Sc(o,C,M))-1)}}for(r=0;r<v;++r)(a=Gc[r])&&(a.halfedges.length||delete Gc[r])}(o,s,l,u)}this.edges=Zc,this.cells=Gc,Wc=Xc=Zc=Gc=null}Jc.prototype={constructor:Jc,polygons:function(){var n=this.edges;return this.cells.map(function(e){var t=e.halfedges.map(function(t){return Nc(e,n[t])});return t.data=e.site.data,t})},triangles:function(){var f=[],d=this.edges;return this.cells.forEach(function(t,e){if(i=(n=t.halfedges).length)for(var n,i,r,a,o,s,l=t.site,u=-1,c=d[n[i-1]],h=c.left===l?c.right:c.left;++u<i;)r=h,h=(c=d[n[u]]).left===l?c.right:c.left,r&&h&&e<r.index&&e<h.index&&(o=r,s=h,((a=l)[0]-s[0])*(o[1]-a[1])-(a[0]-o[0])*(s[1]-a[1])<0)&&f.push([l.data,r.data,h.data])}),f},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(o,s,t){for(var e,l,u=this,c=u._found||0,n=u.cells.length;!(l=u.cells[c]);)if(++c>=n)return null;for(var i=o-l.site[0],r=s-l.site[1],h=i*i+r*r;l=u.cells[e=c],c=null,l.halfedges.forEach(function(t){var e=u.edges[t],n=e.left;if(n!==l.site&&n||(n=e.right)){var i=o-n[0],r=s-n[1],a=i*i+r*r;a<h&&(h=a,c=n.index)}}),null!==c;);return u._found=e,null==t||h<=t*t?l.site:null}};var th=function(){var r=xc,a=bc,e=null;function n(i){return new Jc(i.map(function(t,e){var n=[Math.round(r(t,e,i)/$c)*$c,Math.round(a(t,e,i)/$c)*$c];return n.index=e,n.data=t,n}),e)}return n.polygons=function(t){return n(t).polygons()},n.links=function(t){return n(t).links()},n.triangles=function(t){return n(t).triangles()},n.x=function(t){return arguments.length?(r="function"==typeof t?t:yc(+t),n):r},n.y=function(t){return arguments.length?(a="function"==typeof t?t:yc(+t),n):a},n.extent=function(t){return arguments.length?(e=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],n):e&&[[e[0][0],e[0][1]],[e[1][0],e[1][1]]]},n.size=function(t){return arguments.length?(e=null==t?null:[[0,0],[+t[0],+t[1]]],n):e&&[e[1][0]-e[0][0],e[1][1]-e[0][1]]},n}();function eh(t){return _n.labels_responsive?"bar"==xi.mode?Math.min(_n.labels_font_size_max,Math.max(_n.labels_font_size_min,.8*t.facet.scales.col_w)):Math.min(_n.labels_font_size_max,Math.max(_n.labels_font_size_min,t.facet.scales.w/45)):_n.labels_font_size}function nh(t){return"off"==_n.labels_bg_mode?0:"auto"==_n.labels_bg_mode&&"bar"==xi.mode?0:eh(t)/(100/_n.labels_bg_size)}function ih(t,e){return t.getBBox().width*e/parseFloat(t.getAttribute("font-size"))}function rh(t,e){var n,i,r,a,o=(i=e,r=this,a=Math.max(_n.dot_radius,.1),_n.dot_radius_last&&i==r.parentNode.__data__.data_points.length-1&&(a=_n.dot_radius_last),a),s=eh(t),l=ih(this,s),u=t.facet.scales,c=t.facet.scales.label(t.label),h=t.facet.scales.value((n=t.value,_n.y_axis_log&&n<=0?.01:n))+1*eh(t),f=xi.facet_by_series?0:t.series_primary;if("line"==xi.mode&&(_n.labels_dot_center?h-=.55*eh(t):(h+=o,c<l/2&&(c+=l/2),c>t.facet.scales.w-l/2&&(c-=l/2))),"column"==xi.mode&&(c+=t.facet.scales.col_w/2+t.facet.scales.col_padding/2,xi.stack||(c+=f*(t.facet.scales.col_w+t.facet.scales.col_padding))),"donut"==xi.mode){var d="point-"+t.series+"-"+t.row_index,_=document.getElementById(d).__centroid__;return"translate("+(_[0]+t.facet.scales.w/2)+","+(_[1]+t.facet.scales.h/2)+")"}if("bar"==xi.mode){c=u.value(t.value);var p=u.value(t.value_base||0),g=Math.abs(c-p),m=s/4,v=0<t.value;c="left"==_n.label_bar_align?v?p+m+l/2:p-m-l/2:"right"==_n.label_bar_align?v?c-l/2-m:c+l/2+m:v?c-g/2:c+g/2,h=t.facet.scales.label(t.label)+.33*s,h+=t.facet.scales.col_w/2+t.facet.scales.col_padding/2,xi.stack||(h+=f*(t.facet.scales.col_w+t.facet.scales.col_padding))}return"translate("+c+","+h+")"}function ah(t){return Xi.labelFormat(t.label)}function oh(t){return xi.stack?xh(t.value-t.value_base):xh(t.value)}function sh(t,e,n){return No?Do(n):zo(t.parentNode.__data__.series)}function lh(t,e){if("auto"!=_n.labels_color_mode)return"series"==_n.labels_color_mode?sh(this,0,e):_n.labels_fixed_color;var n=sh(this,0,e);return"line"==_n.chart_type?n:"bar"==xi.mode?function(t){if(t){var e=da(t);return 195<Math.round(299*e.r+587*e.g+114*e.b)/1e3}console.warn("No valid color",t)}(n)?"black":"white":"black"}function uh(t){return"bar"==xi.mode&&(e=this,i=(n=t).facet.scales.value,r=eh(n),a=Math.abs(i(n.value)-i(n.value_base||0)),o=ih(e,r)>.9*a,s=n.facet.scales.col_w<r,o||s)?0:1;var e,n,i,r,a,o,s}function ch(t){if(_n.highlighted){var e=document.getElementById(_n.highlighted);Lh(),setTimeout(function(){e&&function(t){if(!_n.show_popups)return;"arc"==t.getAttribute("data-type")?Th(t):Sh(t)}(e)},t)}}function hh(t){return xi.values_on_x?[0,t.w]:[t.h,0]}function fh(t){return xi.values_on_x?[t.h,"gridlines"==_n.x_axis_tick_style&&_n.x_axis_ticks_inline?_n.x_axis_tick_h:0]:["gridlines"==_n.y_axis_tick_style&&_n.y_axis_ticks_inline?_n.y_axis_tick_w:0,t.w]}function dh(t,e){var n=("bar"==xi.mode&&"above"==_n.y_axis_bar_label_position?1.5*_n.y_axis_tick_font_size:0)/(e.h/t.label_domain.length),i=fh(e),r=n/2+_n.column_padding_outer/100,a=n+_n.column_padding_inner/100;e.label=Wo().range(i).domain(t.label_domain).paddingOuter(r).paddingInner(a).align(0<n?.5+n/2:.5)}function _h(t,e,n,i){var r=e.scales,a=oi(t);t.hasOwnProperty("_mode")||(t._mode=xi.mode);var o,s,l,u,c,h,f,d,_,p,g,m=xi.single_series?_n.current_series:0,v=xi.single_series?m+1:void 0,y=e.series.slice(m,v),x=0;switch("line"==xi.prev_mode&&"line"!=xi.mode&&(x=_n.data_trans_duration),function(t,e){var n,i=xi.values_on_x?"x":"y",r=_n[i+"_axis_log"],a=_n[i+"_axis_min"],o=_n[i+"_axis_max"],s=_n[i+"_axis_matching"];if(0<(n=xi.proportional?[0,100]:s?xi.stack?t.dataset_value_extent_stack.slice():t.dataset_value_extent.slice():xi.stack?t.value_extent_stack.slice():t.value_extent.slice())[0]&&(n[0]=0),r&&(n[0]=1),null!=a&&(n[0]=a),null!=o&&(n[1]=o),"line"==_n.chart_type&&r){if(n[0]<=0||n[1]<=0)throw new Error("With a log scale, axis min cannot be set at or below zero!");e.value=_s()}else e.value=as();e.value.range(hh(e)).domain(n),null==a&&null==o&&e.value.nice()}(e,r),function(t,e){var n,i="y_secondary",r=_n[i+"_axis_log"],a=_n[i+"_axis_min"],o=_n[i+"_axis_max"];if(0<(n=_n[i+"_axis_matching"]?t.dataset_value_extent_secondary.slice():t.value_extent_secondary.slice())[0]&&(n[0]=0),r&&(n[0]=1),null!=a&&(n[0]=a),null!=o&&(n[1]=o),r){if(n[0]<=0||n[1]<=0)throw new Error("With a log scale, axis min cannot be set at or below zero!");e.value_secondary=_s()}else e.value_secondary=as();e.value_secondary.range(hh(e)).domain(n),null==a&&null==o&&e.value_secondary.nice()}(e,r),xi.mode){case"bar":case"column":if(dh(e,r),r.num_series=e.series_primary.length,xi.stack||r.num_series<2)r.col_w=r.label.bandwidth(),r.col_padding=0;else{var b=_n.column_padding_in_group/100,w=r.label.bandwidth()/r.num_series,k=w*b;w-=k,r.col_w=w,r.col_padding=k}break;case"line":"number"==r.label_type?(c=r,h=e.label_extent.slice(),null!=_n.x_axis_min&&(h[0]=_n.x_axis_min),null!=_n.x_axis_max&&(h[1]=_n.x_axis_max),c.label=as().range(fh(c)).domain(h),null==_n.x_axis_min&&null==_n.x_axis_max&&c.label.nice()):"datetime"==r.label_type?(l=r,u=e.label_extent.slice(),l.label=Ms().range(fh(l)).domain(u),null==_n.x_axis_min&&null==_n.x_axis_max&&l.label.nice()):(o=e,(s=r).label=Go().range(fh(s)).domain(o.label_domain));break;case"donut":r.label||dh(e,r),r.sum_scale_ratio=_n.donut_auto_scale?y[0].data_points_positive_sum/e.dataset_max_series_sum:1}!function(t,e,n,i){var r=i.select(".interaction").selectAll(".series").data(t),a=r.enter().append("g").attr("class","series"),o=r.merge(a);r.exit().remove();var s=[];"line"==xi.mode&&o.each(function(t){s=s.concat(t[xi.data_points])}),th.extent([[0,0],[e.w,e.h]]).x(function(t){return e.label(t.label)}).y(function(t){return e.value(t.value)});var l=th.polygons(s).filter(function(t){return t}),u=o.selectAll("path").data(l),c=u.enter().append("path").style("opacity",0).on("mouseover",function(){Ah(this.getAttribute("data-target"))}).on("click",function(){Eh(this.getAttribute("data-target"))}).on("mouseout",Ch);u.merge(c).attr("data-target",function(t){return"point-"+t.data.series+"-"+t.data.row_index}).attr("d",function(t){return null==t?null:"M"+t.join("L")+"Z"}),u.exit().remove()}(y,r,0,a),hc(f=a,d=e,_=r,p=i,g=x),dc(f,d,_,p,g),fc(f,d,_,p,g)}function ph(t){return"translate("+t.facet.layout.x+","+t.facet.layout.y+")"}function gh(t,e){var n=e&&"except-data-points"!=e,i=xi.single_series&&!xi.facet_by_series,r=t.series_primary.filter(function(t){return!i||t.index==_n.current_series}),a=0,o=0;"line"!=xi.prev_mode&&"line"==xi.mode&&(o=_n.data_trans_duration),"line"==xi.prev_mode&&"line"!=xi.mode&&(a=_n.data_trans_duration);var s=oi("#data-points").selectAll(".series").data(r,As),l=s.enter().append("g").attr("class","series").attr("transform",ph),u=s.merge(l);u.transition().duration(e?0:_n.data_trans_duration).delay(a).attr("transform",ph),s.exit().transition().duration(e?0:_n.data_trans_duration).delay(a).style("opacity",0).remove();var c,h,f,d,_,p,g=oi("#data-points").selectAll(".series-secondary").data(t.series_secondary,function(t){return"secondary-"+t.name}),m=g.enter().append("g").attr("class","series-secondary").attr("transform",ph),v=g.merge(m);switch(v.transition().duration(e?0:_n.data_trans_duration).delay(a).attr("transform",ph),g.exit().transition().duration(e?0:_n.data_trans_duration).delay(a).style("opacity",0).remove(),xi.mode){case"bar":Hl(u,n,a);break;case"column":ql(u,n,a);break;case"line":Rl(u,n,a);break;case"donut":c=u,h=n,f=a,d=fu().outerRadius(function(t){return Bu(t)}).innerRadius(function(t){return Bu(t)*_n.donut_inner_radius/100}).cornerRadius(_n.donut_corner_radius).padAngle(_n.donut_pad_angle*Math.PI/180),_=c.selectAll(".data-point").data(function(t){return Hu(t.data_points)},Es),p=_.enter().append("path").attr("class","data-point").attr("data-type","arc").each(function(t){this._current={startAngle:0,endAngle:0},this._prev_r=Bu(t)}).attr("fill",function(t){return Ro(t.data)}).attr("opacity",0).attr("d",d).attr("transform",ju).on("click",Eh).on("mouseout",Ch),_.merge(p).on("mouseover",Ah).each(function(t){this.__centroid__=d.centroid(t)}).attr("id",function(t){return"point-"+t.data.series+"-"+t.data.row_index}).transition().duration(h?0:_n.data_trans_duration).delay(f).attr("fill",function(t){return Ro(t.data)}).attr("transform",ju).attr("opacity",1).attrTween("d",function(t){var e=Bu(t);return"arc"==this.getAttribute("data-type")?qu(t,this,e,d,t.data.facet.index):Ll(this.getAttribute("d"),Fl(d(t)),{maxSegmentLength:1})}).on("end",function(t){this.setAttribute("data-type","arc"),this._prev_r=Bu(t),this._current=t}),_.exit().each(function(t){t.data?oi(this).transition().duration(h?0:_n.data_trans_duration).attrTween("d",function(t){return qu({startAngle:2*Math.PI,endAngle:2*Math.PI},this,Bu(t),d)}).remove():oi(this).remove()})}Gu(r,n,a,o),function(t,e,n){var i=t.selectAll(".data-label").data(function(t){return _n.labels?t[xi.data_points]:[]},Es),r=i.enter().append("g").attr("class","data-label").attr("text-anchor","middle").attr("font-size",function(t){return eh(t)+"px"}).attr("pointer-events","none").attr("opacity",0),a=r.append("text").attr("class","back").attr("stroke-width",nh).attr("stroke",_n.bg_color),o=r.append("text").attr("class","front").attr("fill",lh),s=!1;"always"==_n.labels_show_label&&(s=!0),"auto"==_n.labels_show_label&&"donut"==xi.mode&&(s=!0);var l="never"!=_n.labels_show_value;o.append("tspan").attr("class","label").text(s?ah:""),o.append("tspan").attr("class","value").text(l?oh:"").attr("x",0).attr("dy",s?"1.05em":0),a.append("tspan").attr("class","label").text(s?ah:""),a.append("tspan").attr("class","value").text(l?oh:"").attr("x",0).attr("dy",s?"1.05em":0),r.attr("transform",rh);var u=i.merge(r),c=u.select(".back").attr("stroke-width",nh).attr("stroke",_n.bg_color),h=u.select(".front").attr("fill",lh);h.select("tspan.label").text(s?ah:""),h.select("tspan.value").text(l?oh:"").attr("x",0).attr("dy",s?"1.05em":0),c.select("tspan.label").text(s?ah:""),c.select("tspan.value").text(l?oh:"").attr("x",0).attr("dy",s?"1.05em":0);var f=e?0:_n.data_trans_duration;u.transition().duration(f).delay(n).attr("text-anchor","middle").attr("font-size",function(t){return eh(t)+"px"}).attr("transform",rh),u.transition("opacity").duration(.5*f).delay(n+.8*f).attr("opacity",uh),i.exit().remove()}(u,n,a),ch(e?0:a+_n.data_trans_duration),Rl(v,n,a,!0),Gu(t.series_secondary,n,a,o,!0)}function mh(t,e){var n;oc=(n=e)?0:_n.data_trans_duration,ac=pn.getParser(),vc(0,n,"above"),vc(0,n,"below")}function vh(t){return"translate("+t.layout.x+","+t.layout.y+")"}var yh=!1;var xh,bh=_n.line_curve,wh=xi.mode;function kh(t){var e,n,i;xh=gn(pn.getFormatterFunction()),document.body.setAttribute("class","chart-type-"+_n.chart_type.replace(/_/g,"-")),e=yi[_n.chart_type],n=e.proportional?"data_points_stack_prop":e.stack?"data_points_stack":"data_points",i="facets"===_n.facet_layout,xi={mode:e.mode,area:e.area,stack:e.stack,proportional:e.proportional,has_axes:e.has_axes,has_secondary_value_axis:e.has_secondary_value_axis,single_series:e.single_series,legend_show:"off"!==_n.legend_position,legend_type:e.legend_type||"column",facets_show:i,facet_by_series:i&&!yn.data.column_names.hasOwnProperty("facet"),values_on_x:e.values_on_x,data_points:n,prev_mode:vi||e.mode},vi=e.mode;var r=t||"line"==xi.mode&&"line"===wh&&_n.line_curve!==bh;bh=_n.line_curve,wh=xi.mode,Oi(),function(){rr=pn.getParser();var t=xi.has_secondary_value_axis||!1;if(!yn.data.processed||Zi!=xi.facets_show||_n.localization.input_decimal_separator!=$i||_n.series_filter.toString()!=Qi||_n.series_filter_enabled!=Ji||_n.max_series!=Ki||_n.label_data_type!=tr||_n.datetime_input_format!=er||t!=nr||_n.secondary_series!=ir){yn.data.forEach(function(t,e){t.row_index=e});var p={};if(t)for(var e=0;e<_n.secondary_series;e++)p[e]=!0;var i={};for(e=0;e<_n.series_filter.length;e++){var n=yn.data.column_names.value.indexOf(_n.series_filter[e]);i[n]=!0}var r=_n.series_filter_enabled&&0<_n.series_filter.length,g=yn.data.map(function(t){var e=r?t.value.filter(function(t,e){return i[e]&&!p[e]}):t.value,n={row_index:t.row_index,label:t.label,value:e.slice(0,_n.max_series)};return t.hasOwnProperty("facet")&&(n.facet=t.facet),n});for(var a in g.column_names={},yn.data.column_names)"value"!=a?g.column_names[a]=yn.data.column_names[a]:g.column_names.value=yn.data.column_names.value.filter(function(t,e){return!r||i[e]}).slice(0,_n.max_series);if(Xi=[],xi.facet_by_series)for(var o=0;o<g.column_names.value.length;o++)Xi.push({key:g.column_names.value[o],values:g.slice()});else Xi=Di().key(function(t){return t.facet||""}).entries(g),xi.facets_show||(Xi=[Xi[0]||{key:"",values:[]}]);var s,l,u,c,h,f=vn(g,"label")[0];s="auto"==_n.label_data_type?f.type:_n.label_data_type,Xi.label_type=s,Xi.label_description=f.description,Xi.labelTest=f.test,Xi.labelParse=function(t){return"auto"==_n.datetime_input_format?f.parse(t):Pt(_n.datetime_input_format)(t)},Xi.labelFormat=function(t){if("number"==Xi.label_type)return xh(t);if("datetime"!=Xi.label_type)return t;var e="auto"==_n.x_axis_date_format?Xi.label_description:_n.x_axis_date_format;return Ot(e)(t)},Xi.label_extent=function(t,e){var n,i,r,a=t.length,o=-1;if(null==e){for(;++o<a;)if(null!=(n=t[o])&&n<=n)for(i=r=n;++o<a;)null!=(n=t[o])&&(n<i&&(i=n),r<n&&(r=n))}else for(;++o<a;)if(null!=(n=e(t[o],o,t))&&n<=n)for(i=r=n;++o<a;)null!=(n=e(t[o],o,t))&&(n<i&&(i=n),r<n&&(r=n));return[i,r]}(g,function(t){return dr(t.label)}),void 0===(l=fr(g,function(t){return fr(t.value.map(function(t,e){return p[e]?null:rr(t)}))}))&&(l=0),void 0===(u=hr(g,function(t){return hr(t.value.map(function(t,e){return p[e]?null:rr(t)}))}))&&(u=Math.max(l+100,100)),Xi.value_extent=[l,u],Xi.value_extent_stack=[l,u],c=fr(g,function(t){return fr(t.value.map(function(t,e){return p[e]?rr(t):null}))}),h=hr(g,function(t){return hr(t.value.map(function(t,e){return p[e]?rr(t):null}))}),Xi.value_extent_secondary=[c,h],Xi.forEach(function(t,e){t.name=t.key,t.index=e,t.series=[],t.series_primary=[],t.series_secondary=[],t.label_extent=Xi.label_extent.slice(),t.label_type=Xi.label_type,t.label_domain=t.values.map(function(t){return dr(t.label)}),t.dataset_value_extent_stack=Xi.value_extent_stack,t.dataset_value_extent=Xi.value_extent,t.dataset_value_extent_secondary=Xi.value_extent_secondary,t.value_extent=[0,0],t.value_extent_stack=[0,0],t.value_extent_secondary=[0,0],t.value_extent_stack_secondary=[0,0];for(var n=0,i=xi.facet_by_series?e:0;i<(xi.facet_by_series?e+1:g.column_names.value.length);i++){g.column_names.value[i]||(g.column_names.value[i]="Series "+(i+1));for(var r=n,a={name:g.column_names.value[i],index:i,index_primary:p[i]?null:n++,data_points:[],data_points_stack:[],data_points_stack_prop:[],data_points_positive_sum:0,data_point_stack_max:0,secondary:p[i]},o=0;o<t.values.length;o++){var s=dr((u=t.values[o]).label),l=rr(u.value[i]);null==s||isNaN(l)||(a.data_points.push({label:s,value:l,series:i,series_primary:r,index:o,facet:t,row_index:u.row_index}),0<l&&(a.data_points_positive_sum+=l),a.secondary?(l<t.value_extent_secondary[0]&&(t.value_extent_secondary[0]=l),l>t.value_extent_secondary[1]&&(t.value_extent_secondary[1]=l)):(l<t.value_extent[0]&&(t.value_extent[0]=l),l>t.value_extent[1]&&(t.value_extent[1]=l)))}a.secondary?t.series_secondary.push(a):t.series_primary.push(a),t.series.push(a)}for(o=0;o<t.values.length;o++){var u=t.values[o],c=0,h=0,f=0;for(i=xi.facet_by_series?e:0;i<(xi.facet_by_series?e+1:g.column_names.value.length);i++)p[i]||(f+=Math.max(0,rr(u.value[i])||0));var d=100/f;for(i=xi.facet_by_series?e:0;i<(xi.facet_by_series?e+1:g.column_names.value.length);i++)if(!p[i]){s=dr(u.label);var _=(l=rr(u.value[i])||0)<0?h:c;null!=s&&((a=t.series[xi.facet_by_series?0:i]).data_points_stack.push({label:s,value:_+l,value_base:_,series:i,series_primary:a.series_primary,index:o,facet:t,row_index:u.row_index}),isFinite(d)&&a.data_points_stack_prop.push({label:s,value:d*(Math.max(0,l)+c),value_base:d*c,series:i,series_primary:a.series_primary,index:o,facet:t,row_index:u.row_index}),l<0?h+=l:c+=l,h<t.value_extent_stack[0]&&(t.value_extent_stack[0]=h),c>t.value_extent_stack[1]&&(t.value_extent_stack[1]=c),h<Xi.value_extent_stack[0]&&(Xi.value_extent_stack[0]=h),c>Xi.value_extent_stack[1]&&(Xi.value_extent_stack[1]=c))}}});var d=hr(Xi,function(t){return hr(t.series.map(function(t){return t.data_points_positive_sum||null}))});Xi.forEach(function(t){return t.dataset_max_series_sum=d,t}),Xi.series_names=g.column_names.value.map(function(t,e){return t||"Series "+e}),Xi.unfiltered_series_names=yn.data.column_names.value.map(function(t,e){return t||"Series "+e});var _={};for(var m in Xi.row_names=[],g.forEach(function(t){_[t.label]||(_[t.label]=!0)}),_){var v=Xi.labelFormat(dr(m));Xi.row_names.push(v)}Xi.series=[],Xi.series_primary=[],Xi.series_secondary=[],Xi.forEach(function(e){var n=0;e.series.forEach(function(t){++n<=_n.max_series&&(t.facet=e,Xi.series.push(t),t.secondary?Xi.series_secondary.push(t):Xi.series_primary.push(t))})}),Zi=xi.facets_show,$i=_n.localization.input_decimal_separator,Qi=_n.series_filter.toString(),Ji=_n.series_filter_enabled,Ki=_n.max_series,tr=_n.label_data_type,er=_n.datetime_input_format,nr=t,yn.data.processed=!0}}(),Fo(),mn.update(),qo(),function(n){var t=mn.getPrimaryWidth(),e=Xi.length,i=(""!=_n.y_axis_label&&xi.has_axes?2*_n.y_axis_label_font_size:0)+(!xi.has_axes||"none"==_n.y_axis_tick_style||"gridlines"==_n.y_axis_tick_style&&_n.y_axis_ticks_inline||"bar"==xi.mode&&"above"==_n.y_axis_bar_label_position?0:_n.y_axis_tick_w),r=(""!=_n.y_secondary_axis_label&&xi.has_secondary_value_axis?2*_n.y_secondary_axis_label_font_size:0)+(!xi.has_secondary_value_axis||"none"==_n.y_secondary_axis_tick_style||"gridlines"==_n.y_secondary_axis_tick_style&&_n.y_secondary_axis_ticks_inline?0:_n.y_secondary_axis_tick_w),a=(""!=_n.x_axis_label&&xi.has_axes?2*_n.x_axis_label_font_size:0)+(!xi.has_axes||"none"==_n.x_axis_tick_style||"gridlines"==_n.x_axis_tick_style&&_n.x_axis_ticks_inline?0:_n.x_axis_tick_h),o=mn.remToPx(_n.facet_gutter_w),s=_n.y_axis_first_col_only&&_n.y_axis_matching,l=_n.y_secondary_axis_last_col_only&&_n.y_secondary_axis_matching;s||(o+=i),l||(o+=r);var u,c,h="line"==xi.mode&&_n.line_end_labels?_n.line_end_labels_width:0,f=t-i-r-_n.margin_right-_n.margin_left;if("facets"==_n.facet_layout&&_n.facet_fixed_cols)u=Math.floor(_n.facet_cols),c=Math.ceil(e/u);else{var d=Math.floor((f+o)/(_n.facet_min_w+o));u=Math.max(1,Math.min(d,e)),c=Math.ceil(e/u);for(var _=u;0<_&&Math.ceil(e/(u-1))==c;_--)u--}var p=e%u!=0&&u<e,g=(f-o*(u-1))/u-h,m=mn.remToPx(_n.facet_gutter_h),v=_n.x_axis_last_row_only&&_n.x_axis_matching&&!p;v||(m+=a);var y,x,b=v?1:c,w=Xi.length<2?0:1.5*mn.remToPx(_n.facet_header_font_size),k=g*_n.facet_aspect/100,M=c*(k+w+m)+a-m+_n.margin_top+_n.margin_bottom,E=60*Xi.row_names.length,A=c*(E+w+m)+a-m+_n.margin_top+_n.margin_bottom,C=Math.max(mn.getDefaultPrimaryHeight(),1),S=(Math.max(C-_n.margin_top-_n.margin_bottom,1)-a*b-c*w-(c-1)*m)/c;function T(){mn.setHeight(null),x=C,y=S}function L(){x=M,y=k,mn.setHeight(x)}Flourish.fixed_height||"fill_space"==_n.height_mode?T():"aspect"==_n.height_mode?L():"bar"==xi.mode&&"above"==_n.y_axis_bar_label_position?(x=A,y=E,mn.setHeight(x)):(g<_n.facet_min_w||S<100)&&C<M?L():T();for(g=Math.max(g,0),y=Math.max(y,0),oi("#graphic").transition().duration(n?0:_n.data_trans_duration).attr("width",t).attr("height",x),_=0;_<e;_++){var I=Math.ceil(_%u),N=Math.floor(_/u),O=Xi[_].layout={};O.has_y_axis=0==I||!s,O.has_y_secondary_axis=I==u-1||!l,O.has_x_axis=N==c-1||!v,O.x=_n.margin_left+i+I*(g+o+h),O.y=_n.margin_top+w+N*(y+w+m),O.w=g+O.has_y_axis?i:0,O.h=w+y+O.has_x_axis?a:0}var P=mn.remToPx(_n.facet_header_padding*_n.facet_header_font_size),F="center"==_n.facet_title_align||"auto"==_n.facet_title_align&&"donut"==_n.chart_type,z=oi("#facets").selectAll(".facet").data(Xi),D=z.enter().append("g").attr("class","facet").attr("transform",function(t){return vh(yh?Xi[0]:t)}).attr("opacity",0);D.append("rect").attr("class","facet-title-bg"),D.append("text").attr("class","facet-title").attr("y",.75*-w).attr("font-size",mn.remToPx(_n.facet_header_font_size)+"px").attr("font-weight","bold").attr("dx",F||"none"==_n.facet_header_bg?0:P).each(V).attr("x",q).attr("fill",j),D.select(".facet-title-bg").attr("width",U).attr("height",w).attr("fill",B).attr("x",q).attr("y",1.3*-w);var R=D.append("g").attr("class","plot");R.append("clipPath").attr("class","facet-clip").append("rect").attr("width",g+o).attr("height",w+y+m).attr("transform","translate("+-o/2+","+-(w+m/2)+")"),R.append("g").attr("class","bg").append("rect").attr("fill","none"),R.append("g").attr("class","interaction"),R.append("g").attr("class","axes");var H=z.merge(D);function q(){return"full"==_n.facet_header_bg?0:F?g/2-this.parentNode.__title_width__/2-P:0}function j(t,e){return"fixed"!=_n.facet_header_color_mode&&"row"!=xi.legend_type&&xi.facet_by_series?zo(e):_n.facet_header_color}function B(t,e){return"fixed"!=_n.facet_header_bg_mode&&"row"!=xi.legend_type&&xi.facet_by_series?zo(e):_n.facet_header_bg_color}function U(){if("none"!=_n.facet_header_bg)return"full"==_n.facet_header_bg?g:this.parentNode.__title_width__+2*P}function V(){var t=this.getBBox().width,e=parseFloat(this.getAttribute("font-size")),n=mn.remToPx(_n.facet_header_font_size);this.parentNode.__title_width__=t*n/e}H.transition().duration(n?0:_n.data_trans_duration).attr("transform",vh).attr("opacity",1),H.select(".facet-title").text(function(t){return t.name}).transition().duration(n?0:_n.data_trans_duration).attr("font-size",mn.remToPx(_n.facet_header_font_size)+"px").attr("clip-path",function(t,e){return"url(#facet-clip-"+e+")"}).attr("fill",j).attr("opacity",Xi.length<2?0:1).attr("dx",F||"none"==_n.facet_header_bg?0:P).attr("y",.56*-w).each(V).attr("x",function(){return F?g/2-this.parentNode.__title_width__/2:0}),H.select(".facet-title-bg").attr("clip-path",function(t,e){return"url(#facet-clip-"+e+")"}).transition().duration(n?0:_n.data_trans_duration).attr("height",w).attr("width",U).attr("fill",B).attr("x",q).attr("y",1.3*-w),H.select(".facet-clip").attr("id",function(t,e){return"facet-clip-"+e}).select("rect").transition().duration(n?0:_n.data_trans_duration).attr("width",g+o+h).attr("height",w+y+m).attr("transform","translate("+-o/2+","+-(w+m/2)+")"),H.select(".data-points").attr("clip-path",function(t,e){return"url(#facet-clip-"+e+")"}),H.select(".data-labels").attr("clip-path",function(t,e){return"url(#facet-clip-"+e+")"}),H.select(".annotations").attr("clip-path",function(t,e){return"url(#facet-clip-"+e+")"}),H.select(".bg rect").style("fill","chart"==_n.bg_color_style?_n.bg_color:"none").attr("width",g).attr("height",y),H.select(".plot").each(function(t,e){t.scales={},t.scales.w=g,t.scales.h=y,t.scales.label_type=Xi.label_type,_h(this,t,0,n)}),z.exit().transition().duration(n?0:_n.data_trans_duration).attr("transform",function(){return vh(Xi[Xi.length-1])}).style("opacity",0).remove(),gh(Xi,n),mh(0,n),yh=1==Xi.length}(r)}var Mh=mi();function Eh(t){if(Kn.stopPropagation(),_n.highlighted)Lh(),_n.highlighted=null;else{var e=this||document.getElementById(t);if(!_n.show_popups)return;if(!e.getAttribute("data-type"))return;_n.highlighted=e.id,kh(!0)}}function Ah(t){if(_n.show_popups&&!_n.highlighted){var e=this||document.getElementById(t);"arc"==e.getAttribute("data-type")?Th(e):Sh(e)}}function Ch(){_n.show_popups&&!_n.highlighted&&Lh()}function Sh(t){var e=t.__data__,n=t.parentNode.__data__,i=t.getBoundingClientRect(),r=i.left+i.width/2,a=i.top,o="row"==xi.legend_type?Do(e.index):zo(n.index),s="<div style='font-size: "+_n.popup_font_size+"px'>";s+="<h1 style='color: "+o+"'>"+n.name+"</h1>",s+="<h2><span class='name'>"+Xi.labelFormat(e.label)+"</span>: "+xh(e.value-(e.value_base||0))+"</h2>",s+="</div>",Mh.point(r,a).html(s).draw()}function Th(t){var e=t.__data__,n=t.parentNode.__data__,i=e.startAngle+(e.endAngle-e.startAngle)/2,r=t.parentNode.getBoundingClientRect(),a=t.__centroid__,o=r.left+r.width/2+a[0],s=r.top+r.height/2+a[1],l="row"===xi.legend_type?Do(e.data.index):zo(n.index),u="<div style='font-size: "+_n.popup_font_size+"px'>";u+="<h1 style='color: "+l+"'>"+n.name+"</h1>",u+="<h2><span class='name'>"+e.data.label+"</span>: "+xh(e.data.value)+"</h2>",u+="</div>";var c,h,f=Mh.directions();Mh.point(o,s).directions((c=i,h=c*(8/Math.PI),h<1||15<h?["bottom","top"]:h<3?["bottomLeft","topRight"]:h<5?["left","right"]:h<7?["topLeft","bottomRight"]:h<9?["top","bottom"]:h<11?["topRight","bottomLeft"]:h<13?["right","left"]:["bottomRight","topLeft"])).html(u).draw().directions(f)}function Lh(){Mh.hide()}return t.data=yn,t.state=_n,t.draw=function(){oi("body").on("click",Eh),oi(mn.getSection("controls")).append("select").attr("id","series-filter").attr("multiple",!0),oi(mn.getSection("legend")).attr("id","legend");var e,t=oi(mn.getSection("primary")).append("svg").attr("id","graphic");t.append("g").attr("id","facets"),t.append("g").attr("class","annotations below"),t.append("g").attr("id","areas"),t.append("g").attr("id","lines"),t.append("g").attr("id","data-points"),t.append("g").attr("id","lines-secondary"),t.append("g").attr("id","data-labels"),t.append("g").attr("class","annotations above"),Mh.container(mn.getWrapper()),kh(!_n.animate_on_load||"except-data-points"),window.addEventListener("resize",function(){var t=window.innerWidth;kh(e&&t!=e),e=t},!1)},t.update=Ii,t}({});
//# sourceMappingURL=template.js.map
</script><script>
var path = document.location.href.match(/\/visualisation\/(\d+)/);
if (path) {
	path = path[0];
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

	ga("create", "UA-44635456-19", "auto", { storage: "none" });
	ga("set", "transport", "beacon");
	ga("set", "dimension1", path.substr(1));
	ga("set", "dimension2", new Date().toISOString());
	ga("send", "pageview", path);
}</script><script>!function(){"use strict";var t,a;function s(){if(null==t){var e=function(){var e=window.location;"about:srcdoc"==e.href&&(e=window.parent.location);var i={};return function(e,t,n){for(;n=t.exec(e);)i[decodeURIComponent(n[1])]=decodeURIComponent(n[2])}(e.search.substring(1).replace(/\+/g,"%20"),/([^&=]+)=?([^&]*)/g),i}();t="referrer"in e?/^https:\/\/medium.com\//.test(e.referrer):!("auto"in e)}return t}function d(e){var t=e||window.innerWidth;return 999<t?650:599<t?575:400}function u(e,t){if(window.top!==window.self){var n=window;if("srcdoc"==n.location.pathname&&(n=n.parent),a)return e=parseInt(e,10),void n.parent.postMessage({sentinel:"amp",type:"embed-size",height:e},"*");var i={sender:"Flourish",context:"iframe.resize",method:"resize",height:e,src:n.location.toString()};if(t)for(var o in t)i[o]=t[o];n.parent.postMessage(JSON.stringify(i),"*")}}function h(){return(-1!==navigator.userAgent.indexOf("Safari")||-1!==navigator.userAgent.indexOf("iPhone"))&&-1==navigator.userAgent.indexOf("Chrome")}function c(o){window.addEventListener("message",function(t){if(null!=t.source&&(t.origin===document.location.origin||t.origin.match(/\/\/localhost:\d+$|\/\/flourish-api\.com$|\.flourish\.(?:local(:\d+)?|net|rocks|studio)$/))){var e;try{e=JSON.parse(t.data)}catch(e){return void console.warn("Unexpected non-JSON message: "+JSON.stringify(t.data))}if("Flourish"===e.sender){for(var n=document.querySelectorAll("iframe"),i=0;i<n.length;i++)if(n[i].contentWindow==t.source||n[i].contentWindow==t.source.parent)return void o(e,n[i]);console.warn("could not find frame",e)}}}),h()&&(window.addEventListener("resize",e),e())}function e(){for(var e=document.querySelectorAll(".flourish-embed"),t=0;t<e.length;t++){var n=e[t];if(!n.getAttribute("data-width")){var i=n.querySelector("iframe"),o=window.getComputedStyle(n),r=n.offsetWidth-parseFloat(o.paddingLeft)-parseFloat(o.paddingRight);i.style.width=r+"px"}}}function l(e,t,n,i){n&&"number"==typeof n&&(n+="px"),i&&"number"==typeof i&&(i+="px"),i||(e.match(/\?/)?e+="&auto=1":e+="?auto=1",i=d(n)+"px");var o=document.createElement("iframe");return o.setAttribute("scrolling","no"),o.setAttribute("frameborder","0"),o.setAttribute("src",e),t.appendChild(o),n?o.style.width=n:h()?o.style.width=t.offsetWidth+"px":o.style.width="100%",i&&("%"===i.charAt(i.length-1)&&(i=parseFloat(i)/100*t.parentNode.offsetHeight+"px"),o.style.height=i),o}!function(){Flourish.warn=function(e){console.warn(e)};var t,n=window.top===window.self,i=n?null:(a="#amp=1"==window.location.hash,{createEmbedIframe:l,isFixedHeight:s,getHeightForBreakpoint:d,startEventListeners:c,notifyParentWindow:u,isSafari:h}),o=!0;function r(){var e;Flourish.fixed_height||(null!=t?e=t:o&&(e=i.getHeightForBreakpoint()),e!==window.innerHeight&&i.notifyParentWindow(e))}function e(){r(),window.addEventListener("resize",r)}Flourish.uploadImage=function(e){if(n||"story_editor"!==Flourish.environment)throw"Invalid upload request";var t={sender:"Flourish",method:"request-upload",name:e.name,accept:e.accept};window.parent.postMessage(JSON.stringify(t),"*")},Flourish.setHeight=function(e){Flourish.fixed_height||(o=null==(t=e),r())},Flourish.checkHeight=function(){if(!n){var e=Flourish.__container_height;null!=e?(Flourish.fixed_height=!0,i.notifyParentWindow(e)):i.isFixedHeight()?Flourish.fixed_height=!0:(Flourish.fixed_height=!1,r())}},Flourish.fixed_height=n||i.isFixedHeight(),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}()}();
//# sourceMappingURL=embedded.js.map
</script><script>
		function _Flourish_unflattenInto(dest, src) {
			dest = dest || {};
			for (var k in src) {
				var t = dest;
				for (var i = k.indexOf("."), p = 0; i >= 0; i = k.indexOf(".", p = i+1)) {
					var s = k.substring(p, i);
					if (!(s in t)) t[s] = {};
					t = t[s];
				}
				t[k.substring(p)] = src[k];
			}
			return dest;
		}
		var _Flourish_settings = {"color.advanced":false,"color.custom_palette":"Inspections: Green","color.palette":["#1D6996","#EDAD08","#73AF48","#94346E","#38A6A5","#E17C05","#5F4690","#0F8554","#6F4070","#CC503E","#994E95","#666666"],"dot_radius":6,"labels":true,"layout.footer_align":"right","layout.footer_note":"Jared Rutecki | BGA","layout.source_label":"Source:","layout.source_name":"American Federation of Government Employees, Local 704","layout.text":"Under President Donald Trump, Environmental Protection Agency  Region 5 inspections out of Chicago have dropped compared with those performed during Barack Obama’s administration.","layout.title":"Inspections Drop","legend_position":"off","line_width":6,"popup_font_size":15};
		_Flourish_unflattenInto(window.template.state, _Flourish_settings);

		var _Flourish_data_column_names = {"data":{"label":"Year","value":["Inspections"]}},
				_Flourish_data = {"data":[{"label":"2009","value":["3849"]},{"label":"2010","value":["4188"]},{"label":"2011","value":["3759"]},{"label":"2012","value":["4706"]},{"label":"2013","value":["4544"]},{"label":"2014","value":["3724"]},{"label":"2015","value":["3599"]},{"label":"2016","value":["2157"]},{"label":"2017","value":["1707"]},{"label":"2018","value":["1214"]},{"label":"2019","value":["799"]}]};
		for (var _Flourish_dataset in _Flourish_data) {
				window.template.data[_Flourish_dataset] = _Flourish_data[_Flourish_dataset];
				window.template.data[_Flourish_dataset].column_names = _Flourish_data_column_names[_Flourish_dataset];
		}
		window.template.draw();
	</script></body></html>